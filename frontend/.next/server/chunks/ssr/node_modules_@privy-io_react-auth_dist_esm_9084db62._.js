module.exports=[602420,a=>{"use strict";var b=a.i(187924),c=a.i(775716);let d=({title:a,description:c,children:d,...e})=>(0,b.jsx)(f,{...e,children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h3",{children:a}),"string"==typeof c?(0,b.jsx)("p",{children:c}):c,d]})}),e=({title:a,description:c,icon:d,children:e,...f})=>(0,b.jsxs)(g,{...f,children:[d||null,(0,b.jsx)("h3",{children:a}),c&&"string"==typeof c?(0,b.jsx)("p",{children:c}):c,e]}),f=c.styled.div.withConfig({displayName:"StyledSection",componentId:"sc-523a75d6-1"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;text-align:left;gap:8px;width:100%;margin-bottom:24px;&& h3{font-size:17px;color:var(--privy-color-foreground);}&& p{color:var(--privy-color-foreground-2);font-size:14px;}"]),g=(0,c.styled)(f).withConfig({displayName:"CenteredStyledSection",componentId:"sc-523a75d6-2"})(["align-items:center;text-align:center;gap:16px;h3{margin-bottom:24px;}"]);a.s(["C",()=>e,"S",()=>d])},666152,a=>{"use strict";var b=a.i(575600),c=a.i(267954),d=a.i(360228);let e=()=>{let{walletProxy:a,recoverEmbeddedWallet:e,setUser:f,refreshSessionAndUser:g,privy:h,client:i}=(0,d.u)(),j=(0,c.u)();return{create:async({walletIndex:c,chainType:d,latestUser:k,recoveryMethod:l,recoveryPassword:m,recoveryAccessToken:n})=>{let o=k;o||(o=await g());let p=await i.getAccessToken();if(!o||!p||!a)throw Error("User must be authenticated before creating a Privy wallet");return await (0,b.g)({appConfig:j,user:o,refreshSessionAndUser:g,privy:h,accessToken:p,proxy:a,recoverEmbeddedWallet:e,setUser:f,walletIndex:c,chainType:d,recoveryMethod:l,recoveryPassword:m,recoveryAccessToken:n})}}};a.s(["u",()=>e])},78566,a=>{"use strict";var b=a.i(187924),c=a.i(775716);let d=a=>(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 20",...a,children:[(0,b.jsx)("path",{fill:"url(#icloud-gradient)",d:"M12.34 7.315a4.26 4.26 0 0 0-3.707 2.18 2.336 2.336 0 0 0-1.02-.236 2.336 2.336 0 0 0-2.3 1.963 3.217 3.217 0 0 0 1.244 6.181c.135-.001.27-.01.404-.029h8.943c.047.004.094.006.141.007.045-.001.09-.004.135-.007h.214v-.016a2.99 2.99 0 0 0 1.887-.988c.487-.55.757-1.261.757-1.998v-.006a3.017 3.017 0 0 0-.69-1.915 2.992 2.992 0 0 0-1.748-1.034 4.26 4.26 0 0 0-4.26-4.102Z"}),(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"icloud-gradient",x1:19.086,x2:3.333,y1:14.38,y2:14.163,gradientUnits:"userSpaceOnUse",children:[(0,b.jsx)("stop",{stopColor:"#3E82F4"}),(0,b.jsx)("stop",{offset:1,stopColor:"#93DCF7"})]})})]}),e=({style:a,...c})=>(0,b.jsxs)("svg",{width:"16",height:"14",style:a,viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...c,children:[(0,b.jsxs)("g",{clipPath:"url(#clip0_2115_829)",children:[(0,b.jsx)("path",{d:"M2.34709 12.9404L2.3471 12.9404L2.34565 12.938L1.64031 11.7448L1.64004 11.7444L0.651257 10.0677C0.640723 10.0496 0.630746 10.0314 0.621325 10.0129H4.16461L2.39424 13.0139C2.3775 12.9901 2.36178 12.9656 2.34709 12.9404Z",fill:"#0066DA",stroke:"#6366F1"}),(0,b.jsx)("path",{d:"M8 4.48713L5.47995 0.215332C5.23253 0.358922 5.02176 0.556358 4.87514 0.80764L0.219931 8.70508C0.076007 8.95094 0.000191627 9.22937 0 9.51277H5.04009L8 4.48713Z",fill:"#00AC47"}),(0,b.jsx)("path",{d:"M13.48 13.7847C13.7274 13.6411 13.9382 13.4437 14.0848 13.1924L14.3781 12.6988L15.7801 10.3206C15.9267 10.0693 16.0001 9.79114 16.0001 9.51294H10.9596L12.0321 11.577L13.48 13.7847Z",fill:"#EA4335"}),(0,b.jsx)("path",{d:"M8.00003 4.48718L10.5201 0.215385C10.2726 0.0717949 9.98857 0 9.69533 0H6.30472C6.01148 0 5.7274 0.0807692 5.47998 0.215385L8.00003 4.48718Z",fill:"#00832D"}),(0,b.jsx)("path",{d:"M10.9599 9.51294H5.04007L2.52002 13.7847C2.76744 13.9283 3.05152 14.0001 3.34476 14.0001H12.6552C12.9484 14.0001 13.2325 13.9194 13.4799 13.7847L10.9599 9.51294Z",fill:"#2684FC"}),(0,b.jsx)("path",{d:"M13.4525 4.75636L11.1249 0.80764C10.9782 0.556358 10.7675 0.358922 10.52 0.215332L8 4.48713L10.9599 9.51277H15.9908C15.9908 9.23456 15.9175 8.95636 15.7709 8.70508L13.4525 4.75636Z",fill:"#FFBA00"})]}),(0,b.jsx)("defs",{children:(0,b.jsx)("clipPath",{id:"clip0_2115_829",children:(0,b.jsx)("rect",{width:"16",height:"14",fill:"white"})})})]}),f=c.styled.div.withConfig({displayName:"RecoveryContainer",componentId:"sc-12b46968-0"})(["display:flex;flex-direction:column;gap:12px;padding-top:24px;padding-bottom:24px;"]),g=c.styled.div.withConfig({displayName:"RecoveryExplainerContainer",componentId:"sc-12b46968-1"})(["padding-bottom:24px;"]);a.s(["A",()=>d,"G",()=>e,"R",()=>f,"a",()=>g])},621924,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(919544),e=a.i(769745),f=a.i(602420),g=a.i(267954),h=a.i(803760),i=a.i(360228),j=a.i(248191),k=a.i(425041),l=a.i(421663),m=a.i(610113),n=a.i(666152),o=a.i(78566);async function p({url:a,popup:b,provider:c}){return b.location=a,new Promise((a,c)=>{function d(){b?.close(),window.removeEventListener("message",e)}function e(b){b.data&&("PRIVY_OAUTH_RESPONSE"===b.data.type&&b.data.stateCode&&b.data.authorizationCode&&(a(b.data),d()),"https://cdn.apple-cloudkit.com"===b.origin&&b.data.ckSession&&(a({type:"PRIVY_OAUTH_RESPONSE",ckWebAuthToken:b.data.ckSession}),d()),"PRIVY_OAUTH_ERROR"===b.data.type&&(c(b.data.error),d()))}window.addEventListener("message",e)})}async function q({api:a,provider:b,stateCode:c,codeVerifier:d,authorizationCode:e}){if(!e||!c)throw new i.a("[OAuth AuthFlow] Authorization and state codes code must be set prior to calling authenicate.");if("undefined"===e)throw new i.a("User denied confirmation during OAuth flow");try{return(await a.post(k.a8,{authorization_code:e,state_code:c,code_verifier:d,provider:b})).access_token}catch(b){let a=(0,i.f)(b);if(a.privyErrorCode)throw new i.a(a.message||"Invalid code during OAuth flow.",void 0,a.privyErrorCode);if("User denied confirmation during OAuth flow"===a.message)throw new i.a("Invalid code during oauth flow.",void 0,i.b.OAUTH_USER_DENIED);throw new i.a("Invalid code during OAuth flow.",void 0,i.b.UNKNOWN_AUTH_ERROR)}}async function r({api:a,provider:b}){let c=(0,h.v)(),d=(0,h.w)(),e=await (0,h.x)(c);try{return"icloud"===b?{url:(await a.post(k.a9,{client_type:"web"})).url}:{url:(await a.post(k.aa,{redirect_to:window.location.href,code_challenge:e,state_code:d})).url,codeVerifier:c,stateCode:d,provider:b}}catch(a){throw(0,i.f)(a)}}a.i(906301),a.i(562724),a.i(366962),a.i(505434),a.i(781034);let s={"google-drive":{name:"Google Drive",component:o.G},icloud:{name:"iCloud",component:o.A}},t={component:()=>{let{logout:a}=(0,j.u)(),{navigate:k,setModalData:t,data:u}=(0,j.a)(),{closePrivyModal:v,createAnalyticsEvent:w}=(0,i.u)(),{execute:x}=(()=>{let{client:a,walletProxy:b,refreshSessionAndUser:c}=(0,i.u)(),{data:d}=(0,j.a)(),{user:e}=(0,j.u)(),f=(0,m.a)(),{create:g}=(0,n.u)();return{execute:async({provider:h,action:k,popup:m,shouldCreateEth:n,shouldCreateSol:o})=>{let s,t;if(!a)throw new i.a("Missing client");function u(b){if(!b&&a)throw a.createAnalyticsEvent({eventName:"recovery_oauth_error",payload:{error:"Unable to open recovery OAuth popup",provider:h}}),new i.a("Recovery OAuth failed")}switch(h){case"google-drive":{let b,c,{url:d,codeVerifier:e,stateCode:f}=await r({api:a.api,provider:h});u(d);try{let e=await p({url:d,popup:m,provider:h});if(b=e.stateCode,c=e.authorizationCode,b!==f)throw a.createAnalyticsEvent({eventName:"possible_phishing_attempt",payload:{provider:h,storedStateCode:f??"",returnedStateCode:b??""}}),new i.a("Unexpected auth flow. This may be a phishing attempt.",void 0,i.b.OAUTH_UNEXPECTED)}catch(b){throw a.createAnalyticsEvent({eventName:"recovery_oauth_error",payload:{error:b.toString(),provider:h}}),new i.a("Recovery OAuth failed")}[s,t]=await Promise.all([a.getAccessToken(),q({api:a.api,provider:h,codeVerifier:e,stateCode:b,authorizationCode:c})]);break}case"icloud":{let{url:b}=await r({api:a.api,provider:h});u(b);let{ckWebAuthToken:c}=await p({url:b,popup:m,provider:h});t=c,s=await a.getAccessToken()}}if(!b)throw new i.a("Cannot connect to wallet proxy");if(!s)throw new i.a("Unable to authorize user");switch(k){case"recover":{let c=d?.recoverWallet?.entropyId,e=d?.recoverWallet?.entropyIdVerifier;if(!c||!e)throw new i.a("Recovery OAuth failed");a.createAnalyticsEvent({eventName:"embedded_wallet_recovery_started",payload:{walletAddress:c,recoveryMethod:h}}),await b.recover({accessToken:s,entropyId:c,entropyIdVerifier:e,recoveryAccessToken:t}),a.createAnalyticsEvent({eventName:"embedded_wallet_recovery_completed",payload:{walletAddress:c,recoveryMethod:h}});break}case"create-wallet":{let b;if(a.createAnalyticsEvent({eventName:"embedded_wallet_creation_started"}),n&&o)b=await g({recoveryMethod:h,recoveryAccessToken:t,chainType:"ethereum",walletIndex:0,latestUser:e}),b=await g({chainType:"solana",walletIndex:0,latestUser:b.user});else if(o)b=await g({recoveryMethod:h,recoveryAccessToken:t,chainType:"solana",walletIndex:0,latestUser:e});else{if(!n)throw Error("Invalid args to create wallet");b=await g({recoveryMethod:h,recoveryAccessToken:t,chainType:"ethereum",walletIndex:0,latestUser:e})}if(!b)throw f("createWallet","onError",i.b.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to create wallet");a.createAnalyticsEvent({eventName:"embedded_wallet_creation_completed",payload:{walletAddress:b.account.address}}),f("createWallet","onSuccess",{wallet:b.account});break}case"set-recovery":{let d=(0,j.g)(e);if(!d)throw f("setWalletRecovery","onError",i.b.EMBEDDED_WALLET_NOT_FOUND),Error("Embedded wallet not found");a.createAnalyticsEvent({eventName:"embedded_wallet_set_recovery_started",payload:{walletAddress:d.address,existingRecoveryMethod:d.recoveryMethod,targetRecoveryMethod:h}});let{entropyId:g,entropyIdVerifier:k}=(0,l.g)(e);await b.setRecovery({accessToken:s,entropyId:g,entropyIdVerifier:k,recoveryMethod:h,recoveryAccessToken:t});let m=(0,j.g)(await c());if(!m)throw f("createWallet","onError",i.b.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to set recovery on wallet");a.createAnalyticsEvent({eventName:"embedded_wallet_set_recovery_completed",payload:{walletAddress:d.address,existingRecoveryMethod:d.recoveryMethod,targetRecoveryMethod:h}}),f("setWalletRecovery","onSuccess",{method:h,wallet:m});break}default:throw new i.a("Unsupported recovery action")}}}})(),[y,z]=(0,c.useState)(!1),{provider:A,action:B,isInAccountCreateFlow:C,shouldCreateEth:D,shouldCreateSol:E}=u?.recoveryOAuthStatus,[F,G]=(0,c.useState)(void 0),[H,I]=(0,c.useState)("create-wallet"===B);if("user-passcode"===A)throw Error("RecoveryOAuthScreen should never be called with a wallet that specifies recoveryMethod: `user-passcode`");let J=s[A].name,K=s[A].component,L=u?.recoverWallet?.onCompleteNavigateTo,M=new h.R(async(a="create-wallet")=>(I(!0),new Promise((b,c)=>{setTimeout(async()=>{try{let c=window.open();await x({provider:A,action:a,popup:c,shouldCreateEth:D,shouldCreateSol:E}),z(!0),b()}catch(b){G({message:`${"recover"===a?"Recovery":"Back up"} with ${J} unsuccessful`,detail:"recover"===B?`Please verify that you are selecting the ${J} account associated with your backup.`:"",retryable:!0}),c()}},0)})));(0,c.useEffect)(()=>{"recover"!==B&&M.execute(C?"create-wallet":"set-recovery")},[]),(0,c.useEffect)(()=>{if(!y)return;let b=setTimeout(()=>{C?(t({createWallet:{onSuccess:()=>{},onFailure:b=>{w({eventName:"embedded_wallet_creation_failure_logout",payload:{error:b,screen:"RecoveryOAuthScreen"}}),a()},callAuthOnSuccessOnClose:!0,shouldCreateEth:!1,shouldCreateSol:!1}}),k("EmbeddedWalletCreatedScreen")):v({shouldCallAuthOnSuccess:!1})},g.q);return()=>clearTimeout(b)},[y]);let N=(0,c.useCallback)(async()=>{await M.execute("recover"),L?k(L):z(!0)},[]),O="google-drive"===A?"Google Drive":"Apple iCloud",P=y&&`Successfully ${"recover"===B?"recovered":"backed up"} with ${O}.`||F&&F.message||`${"recover"===B?"Recovering":"Backing up"} with ${O}...`,Q=F?F.detail:"";return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.M,{}),H?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(o.R,{children:[(0,b.jsx)(f.C,{title:P,icon:(0,b.jsx)(K,{style:{width:"38px",height:"38px"}}),description:Q}),F&&F?.retryable?(0,b.jsx)(d.P,{onClick:()=>{(0,h.o)(),G(void 0),"create-wallet"===B?M.execute("create-wallet"):N()},disabled:!y&&!F?.retryable,children:"Try again"}):null]})}):(0,b.jsxs)(o.R,{children:[(0,b.jsx)(f.C,{title:"Confirm it's really you",icon:(0,b.jsx)(K,{style:{height:42,width:48}}),description:`To confirm your identity, please log in to ${O} where your account is backed up.`}),(0,b.jsxs)(d.P,{onClick:N,children:["Confirm with ",O]})]}),(0,b.jsx)(e.B,{})]})}};a.s(["RecoveryOAuthScreen",()=>t,"default",()=>t])}];

//# sourceMappingURL=node_modules_%40privy-io_react-auth_dist_esm_9084db62._.js.map