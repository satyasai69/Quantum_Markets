module.exports=[57733,a=>{"use strict";var b,c=a.i(187924),d=a.i(572131),e=(0,d.forwardRef)(({as:a="div",...b},d)=>(0,c.jsx)(a,{...b,ref:d})),f="cf-turnstile-script",g="onloadTurnstileCallback",h={normal:{width:300,height:65},compact:{width:150,height:140},invisible:{width:0,height:0,overflow:"hidden"},flexible:{minWidth:300,width:"100%",height:65},interactionOnly:{width:"fit-content",height:"auto",display:"flex"}},i="unloaded",j=new Promise((a,c)=>{b={resolve:a,reject:c},"ready"===i&&a(void 0)}),k=(0,d.forwardRef)((a,k)=>{let{scriptOptions:l,options:m={},siteKey:n,onWidgetLoad:o,onSuccess:p,onExpire:q,onError:r,onBeforeInteractive:s,onAfterInteractive:t,onUnsupported:u,onTimeout:v,onLoadScript:w,id:x,style:y,as:z="div",injectScript:A=!0,rerenderOnCallbackChange:B=!1,...C}=a,D=m.size,E=(0,d.useCallback)(()=>typeof D>"u"?{}:"execute"===m.execution?h.invisible:"interaction-only"===m.appearance?h.interactionOnly:h[D],[m.execution,D,m.appearance]),[F,G]=(0,d.useState)(E()),H=(0,d.useRef)(null),[I,J]=(0,d.useState)(!1),K=(0,d.useRef)(),L=(0,d.useRef)(!1),M=x||"cf-turnstile",N=(0,d.useRef)({onSuccess:p,onError:r,onExpire:q,onBeforeInteractive:s,onAfterInteractive:t,onUnsupported:u,onTimeout:v});(0,d.useEffect)(()=>{B||(N.current={onSuccess:p,onError:r,onExpire:q,onBeforeInteractive:s,onAfterInteractive:t,onUnsupported:u,onTimeout:v})});let O=l?.id||f,P=function(a=f){let[b,c]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let b=()=>{document.getElementById(a)&&c(!0)},d=new MutationObserver(b);return d.observe(document,{childList:!0,subtree:!0}),b(),()=>{d.disconnect()}},[a]),b}(O),Q=l?.onLoadCallbackName||g,R=m.appearance||"always",S=(0,d.useMemo)(()=>({sitekey:n,action:m.action,cData:m.cData,theme:m.theme||"auto",language:m.language||"auto",tabindex:m.tabIndex,"response-field":m.responseField,"response-field-name":m.responseFieldName,size:function(a){if("invisible"!==a&&"interactionOnly"!==a)return a}(D),retry:m.retry||"auto","retry-interval":m.retryInterval||8e3,"refresh-expired":m.refreshExpired||"auto","refresh-timeout":m.refreshTimeout||"auto",execution:m.execution||"render",appearance:m.appearance||"always","feedback-enabled":m.feedbackEnabled||!0,callback:a=>{L.current=!0,B?p?.(a):N.current.onSuccess?.(a)},"error-callback":B?r:(...a)=>N.current.onError?.(...a),"expired-callback":B?q:(...a)=>N.current.onExpire?.(...a),"before-interactive-callback":B?s:(...a)=>N.current.onBeforeInteractive?.(...a),"after-interactive-callback":B?t:(...a)=>N.current.onAfterInteractive?.(...a),"unsupported-callback":B?u:(...a)=>N.current.onUnsupported?.(...a),"timeout-callback":B?v:(...a)=>N.current.onTimeout?.(...a)}),[m.action,m.appearance,m.cData,m.execution,m.language,m.refreshExpired,m.responseField,m.responseFieldName,m.retry,m.retryInterval,m.tabIndex,m.theme,m.feedbackEnabled,m.refreshTimeout,n,D,B,B?p:null,B?r:null,B?q:null,B?s:null,B?t:null,B?u:null,B?v:null]),T=(0,d.useCallback)(()=>!1,[]);return(0,d.useEffect)(function(){A&&!I&&(({render:a="explicit",onLoadCallbackName:b=g,scriptOptions:{nonce:c="",defer:d=!0,async:e=!0,id:h="",appendTo:i,onError:j,crossOrigin:k=""}={}})=>{let l=h||f;if(document.getElementById(l))return;let m=document.createElement("script");m.id=l,m.src=`https://challenges.cloudflare.com/turnstile/v0/api.js?onload=${b}&render=${a}`,document.querySelector(`script[src="${m.src}"]`)||(m.defer=!!d,m.async=!!e,c&&(m.nonce=c),k&&(m.crossOrigin=k),j&&(m.onerror=j,delete window[b]),("body"===i?document.body:document.getElementsByTagName("head")[0]).appendChild(m))})({onLoadCallbackName:Q,scriptOptions:{...l,id:O}})},[A,I,l,O]),(0,d.useEffect)(function(){"ready"!==i&&((a=g)=>("unloaded"===i&&(i="loading",window[a]=()=>{b.resolve(),i="ready",delete window[a]}),j))(Q).then(()=>J(!0)).catch(console.error)},[]),(0,d.useEffect)(function(){if(!H.current||!I)return;let a=!1;return(async()=>{a||!H.current||(K.current=window.turnstile.render(H.current,S),K.current&&o?.(K.current))})(),()=>{a=!0,K.current&&(window.turnstile.remove(K.current),L.current=!1)}},[M,I,S]),(0,d.useImperativeHandle)(k,()=>{let{turnstile:a}=window;return{getResponse:()=>a?.getResponse&&K.current&&T()?a.getResponse(K.current):void console.warn("Turnstile has not been loaded"),getResponsePromise:async(a=3e4,b=100)=>new Promise((c,d)=>{let e,f=async()=>{if(L.current&&window.turnstile&&K.current)try{let a=window.turnstile.getResponse(K.current);return e&&clearTimeout(e),a?c(a):d(Error("No response received"))}catch(a){return e&&clearTimeout(e),console.warn("Failed to get response",a),d(Error("Failed to get response"))}e||(e=setTimeout(()=>{e&&clearTimeout(e),d(Error("Timeout"))},a)),await new Promise(a=>setTimeout(a,b)),await f()};f()}),reset(){if(!a?.reset||!K.current||!T())return void console.warn("Turnstile has not been loaded");"execute"===m.execution&&G(h.invisible);try{L.current=!1,a.reset(K.current)}catch(a){console.warn(`Failed to reset Turnstile widget ${K}`,a)}},remove(){a?.remove&&K.current&&T()?(G(h.invisible),L.current=!1,a.remove(K.current),K.current=null):console.warn("Turnstile has not been loaded")},render(){if(!a?.render||!H.current||!T()||K.current)return void console.warn("Turnstile has not been loaded or container not found");let b=a.render(H.current,S);return K.current=b,K.current&&o?.(K.current),"execute"!==m.execution&&G(D?h[D]:{}),b},execute(){"execute"!==m.execution?console.warn('Execution mode is not set to "execute"'):a?.execute&&H.current&&K.current&&T()?(a.execute(H.current,S),G(D?h[D]:{})):console.warn("Turnstile has not been loaded or container not found")},isExpired:()=>a?.isExpired&&K.current&&T()?a.isExpired(K.current):(console.warn("Turnstile has not been loaded"),!1)}},[K,m.execution,D,S,H,T,I,o]),(0,d.useEffect)(()=>{P&&!I&&window.turnstile&&J(!0)},[I,P]),(0,d.useEffect)(()=>{G(E())},[m.execution,D,R]),(0,d.useEffect)(()=>{P&&"function"==typeof w&&w()},[P]),(0,c.jsx)(e,{ref:H,as:z,id:M,style:{...F,...y},...C})});k.displayName="Turnstile";let l=({delayedExecution:a,captchaContext:b,...d})=>{let{appId:e,setError:f,setToken:g,setExecuting:h,siteKey:i,ref:j}=b;return(0,c.jsx)(k,{...d,ref:j,siteKey:i??"",options:{action:e,size:"invisible",...a?{appearance:"execute",execution:"execute"}:{appearance:"always",execution:"render"}},onUnsupported:()=>{d.onUnsupported?.(),console.warn("Browser does not support Turnstile.")},onError:a=>{d.onError?.(a),f("Captcha failed"),h(!1)},onSuccess:a=>{d.onSuccess?.(a),g(a),h(!1)},onExpire:a=>{d.onExpire?.(a);try{j.current?.reset(),f(void 0),g(void 0)}catch(a){f("expired_and_failed_reset")}}})};a.s(["TurnstileWrapper",()=>l,"default",()=>l],57733)}];

//# sourceMappingURL=d4b1c_modules_%40privy-io_react-auth_dist_esm_TurnstileWrapper-Co-t5mTh_mjs_8a460914._.js.map