module.exports=[770548,a=>{"use strict";var b=a.i(185228);class c extends b.BaseError{constructor({docsPath:a}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client.",{docsPath:a,docsSlug:"account",name:"AccountNotFoundError"})}}class d extends b.BaseError{constructor({docsPath:a,metaMessages:b,type:c}){super(`Account type "${c}" is not supported.`,{docsPath:a,metaMessages:b,name:"AccountTypeNotSupportedError"})}}a.s(["AccountNotFoundError",()=>c,"AccountTypeNotSupportedError",()=>d])},567218,88963,a=>{"use strict";var b=a.i(134510),c=a.i(770548),d=a.i(185228),e=a.i(420419),f=a.i(407907);function g({chain:a,currentChainId:b}){if(!a)throw new f.ChainNotFoundError;if(b!==a.id)throw new f.ChainMismatchError({chain:a,currentChainId:b})}a.s(["assertCurrentChain",()=>g],88963);var h=a.i(197693),i=a.i(216200),j=a.i(637998),k=a.i(709987),l=a.i(954170),m=a.i(745914),n=a.i(600528),o=a.i(366451),p=a.i(158413);let q=new l.LruMap(128);async function r(a,f){let{account:l=a.account,chain:r=a.chain,accessList:s,authorizationList:t,blobs:u,data:v,gas:w,gasPrice:x,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,type:C,value:D,...E}=f;if(void 0===l)throw new c.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransaction"});let F=l?(0,b.parseAccount)(l):null;try{(0,m.assertRequest)(f);let b=await (async()=>f.to?f.to:null!==f.to&&t&&t.length>0?await (0,e.recoverAuthorizationAddress)({authorization:t[0]}).catch(()=>{throw new d.BaseError("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(F?.type==="json-rpc"||null===F){let c;null!==r&&(c=await (0,k.getAction)(a,n.getChainId,"getChainId")({}),g({currentChainId:c,chain:r}));let d=a.chain?.formatters?.transactionRequest?.format,e=(d||j.formatTransactionRequest)({...(0,i.extract)(E,{format:d}),accessList:s,account:F,authorizationList:t,blobs:u,chainId:c,data:v,gas:w,gasPrice:x,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,to:b,type:C,value:D},"sendTransaction"),f=q.get(a.uid);try{return await a.request({method:f?"wallet_sendTransaction":"eth_sendTransaction",params:[e]},{retryCount:0})}catch(b){if(!1===f)throw b;if("InvalidInputRpcError"===b.name||"InvalidParamsRpcError"===b.name||"MethodNotFoundRpcError"===b.name||"MethodNotSupportedRpcError"===b.name)return await a.request({method:"wallet_sendTransaction",params:[e]},{retryCount:0}).then(b=>(q.set(a.uid,!0),b)).catch(c=>{if("MethodNotFoundRpcError"===c.name||"MethodNotSupportedRpcError"===c.name)throw q.set(a.uid,!1),b;throw c});throw b}}if(F?.type==="local"){let c=await (0,k.getAction)(a,o.prepareTransactionRequest,"prepareTransactionRequest")({account:F,accessList:s,authorizationList:t,blobs:u,chain:r,data:v,gas:w,gasPrice:x,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,nonceManager:F.nonceManager,parameters:[...o.defaultParameters,"sidecars"],type:C,value:D,...E,to:b}),d=r?.serializers?.transaction,e=await F.signTransaction(c,{serializer:d});return await (0,k.getAction)(a,p.sendRawTransaction,"sendRawTransaction")({serializedTransaction:e})}if(F?.type==="smart")throw new c.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new c.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransaction",type:F?.type})}catch(a){if(a instanceof c.AccountTypeNotSupportedError)throw a;throw(0,h.getTransactionError)(a,{...f,account:F,chain:f.chain||void 0})}}a.s(["sendTransaction",()=>r],567218)},130573,486007,a=>{"use strict";var b=a.i(323360),c=a.i(946294),d=a.i(796936),e=a.i(111755),f=a.i(134510),g=a.i(185228),h=a.i(282271),i=a.i(59854),j=a.i(429664),k=a.i(221570),l=a.i(197693),m=a.i(567218);let n="0x5792579257925792579257925792579257925792579257925792579257925792",o=(0,k.numberToHex)(0,{size:32});async function p(a,b){let{account:c=a.account,capabilities:e,chain:p=a.chain,experimental_fallback:q,experimental_fallbackDelay:r=32,forceAtomic:s=!1,id:t,version:u="2.0.0"}=b,v=c?(0,f.parseAccount)(c):null,w=b.calls.map(a=>{let b=a.abi?(0,i.encodeFunctionData)({abi:a.abi,functionName:a.functionName,args:a.args}):a.data;return{data:a.dataSuffix&&b?(0,j.concat)([b,a.dataSuffix]):b,to:a.to,value:a.value?(0,k.numberToHex)(a.value):void 0}});try{let b=await a.request({method:"wallet_sendCalls",params:[{atomicRequired:s,calls:w,capabilities:e,chainId:(0,k.numberToHex)(p.id),from:v?.address,id:t,version:u}]},{retryCount:0});if("string"==typeof b)return{id:b};return b}catch(c){if(q&&("MethodNotFoundRpcError"===c.name||"MethodNotSupportedRpcError"===c.name||"UnknownRpcError"===c.name||c.details.toLowerCase().includes("does not exist / is not available")||c.details.toLowerCase().includes("missing or invalid. request()")||c.details.toLowerCase().includes("did not match any variant of untagged enum")||c.details.toLowerCase().includes("account upgraded to unsupported contract")||c.details.toLowerCase().includes("eip-7702 not supported")||c.details.toLowerCase().includes("unsupported wc_ method")||c.details.toLowerCase().includes("feature toggled misconfigured")||c.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(e&&Object.values(e).some(a=>!a.optional)){let a="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new h.UnsupportedNonOptionalCapabilityError(new g.BaseError(a,{details:a}))}if(s&&w.length>1){let a="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new h.AtomicityNotSupportedError(new g.BaseError(a,{details:a}))}let b=[];for(let c of w){let e=(0,m.sendTransaction)(a,{account:v,chain:p,data:c.data,to:c.to,value:c.value?(0,d.hexToBigInt)(c.value):void 0});b.push(e),r>0&&await new Promise(a=>setTimeout(a,r))}let c=await Promise.allSettled(b);if(c.every(a=>"rejected"===a.status))throw c[0].reason;let f=c.map(a=>"fulfilled"===a.status?a.value:o);return{id:(0,j.concat)([...f,(0,k.numberToHex)(p.id,{size:32}),n])}}throw(0,l.getTransactionError)(c,{...b,account:v,chain:b.chain})}}async function q(a,f){let g;async function h(e){if(e.endsWith(n.slice(2))){let f=(0,c.trim)((0,b.sliceHex)(e,-64,-32)),g=(0,b.sliceHex)(e,0,-64).slice(2).match(/.{1,64}/g),h=await Promise.all(g.map(b=>o.slice(2)!==b?a.request({method:"eth_getTransactionReceipt",params:[`0x${b}`]},{dedupe:!0}):void 0)),i=h.some(a=>null===a)?100:h.every(a=>a?.status==="0x1")?200:h.every(a=>a?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,d.hexToNumber)(f),receipts:h.filter(Boolean),status:i,version:"2.0.0"}}return a.request({method:"wallet_getCallsStatus",params:[e]})}let{atomic:i=!1,chainId:j,receipts:k,version:l="2.0.0",...m}=await h(f.id),[p,q]=(g=m.status)>=100&&g<200?["pending",g]:g>=200&&g<300?["success",g]:g>=300&&g<700?["failure",g]:"CONFIRMED"===g?["success",200]:"PENDING"===g?["pending",100]:[void 0,g];return{...m,atomic:i,chainId:j?(0,d.hexToNumber)(j):void 0,receipts:k?.map(a=>({...a,blockNumber:(0,d.hexToBigInt)(a.blockNumber),gasUsed:(0,d.hexToBigInt)(a.gasUsed),status:e.receiptStatuses[a.status]}))??[],statusCode:q,status:p,version:l}}a.s(["fallbackMagicIdentifier",0,n,"fallbackTransactionErrorMagicIdentifier",0,o,"sendCalls",()=>p],486007),a.s(["getCallsStatus",()=>q],130573)},742031,a=>{"use strict";var b=a.i(134510),c=a.i(770548),d=a.i(161848),e=a.i(709987),f=a.i(600528),g=a.i(473579);async function h(a,h){let{account:i=a.account,chainId:j,nonce:k}=h;if(!i)throw new c.AccountNotFoundError({docsPath:"/docs/eip7702/prepareAuthorization"});let l=(0,b.parseAccount)(i),m=(()=>{if(h.executor)return"self"===h.executor?h.executor:(0,b.parseAccount)(h.executor)})(),n={address:h.contractAddress??h.address,chainId:j,nonce:k};return void 0===n.chainId&&(n.chainId=a.chain?.id??await (0,e.getAction)(a,f.getChainId,"getChainId")({})),void 0===n.nonce&&(n.nonce=await (0,e.getAction)(a,g.getTransactionCount,"getTransactionCount")({address:l.address,blockTag:"pending"}),("self"===m||m?.address&&(0,d.isAddressEqual)(m.address,l.address))&&(n.nonce+=1)),n}a.s(["prepareAuthorization",()=>h])},99783,a=>{"use strict";var b=a.i(185228);class c extends b.BaseError{constructor(a){super(`Call bundle failed with status: ${a.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=a}}a.s(["BundleFailedError",()=>c])},526629,a=>{"use strict";var b=a.i(185228),c=a.i(99783),d=a.i(709987),e=a.i(375037),f=a.i(297472),g=a.i(246564),h=a.i(548855),i=a.i(130557),j=a.i(130573);async function k(a,b){let k,{id:m,pollingInterval:n=a.pollingInterval,status:o=({statusCode:a})=>200===a||a>=300,retryCount:p=4,retryDelay:q=({count:a})=>200*~~(1<<a),timeout:r=6e4,throwOnFailure:s=!1}=b,t=(0,i.stringify)(["waitForCallsStatus",a.uid,m]),{promise:u,resolve:v,reject:w}=(0,g.withResolvers)(),x=(0,e.observe)(t,{resolve:v,reject:w},b=>{let e=(0,f.poll)(async()=>{let f=a=>{clearTimeout(k),e(),a(),x()};try{let e=await (0,h.withRetry)(async()=>{let b=await (0,d.getAction)(a,j.getCallsStatus,"getCallsStatus")({id:m});if(s&&"failure"===b.status)throw new c.BundleFailedError(b);return b},{retryCount:p,delay:q});if(!o(e))return;f(()=>b.resolve(e))}catch(a){f(()=>b.reject(a))}},{interval:n,emitOnBegin:!0});return e});return k=r?setTimeout(()=>{x(),clearTimeout(k),w(new l({id:m}))},r):void 0,await u}class l extends b.BaseError{constructor({id:a}){super(`Timed out while waiting for call bundle with id "${a}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}a.s(["WaitForCallsStatusTimeoutError",()=>l,"waitForCallsStatus",()=>k])},628952,a=>{"use strict";var b=a.i(792288),c=a.i(221570);function d(a){let{r:d,s:e}=b.secp256k1.Signature.fromCompact(a.slice(2,130)),f=Number(`0x${a.slice(130)}`),[g,h]=(()=>{if(0===f||1===f)return[void 0,f];if(27===f)return[BigInt(f),0];if(28===f)return[BigInt(f),1];throw Error("Invalid yParityOrV value")})();return void 0!==g?{r:(0,c.numberToHex)(d,{size:32}),s:(0,c.numberToHex)(e,{size:32}),v:g,yParity:h}:{r:(0,c.numberToHex)(d,{size:32}),s:(0,c.numberToHex)(e,{size:32}),yParity:h}}a.s(["parseSignature",()=>d])},927549,a=>{"use strict";function b(a){return{formatters:void 0,fees:void 0,serializers:void 0,...a}}a.s(["defineChain",()=>b])},369765,a=>{"use strict";a.s(["erc6492MagicBytes",0,"0x6492649264926492649264926492649264926492649264926492649264926492","zeroHash",0,"0x0000000000000000000000000000000000000000000000000000000000000000"])},421844,a=>{"use strict";a.s(["serializeAuthorizationList",()=>d]);var b=a.i(221570),c=a.i(372092);function d(a){if(!a||0===a.length)return[];let d=[];for(let e of a){let{chainId:a,nonce:f,...g}=e,h=e.address;d.push([a?(0,b.toHex)(a):"0x",h,f?(0,b.toHex)(f):"0x",...(0,c.toYParitySignatureArray)({},g)])}return d}},627044,a=>{"use strict";var b=a.i(442748),c=a.i(283678),d=a.i(476705),e=a.i(185228),f=a.i(660847),g=a.i(407907),h=a.i(762940),i=a.i(540302),j=a.i(466323),k=a.i(323360),l=a.i(796936);function m(a){let{authorizationList:b}=a;if(b)for(let a of b){let{chainId:b}=a,c=a.address;if(!(0,i.isAddress)(c))throw new d.InvalidAddressError({address:c});if(b<0)throw new g.InvalidChainIdError({chainId:b})}o(a)}function n(a){let{blobVersionedHashes:c}=a;if(c){if(0===c.length)throw new f.EmptyBlobError;for(let a of c){let c=(0,j.size)(a),d=(0,l.hexToNumber)((0,k.slice)(a,0,1));if(32!==c)throw new f.InvalidVersionedHashSizeError({hash:a,size:c});if(d!==b.versionedHashVersionKzg)throw new f.InvalidVersionedHashVersionError({hash:a,version:d})}}o(a)}function o(a){let{chainId:b,maxPriorityFeePerGas:e,maxFeePerGas:f,to:j}=a;if(b<=0)throw new g.InvalidChainIdError({chainId:b});if(j&&!(0,i.isAddress)(j))throw new d.InvalidAddressError({address:j});if(f&&f>c.maxUint256)throw new h.FeeCapTooHighError({maxFeePerGas:f});if(e&&f&&e>f)throw new h.TipAboveFeeCapError({maxFeePerGas:f,maxPriorityFeePerGas:e})}function p(a){let{chainId:b,maxPriorityFeePerGas:f,gasPrice:j,maxFeePerGas:k,to:l}=a;if(b<=0)throw new g.InvalidChainIdError({chainId:b});if(l&&!(0,i.isAddress)(l))throw new d.InvalidAddressError({address:l});if(f||k)throw new e.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(j&&j>c.maxUint256)throw new h.FeeCapTooHighError({maxFeePerGas:j})}function q(a){let{chainId:b,maxPriorityFeePerGas:f,gasPrice:j,maxFeePerGas:k,to:l}=a;if(l&&!(0,i.isAddress)(l))throw new d.InvalidAddressError({address:l});if(void 0!==b&&b<=0)throw new g.InvalidChainIdError({chainId:b});if(f||k)throw new e.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(j&&j>c.maxUint256)throw new h.FeeCapTooHighError({maxFeePerGas:j})}a.s(["assertTransactionEIP1559",()=>o,"assertTransactionEIP2930",()=>p,"assertTransactionEIP4844",()=>n,"assertTransactionEIP7702",()=>m,"assertTransactionLegacy",()=>q])},372092,177057,a=>{"use strict";a.s(["serializeTransaction",()=>q,"toYParitySignatureArray",()=>r],372092);var b=a.i(58433),c=a.i(421844),d=a.i(901024),e=a.i(259397),f=a.i(969109),g=a.i(260494),h=a.i(429664),i=a.i(946294),j=a.i(221570),k=a.i(521045),l=a.i(627044),m=a.i(340126),n=a.i(476705),o=a.i(540302);function p(a){if(!a||0===a.length)return[];let c=[];for(let d=0;d<a.length;d++){let{address:e,storageKeys:f}=a[d];for(let a=0;a<f.length;a++)if(f[a].length-2!=64)throw new b.InvalidStorageKeySizeError({storageKey:f[a]});if(!(0,o.isAddress)(e,{strict:!1}))throw new n.InvalidAddressError({address:e});c.push([e,f])}return c}function q(a,n){let o=(0,m.getTransactionType)(a);return"eip1559"===o?function(a,b){let{chainId:c,gas:d,nonce:e,to:f,value:g,maxFeePerGas:i,maxPriorityFeePerGas:m,accessList:n,data:o}=a;(0,l.assertTransactionEIP1559)(a);let q=p(n),s=[(0,j.numberToHex)(c),e?(0,j.numberToHex)(e):"0x",m?(0,j.numberToHex)(m):"0x",i?(0,j.numberToHex)(i):"0x",d?(0,j.numberToHex)(d):"0x",f??"0x",g?(0,j.numberToHex)(g):"0x",o??"0x",q,...r(a,b)];return(0,h.concatHex)(["0x02",(0,k.toRlp)(s)])}(a,n):"eip2930"===o?function(a,b){let{chainId:c,gas:d,data:e,nonce:f,to:g,value:i,accessList:m,gasPrice:n}=a;(0,l.assertTransactionEIP2930)(a);let o=p(m),q=[(0,j.numberToHex)(c),f?(0,j.numberToHex)(f):"0x",n?(0,j.numberToHex)(n):"0x",d?(0,j.numberToHex)(d):"0x",g??"0x",i?(0,j.numberToHex)(i):"0x",e??"0x",o,...r(a,b)];return(0,h.concatHex)(["0x01",(0,k.toRlp)(q)])}(a,n):"eip4844"===o?function(a,b){let{chainId:c,gas:i,nonce:m,to:n,value:o,maxFeePerBlobGas:q,maxFeePerGas:s,maxPriorityFeePerGas:t,accessList:u,data:v}=a;(0,l.assertTransactionEIP4844)(a);let w=a.blobVersionedHashes,x=a.sidecars;if(a.blobs&&(void 0===w||void 0===x)){let b="string"==typeof a.blobs[0]?a.blobs:a.blobs.map(a=>(0,j.bytesToHex)(a)),c=a.kzg,h=(0,d.blobsToCommitments)({blobs:b,kzg:c});if(void 0===w&&(w=(0,f.commitmentsToVersionedHashes)({commitments:h})),void 0===x){let a=(0,e.blobsToProofs)({blobs:b,commitments:h,kzg:c});x=(0,g.toBlobSidecars)({blobs:b,commitments:h,proofs:a})}}let y=p(u),z=[(0,j.numberToHex)(c),m?(0,j.numberToHex)(m):"0x",t?(0,j.numberToHex)(t):"0x",s?(0,j.numberToHex)(s):"0x",i?(0,j.numberToHex)(i):"0x",n??"0x",o?(0,j.numberToHex)(o):"0x",v??"0x",y,q?(0,j.numberToHex)(q):"0x",w??[],...r(a,b)],A=[],B=[],C=[];if(x)for(let a=0;a<x.length;a++){let{blob:b,commitment:c,proof:d}=x[a];A.push(b),B.push(c),C.push(d)}return(0,h.concatHex)(["0x03",x?(0,k.toRlp)([z,A,B,C]):(0,k.toRlp)(z)])}(a,n):"eip7702"===o?function(a,b){let{authorizationList:d,chainId:e,gas:f,nonce:g,to:i,value:m,maxFeePerGas:n,maxPriorityFeePerGas:o,accessList:q,data:s}=a;(0,l.assertTransactionEIP7702)(a);let t=p(q),u=(0,c.serializeAuthorizationList)(d);return(0,h.concatHex)(["0x04",(0,k.toRlp)([(0,j.numberToHex)(e),g?(0,j.numberToHex)(g):"0x",o?(0,j.numberToHex)(o):"0x",n?(0,j.numberToHex)(n):"0x",f?(0,j.numberToHex)(f):"0x",i??"0x",m?(0,j.numberToHex)(m):"0x",s??"0x",t,u,...r(a,b)])])}(a,n):function(a,c){let{chainId:d=0,gas:e,data:f,nonce:g,to:h,value:m,gasPrice:n}=a;(0,l.assertTransactionLegacy)(a);let o=[g?(0,j.numberToHex)(g):"0x",n?(0,j.numberToHex)(n):"0x",e?(0,j.numberToHex)(e):"0x",h??"0x",m?(0,j.numberToHex)(m):"0x",f??"0x"];if(c){let a=(()=>{if(c.v>=35n)return(c.v-35n)/2n>0?c.v:27n+(35n===c.v?0n:1n);if(d>0)return BigInt(2*d)+BigInt(35n+c.v-27n);let a=27n+(27n===c.v?0n:1n);if(c.v!==a)throw new b.InvalidLegacyVError({v:c.v});return a})(),e=(0,i.trim)(c.r),f=(0,i.trim)(c.s);o=[...o,(0,j.numberToHex)(a),"0x00"===e?"0x":e,"0x00"===f?"0x":f]}else d>0&&(o=[...o,(0,j.numberToHex)(d),"0x","0x"]);return(0,k.toRlp)(o)}(a,n)}function r(a,b){let c=b??a,{v:d,yParity:e}=c;if(void 0===c.r||void 0===c.s||void 0===d&&void 0===e)return[];let f=(0,i.trim)(c.r),g=(0,i.trim)(c.s);return["number"==typeof e?e?(0,j.numberToHex)(1):"0x":0n===d?"0x":1n===d?(0,j.numberToHex)(1):27n===d?"0x":(0,j.numberToHex)(1),"0x00"===f?"0x":f,"0x00"===g?"0x":g]}a.s(["serializeAccessList",()=>p],177057)}];

//# sourceMappingURL=node_modules_viem__esm_50a08694._.js.map