module.exports=[103929,971866,136349,19013,733865,154051,751092,629116,812721,85195,680810,15670,124191,776532,765857,a=>{"use strict";let b,c={path:"/api/v1/apps/:app_id/smart_wallets",method:"GET"};class d{getConfig(){return this._privyInternal.config}async getSmartWalletConfig(){return this._smartWalletConfig||(this._smartWalletConfig=await this._privyInternal.fetch(c,{params:{app_id:this.appId}})),this._smartWalletConfig}get appId(){return this._privyInternal.appId}constructor(a){this._privyInternal=a}}a.s(["default",()=>d],103929);let e={path:"/api/v1/apps/:app_id/cross-app/connections",method:"GET"};var f=a.i(500874),g=a.i(254799);let h=(a,b)=>(0,g.createHash)(a).update(b).digest();a.s(["default",0,h],971866);let i=new TextEncoder,j=new TextDecoder;function k(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;return a.forEach(a=>{b.set(a,c),c+=a.length}),b}function l(a,b){return k(i.encode(a),new Uint8Array([0]),b)}function m(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function n(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return m(c,b,0),m(c,a%0x100000000,4),c}function o(a){let b=new Uint8Array(4);return m(b,a),b}function p(a){return k(o(a.length),a)}async function q(a,b,c){let d=Math.ceil((b>>3)/32),e=new Uint8Array(32*d);for(let b=0;b<d;b++){let d=new Uint8Array(4+a.length+c.length);d.set(o(b+1)),d.set(a,4),d.set(c,4+a.length),e.set(await h("sha256",d),32*b)}return e.slice(0,b>>3)}a.s(["concat",()=>k,"concatKdf",()=>q,"decoder",0,j,"encoder",0,i,"lengthAndInput",()=>p,"p2s",()=>l,"uint32be",()=>o,"uint64be",()=>n],136349),b=f.Buffer.isEncoding("base64url")?a=>f.Buffer.from(a).toString("base64url"):a=>f.Buffer.from(a).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");let r=a=>{let b;return f.Buffer.from(((b=a)instanceof Uint8Array&&(b=j.decode(b)),b),"base64")};a.s(["decode",0,r,"encode",()=>b],19013);function s(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}a.s(["decode",0,r,"encode",0,b],733865),a.s(["default",()=>s],154051);class t extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(a){var b;super(a),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null==(b=Error.captureStackTrace)||b.call(Error,this,this.constructor)}}class u extends t{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=b,this.reason=c}}class v extends t{static get code(){return"ERR_JWT_EXPIRED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_EXPIRED",this.claim=b,this.reason=c}}class w extends t{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class x extends t{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class y extends t{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class z extends t{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class A extends t{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class B extends t{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class C extends t{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class D extends t{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class E extends t{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class F extends t{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class G extends t{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class H extends t{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class I extends t{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function J(a){let b,c;if("string"!=typeof a)throw new C("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new C("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new C("Invalid JWT");if(!d)throw new C("JWTs must contain a payload");try{b=r(d)}catch{throw new C("Failed to base64url decode the payload")}try{c=JSON.parse(j.decode(b))}catch{throw new C("Failed to parse the decoded payload as JSON")}if(!s(c))throw new C("Invalid JWT Claims Set");return c}a.s(["JOSEAlgNotAllowed",()=>w,"JOSEError",()=>t,"JOSENotSupported",()=>x,"JWEDecompressionFailed",()=>z,"JWEDecryptionFailed",()=>y,"JWEInvalid",()=>A,"JWKInvalid",()=>D,"JWKSInvalid",()=>E,"JWKSMultipleMatchingKeys",()=>G,"JWKSNoMatchingKey",()=>F,"JWKSTimeout",()=>H,"JWSInvalid",()=>B,"JWSSignatureVerificationFailed",()=>I,"JWTClaimValidationFailed",()=>u,"JWTExpired",()=>v,"JWTInvalid",()=>C],751092),a.s(["decodeJwt",()=>J],629116);class K{static parse(a){try{return new K(a)}catch(a){return null}}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(a=0){return Date.now()>=1e3*(this.expiration-a)}constructor(a){this.value=a,this._decoded=J(a)}}a.s(["Token",()=>K],812721);class L{async updateOnCrossAppAuthentication(a,b){let c=b.access_token,d=L.providerAccessTokenStorageKey(a);await this._storage.put(d,c)}async getProviderAccessToken(a){let b=L.providerAccessTokenStorageKey(a),c=await this._storage.get(b);if("string"!=typeof c)return null;try{if(new K(c).isExpired())throw Error("JWT is expired");return c}catch{return await this._storage.del(b),null}}async getCrossAppConnections(){return await this._privyInternal.fetch(e,{params:{app_id:this._privyInternal.appId}})}constructor(a,b){this._privyInternal=a,this._storage=b}}L.providerAccessTokenStorageKey=a=>`privy:cross-app:${a}`,a.s(["default",()=>L],85195);var M=a.i(582945);class N{async revoke(){await this._privyInternal.fetch(M.WalletsRevoke,{})}constructor(a){this._privyInternal=a}}a.s(["default",()=>N],680810);class O extends Error{constructor({error:a,code:b}){super(a),this.error=a,this.code=b}}class P extends Error{constructor({error:a,code:b}){super(a),this.code=b,this.error=a}}class Q extends Error{constructor({error:a,code:b,response:c}){super(a),this.code=b,this.error=a,this.response=c}}a.s(["MoonpayApiError",()=>Q,"PrivyApiError",()=>O,"PrivyClientError",()=>P],15670);let R=a=>!!a.id&&"privy-v2"===a.recovery_method;a.s(["isUnifiedWallet",()=>R],124191);class S{async sign({message:a}){return await this.request({method:"sign",params:{message:new TextDecoder("utf8").decode(a)}})}async signTransaction({psbt:a}){return await this.request({method:"signTransaction",params:{psbt:a}})}async request(a){if(R(this._account))throw new P({code:"unsupported_wallet_type",error:"Bitcoin wallet providers are only supported for on-device execution and this app uses TEE execution. Use the useSignRawHash hook from @privy-io/expo/extended-chains to sign over a hash with this wallet. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide"});if(!await this._privyInternal.getAccessTokenInternal())throw new P({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return this.handleIFrameRpc(a)}async handleIFrameRpc(a){try{let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw Error("Missing access token. User must be authenticated.");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:a.method,address:this._account.address}),(await this._proxy.rpcWallet({accessToken:b,request:a,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:this._account.chain_type})).response.data}catch(c){console.error(c);let b=c instanceof Error?c.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:a.method,address:this._account.address,error:b}),new P({code:"embedded_wallet_request_error",error:b})}}toJSON(){return`PrivyEmbeddedBitcoinProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:a,privyInternal:b,account:c,entropyId:d,entropyIdVerifier:e}){this._proxy=a,this._privyInternal=b,this._account=c,this._entropyId=d,this._entropyIdVerifier=e}}a.s(["EmbeddedBitcoinWalletProvider",()=>S],776532);var T=a.i(73158);async function U({context:a,chainType:b}){return{wallet:await (0,T.create)(a,{request:{chain_type:b,owner_id:void 0}})}}a.s(["walletCreate",()=>U],765857)},271326,a=>{"use strict";var b=a.i(155539),c=a.i(392911),d=a.i(161503);let e=(a,e,g,h)=>{let i=Number(a),j=e.find(a=>a.id===i);if(!j)throw new d.PrivyConnectorError(`Unsupported chainId ${a}`,4901);return(0,b.createPublicClient)({transport:(0,c.http)(f(j,g,h.appId)),chain:j})},f=(a,b,c)=>{let e,f=a.id,g=Number(a.id);if(a.rpcUrls.privyWalletOverride&&a.rpcUrls.privyWalletOverride.http[0])e=a.rpcUrls.privyWalletOverride.http[0];else if(b.rpcUrls&&b.rpcUrls[g])e=b.rpcUrls[g];else if(a.rpcUrls.privy?.http[0]){let b=new URL(a.rpcUrls.privy.http[0]);b.searchParams.append("privyAppId",c),e=b.toString()}else e=a.rpcUrls.public?.http[0]?a.rpcUrls.public.http[0]:a.rpcUrls.default?.http[0];if(!e)throw new d.PrivyConnectorError(`No RPC url found for ${f}`);return e};function g({currentRecoveryMethod:a,upgradeToRecoveryMethod:b}){switch(a){case"privy":case"user-passcode":case"recovery-encryption-key":return!0;case"icloud":case"google-drive":if(a===b)throw Error("Cannot upgrade to the existing cloud platform");return!0;default:throw Error("Unknown recovery method")}}a.s(["getJsonRpcEndpointFromChain",()=>f,"getPublicClient",()=>e,"throwIfInvalidRecoveryUpgradePath",()=>g])},541993,(a,b,c)=>{"use strict";var d=Object.prototype.hasOwnProperty,e="~";function f(){}function g(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function h(a,b,c,d,f){if("function"!=typeof c)throw TypeError("The listener must be a function");var h=new g(c,d||a,f),i=e?e+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function i(a,b){0==--a._eventsCount?a._events=new f:delete a._events[b]}function j(){this._events=new f,this._eventsCount=0}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(e=!1)),j.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)d.call(a,b)&&c.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},j.prototype.listeners=function(a){var b=e?e+a:a,c=this._events[b];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,g=Array(f);d<f;d++)g[d]=c[d].fn;return g},j.prototype.listenerCount=function(a){var b=e?e+a:a,c=this._events[b];return c?c.fn?1:c.length:0},j.prototype.emit=function(a,b,c,d,f,g){var h=e?e+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,f),!0;case 6:return k.fn.call(k.context,b,c,d,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},j.prototype.on=function(a,b,c){return h(this,a,b,c,!1)},j.prototype.once=function(a,b,c){return h(this,a,b,c,!0)},j.prototype.removeListener=function(a,b,c,d){var f=e?e+a:a;if(!this._events[f])return this;if(!b)return i(this,f),this;var g=this._events[f];if(g.fn)g.fn!==b||d&&!g.once||c&&g.context!==c||i(this,f);else{for(var h=0,j=[],k=g.length;h<k;h++)(g[h].fn!==b||d&&!g[h].once||c&&g[h].context!==c)&&j.push(g[h]);j.length?this._events[f]=1===j.length?j[0]:j:i(this,f)}return this},j.prototype.removeAllListeners=function(a){var b;return a?(b=e?e+a:a,this._events[b]&&i(this,b)):(this._events=new f,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=e,j.EventEmitter=j,b.exports=j},34180,(a,b,c)=>{"use strict";b.exports=function a(b){if("number"==typeof b&&isNaN(b))throw Error("NaN is not allowed");if("number"==typeof b&&!isFinite(b))throw Error("Infinity is not allowed");if(null===b||"object"!=typeof b)return JSON.stringify(b);if(b.toJSON instanceof Function)return a(b.toJSON());if(Array.isArray(b)){let c=b.reduce((b,c,d)=>`${b}${0===d?"":","}${a(void 0===c||"symbol"==typeof c?null:c)}`,"");return`[${c}]`}let c=Object.keys(b).sort().reduce((c,d)=>{if(void 0===b[d]||"symbol"==typeof b[d])return c;let e=0===c.length?"":",";return`${c}${e}${a(d)}:${a(b[d])}`},"");return`{${c}}`}},273079,(a,b,c)=>{"use strict";function d(a){return Number.isInteger(a)&&a>=0}function e(a){this.name="ArgumentError",this.message=a}b.exports=function(a,b){if(b=b||{},"function"!=typeof a)throw new e("fetch must be a function");if("object"!=typeof b)throw new e("defaults must be an object");if(void 0!==b.retries&&!d(b.retries))throw new e("retries must be a positive integer");if(void 0!==b.retryDelay&&!d(b.retryDelay)&&"function"!=typeof b.retryDelay)throw new e("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==b.retryOn&&!Array.isArray(b.retryOn)&&"function"!=typeof b.retryOn)throw new e("retryOn property expects an array or function");return b=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},b),function(c,f){var g=b.retries,h=b.retryDelay,i=b.retryOn;if(f&&void 0!==f.retries)if(d(f.retries))g=f.retries;else throw new e("retries must be a positive integer");if(f&&void 0!==f.retryDelay)if(d(f.retryDelay)||"function"==typeof f.retryDelay)h=f.retryDelay;else throw new e("retryDelay must be a positive integer or a function returning a positive integer");if(f&&f.retryOn)if(Array.isArray(f.retryOn)||"function"==typeof f.retryOn)i=f.retryOn;else throw new e("retryOn property expects an array or function");return new Promise(function(b,d){var e=function(e){a("undefined"!=typeof Request&&c instanceof Request?c.clone():c,f).then(function(a){if(Array.isArray(i)&&-1===i.indexOf(a.status))b(a);else if("function"==typeof i)try{return Promise.resolve(i(e,null,a)).then(function(c){c?j(e,null,a):b(a)}).catch(d)}catch(a){d(a)}else e<g?j(e,null,a):b(a)}).catch(function(a){if("function"==typeof i)try{Promise.resolve(i(e,a,null)).then(function(b){b?j(e,a,null):d(a)}).catch(function(a){d(a)})}catch(a){d(a)}else e<g?j(e,a,null):d(a)})};function j(a,b,c){setTimeout(function(){e(++a)},"function"==typeof h?h(a,b,c):h)}e(0)})}}},278223,737018,179246,595549,970806,331852,296715,505434,a=>{"use strict";var b=a.i(103929),c=a.i(85195),d=a.i(680810),e=a.i(691442),f=a.i(743041),g=a.i(15670),h=a.i(776532),i=a.i(161503),j=a.i(765857),k=a.i(271326),l=a.i(124191);async function m(a,b,c,d,e=!1,f,g){let h=e,j=async f=>{if(h){f===+!e?d():c.current?.reject(new i.PrivyIframeError("missing_or_invalid_mfa","MFA verification failed, retry."));let h=await new Promise((a,d)=>{b.current={resolve:a,reject:d},setTimeout(()=>{let a=new i.PrivyIframeError("mfa_timeout","Timed out waiting for MFA code");c.current?.reject(a),d(a)},g)});return await a(h)}return await a()},k=null;for(let a=0;a<f;a++)try{k=await j(a),c.current?.resolve(void 0);break}catch(a){if("missing_or_invalid_mfa"!==a.type)throw c.current?.resolve(void 0),a;h=!0}if(null===k){let a=new i.PrivyIframeError("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw c.current?.reject(a),a}return k}let n=(U=0,()=>"id-"+U++),o=(a,b)=>"bigint"==typeof b?b.toString():b,p=async(a,{ms:b,msg:c})=>{let d,e=new Promise((a,e)=>{d=setTimeout(()=>{e(Error(c))},b??15e3)});try{return await Promise.race([a,e])}finally{void 0!==d&&clearTimeout(d)}},q=new class{enqueue(a,b){this.callbacks[a]=b}dequeue(a,b){let c=this.callbacks[b];if(!c)throw Error(`cannot dequeue ${a} event: no event found for id ${b}`);switch(delete this.callbacks[b],a){case"privy:iframe:ready":case"privy:wallets:create":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:wallet:connect":case"privy:wallet:recover":case"privy:wallet:rpc":case"privy:solana-wallet:create":case"privy:solana-wallet:create-additional":case"privy:solana-wallet:connect":case"privy:solana-wallet:recover":case"privy:solana-wallet:rpc":case"privy:delegated-actions:consent":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":return c;default:throw Error(`invalid wallet event type ${a}`)}}constructor(){this.callbacks={}}};class r{invokeWithMfa(a,b){return p(m(c=>p(this.waitForReady().then(()=>a(c)),{msg:b.timeoutMsg,ms:b.timeoutMs}),this.mfa.rootPromise,this.mfa.submitPromise,()=>this.mfa.emit("mfaRequired"),b.mfaAlwaysRequired??!1,4,3e5),{msg:"Operation reached timeout: MFA verification",ms:126e4})}reload(){return this.ready=!1,this._embeddedWalletMessagePoster.reload()}ping(a=15e3){return p(this.invoke("privy:iframe:ready",{}),{msg:"Ping reached timeout",ms:a})}create(a){return p(this.waitForReady().then(()=>this.invoke("privy:wallet:create",a)),{msg:"Operation reached timeout: create"})}rpc(a){return this.invokeWithMfa(b=>this.invoke("privy:wallet:rpc",{...b,...a}),{timeoutMsg:"Operation reached timeout: rpc"})}createSolana(a){return this.invokeWithMfa(b=>this.invoke("privy:solana-wallet:create",{...b,...a}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}createAdditionalSolana(a){return p(this.waitForReady().then(()=>this.invoke("privy:solana-wallet:create-additional",a)),{msg:"Operation reached timeout: create"})}solanaRpc(a){return this.invokeWithMfa(b=>this.invoke("privy:solana-wallet:rpc",{...b,...a}),{timeoutMsg:"Operation reached timeout: solana-rpc"})}delegateWallets(a){return this.invokeWithMfa(b=>this.invoke("privy:delegated-actions:consent",{...b,...a}),{timeoutMsg:"Operation reached timeout: delegated-actions:consent"})}verifyMfa(a){return this.invokeWithMfa(b=>this.invoke("privy:mfa:verify",{...b,...a}),{timeoutMsg:"Operation reached timeout: mfa:verify",mfaAlwaysRequired:!0})}initEnrollMfa(a){return this.invokeWithMfa(b=>this.invoke("privy:mfa:init-enrollment",{...b,...a}),{timeoutMsg:"Operation reached timeout: mfa:init-enrollment"})}submitEnrollMfa(a){return this.invokeWithMfa(b=>this.invoke("privy:mfa:submit-enrollment",{...b,...a}),{timeoutMsg:"Operation reached timeout: mfa:submit-enrollment"})}unenrollMfa(a){return this.invokeWithMfa(b=>this.invoke("privy:mfa:unenroll",{...b,...a}),{timeoutMsg:"Operation reached timeout: mfa:unenroll",mfaAlwaysRequired:!0})}clearMfa(a){return p(this.waitForReady().then(()=>this.invoke("privy:mfa:clear",a)),{msg:"Operation reached timeout: mfa:clear"})}createWallet(a){return this.invokeWithMfa(b=>this.invoke("privy:wallets:create",{...b,...a}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}signWithUserSigner(a){return this.invokeWithMfa(b=>this.invoke("privy:user-signer:sign",{...b,...a}),{timeoutMsg:"Operation reached timeout: user-signer:sign"})}addWallet(a){return p(this.waitForReady().then(()=>this.invoke("privy:wallets:add",a)),{msg:"Operation reached timeout: wallets:add"})}setRecovery(a){return this.invokeWithMfa(b=>this.invoke("privy:wallets:set-recovery",{...b,...a}),{timeoutMsg:"Operation reached timeout: wallets:set-recovery",timeoutMs:6e4})}connect(a){return p(this.waitForReady().then(()=>this.invoke("privy:wallets:connect",a)),{msg:"Operation reached timeout: wallets:connect"})}recover(a){return this.invokeWithMfa(b=>this.invoke("privy:wallets:recover",{...b,...a}),{timeoutMsg:"Operation reached timeout: wallets:recover",timeoutMs:6e4})}rpcWallet(a){return this.invokeWithMfa(b=>this.invoke("privy:wallets:rpc",{...b,...a}),{timeoutMsg:"Operation reached timeout: wallets:rpc"})}handleEmbeddedWalletMessages(a){if(!a.event.startsWith("privy:"))return void console.warn(`Unsupported event type: ${a.event}`);let{reject:b,resolve:c}=q.dequeue(a.event,a.id);return void 0!==a.error?b(new i.PrivyIframeError(a.error.type,a.error.message)):c(a.data)}waitForReady(){return this.ready?Promise.resolve():new Promise(async(a,b)=>{for(;!this.ready;)this.invoke("privy:iframe:ready",{}).then(()=>{this.ready=!0,a()}).catch(b),await new Promise(a=>{setTimeout(()=>{a()},150)})})}invoke(a,b){let c=`${a}${JSON.stringify(b,o)}`;if("privy:wallet:create"===a||"privy:solana-wallet:create"===a){let a=this.cache.get(c);if(a)return a}let d=new Promise((c,d)=>{let e=n();q.enqueue(e,{resolve:c,reject:d}),this._embeddedWalletMessagePoster.postMessage(JSON.stringify({id:e,event:a,data:b}),"*")}).finally(()=>{this.cache.delete(c)});return this.cache.set(c,d),d}constructor(a,b){this.ready=!1,this.cache=new Map,this._embeddedWalletMessagePoster=a,this.mfa=b}}let s=a.i(541993).default;var t=a.i(221570),u=a.i(748894);let v={0:"legacy",1:"eip2930",2:"eip1559",3:"eip4844",4:"eip7702"},w={legacy:0,eip2930:1,eip1559:2,eip4844:3,eip7702:4},x=a=>void 0!==a?BigInt(a):void 0;function y(a){let b,{type:c=2,...d}="string"==typeof a?JSON.parse(a):a;d.accessList&&Array.isArray(d.accessList)?b=d.accessList.map(a=>Array.isArray(a)?{address:a[0],storageKeys:a[1]}:a):d.accessList&&(b=Object.entries(d.accessList).map(a=>({address:a[0],storageKeys:a[1]})));let e=Number(d.chainId??1),f=(0,u.isHex)(d.data)?d.data:d.data?(0,t.toHex)(Uint8Array.from(d.data)):void 0,g=d.nonce?Number(d.nonce):void 0,h={chainId:e,data:f,nonce:g,value:x(d.value),gas:x(d.gas??d.gasLimit)},i=Number(c);if(0===i)return{...d,type:v[i],...h,gasPrice:x(d.gasPrice),accessList:void 0,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(1===i)return{...d,type:v[i],...h,gasPrice:x(d.gasPrice),accessList:b,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(2===i)return{...d,type:v[i],...h,nonce:g,accessList:b,maxFeePerGas:x(d.maxFeePerGas),maxPriorityFeePerGas:x(d.maxPriorityFeePerGas),gasPrice:void 0,maxFeePerBlobGas:void 0};throw Error(`Unsupported transaction type: ${c}`)}a.s(["STRING_TO_NUMBER_TXN_TYPE",()=>w,"toViemTransactionSerializable",()=>y],737018);let z=a=>`0x${a.toString("hex")}`;var A=a.i(582945),B=a.i(34180);async function C(a,b){let c=(0,B.default)(b);if(void 0===c)throw new g.PrivyClientError({error:"Failed to prepare the payload for signing",code:"invalid_input"});let d=Buffer.from(c).toString("base64"),{signature:e}=await a({message:d});return{signature:e}}async function D(a,b,{wallet_id:c,...d}){let e={version:1,url:a.getCompiledPath(A.WalletRpc,{params:{wallet_id:c}}),method:A.WalletRpc.method,headers:{"privy-app-id":a.app.appId},body:{...d}},{signature:f}=await C(b,e);return await a.fetchPrivyRoute(A.WalletRpc,{body:d,params:{wallet_id:c},headers:{"privy-authorization-signature":f}})}function E(a){if("number"==typeof a||"bigint"==typeof a)return`0x${BigInt(a).toString(16)}`;if("string"==typeof a)return/^0x[0-9a-fA-F]*$/.test(a)?a:z(Buffer.from(a,"utf8"))}async function F({context:a,account:b,rpcRequest:c}){switch(c.chainType){case"ethereum":return async function({context:a,account:b,rpcRequest:c}){var d;switch(c.method){case"personal_sign":{let[d]=c.params,e=await D(a,a.signRequest,{chain_type:"ethereum",method:"personal_sign",wallet_id:b.id,params:d.startsWith("0x")?{message:d.slice(2),encoding:"hex"}:{message:d,encoding:"utf-8"}});if("personal_sign"!==e.method)throw Error("Unable to sign message");return{data:e.data.signature}}case"eth_signTransaction":{let[d]=c.params,e=await D(a,a.signRequest,{chain_type:"ethereum",method:"eth_signTransaction",wallet_id:b.id,params:{transaction:{from:d.from,to:d.to??void 0,nonce:E(d.nonce),chain_id:E(d.chainId),data:function(a){if(void 0!==a)return"string"==typeof a?/^0x[0-9a-fA-F]*$/.test(a)?a:z(Buffer.from(a,"utf8")):z(Buffer.from(Uint8Array.from(a)))}(d.data),value:E(d.value),type:d.type,gas_limit:E(d.gasLimit),gas_price:E(d.gasPrice),max_fee_per_gas:E(d.maxFeePerGas),max_priority_fee_per_gas:E(d.maxPriorityFeePerGas)}}});if("eth_signTransaction"!==e.method)throw Error("Unable to sign transaction");return{data:e.data.signed_transaction}}case"eth_signTypedData_v4":{let[,e]=c.params,f=await D(a,a.signRequest,{chain_type:"ethereum",method:c.method,wallet_id:b.id,params:{typed_data:("string"==typeof(d=e)&&(d=JSON.parse(d)),{types:d.types,primary_type:String(d.primaryType),domain:d.domain,message:d.message})}});if("eth_signTypedData_v4"!==f.method)throw Error("Unable to sign typed data");return{data:f.data.signature}}case"eth_sign":{let[,d]=c.params,e=await D(a,a.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:b.id,params:{hash:/^0x[0-9a-fA-F]*$/.test(d)?d:z(Buffer.from(d,"utf8"))}});if("secp256k1_sign"!==e.method)throw Error("Unable to sign message");return{data:e.data.signature}}case"secp256k1_sign":{let[d]=c.params,e=await D(a,a.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:b.id,params:{hash:/^0x[0-9a-fA-F]*$/.test(d)?d:z(Buffer.from(d,"utf8"))}});if("secp256k1_sign"!==e.method)throw Error("Unable to sign message");return{data:e.data.signature}}case"csw_signUserOperation":case"eth_sendTransaction":case"eth_populateTransactionRequest":throw Error(`This wallet does not support the method: ${c.method}`)}}({context:a,account:b,rpcRequest:c.request});case"solana":return async function({context:a,account:b,rpcRequest:c}){if("signMessage"===c.method){let{message:d}=c.params,e=await D(a,a.signRequest,{chain_type:"solana",method:"signMessage",wallet_id:b.id,params:{message:d,encoding:"base64"}});if("signMessage"!==e.method)throw Error("Unable to sign message");return{data:e.data.signature}}}({context:a,account:b,rpcRequest:c.request})}}a.s(["generateAuthorizationSignature",()=>C],179246),a.s(["rpc",()=>D],595549);let G=new Set(["eth_sign","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"]);class H extends s{async request(a){if(G.has(a.method))return this.handleIFrameRpc(a);switch(a.method){case"eth_accounts":case"eth_requestAccounts":return this._account.address?[this._account.address]:[];case"eth_chainId":return`0x${this._chainId.toString(16)}`;case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(a);case"eth_estimateGas":return this.handleEstimateGas(a);case"eth_signTransaction":{let b=a.params?.[0];return this.handleSignTransaction(b)}case"eth_sendTransaction":{let b=a.params?.[0];return this.handleSendTransaction(b)}case"eth_populateTransactionRequest":{let b=a.params?.[0];return this.handlePopulateTransaction(b)}default:return this.handleJsonRpc(a)}}ensureChainId(a){let b={chainId:this._chainId,...a};return this.internalSwitchEthereumChain(b.chainId),b}internalSwitchEthereumChain(a){a&&Number(a)!==this._chainId&&(this._chainId=Number(a),this._client=(0,k.getPublicClient)(this._chainId,this._chains,{rpcUrls:[]},{appId:this._privyInternal.appId}),this.emit("chainChanged",a))}async handlePopulateTransaction(a){let b=this.ensureChainId(a),c=y(b),{type:d,...e}=await this._client.prepareTransactionRequest({account:b.from??this._account.address,...c});return{...e,type:w[d]}}async handleSignTransaction(a){let b={...a};for(let a of Object.keys(b)){let c=b[a];c&&"bigint"==typeof c&&(b[a]=(0,t.toHex)(c))}return await this.handleIFrameRpc({method:"eth_signTransaction",params:[b]})}async handleSendTransaction(a){let b=await this.handlePopulateTransaction(a),c=await this.handleSignTransaction(b);return await this.handleJsonRpc({method:"eth_sendRawTransaction",params:[c]})}async handleEstimateGas(a){if(!a.params||!Array.isArray(a.params))throw Error("Invalid params for eth_estimateGas");let b=a.params?.[0],c=this.ensureChainId(b),d=y(c);return await this._client.estimateGas({account:c.from??this._account.address,...d})}handleSwitchEthereumChain(a){let b;if(!a.params||!Array.isArray(a.params))throw new i.EmbeddedProviderError(`Invalid params for ${a.method}`,4200);if("string"==typeof a.params[0])b=a.params[0];else{if(!("chainId"in a.params[0])||"string"!=typeof a.params[0].chainId)throw new i.EmbeddedProviderError(`Invalid params for ${a.method}`,4200);b=a.params[0].chainId}this.internalSwitchEthereumChain(b)}async handleIFrameRpc(a){try{let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:a.method,address:this._account.address});let c=this._account;if((0,l.isUnifiedWallet)(c)){let{data:d}=await F({context:{app:this._appApi,fetchPrivyRoute:(...a)=>this._privyInternal.fetch(...a),getCompiledPath:(...a)=>this._privyInternal.getPath(...a),signRequest:({message:a})=>this._walletProxy.signWithUserSigner({accessToken:b,message:a})},account:c,rpcRequest:{chainType:"ethereum",request:a}});return d}try{await this._walletProxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:b})}catch(c){let a=(0,i.errorIndicatesRecoveryIsNeeded)(c);if(a&&"privy"===this._account.recovery_method)await this._walletProxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:b});else{if(!a||!this._onNeedsRecovery)throw c;{let a;await new Promise(async(b,c)=>{a=setTimeout(()=>c(new g.PrivyClientError({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>b(!0)})}).finally(()=>clearTimeout(a))}}}return(await this._walletProxy.rpcWallet({accessToken:b,request:a,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:"ethereum"})).response.data}catch(c){console.error(c);let b=c instanceof Error?c.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:a.method,address:this._account.address,error:b}),new g.PrivyClientError({code:"embedded_wallet_request_error",error:b})}}async handleJsonRpc(a){return this._client.request(a)}toJSON(){return`PrivyEIP1193Provider { address: '${this._account.address}', chainId: ${this._chainId}, request: [Function] }`}constructor({walletProxy:a,privyInternal:b,account:c,entropyId:d,entropyIdVerifier:e,chains:f,onNeedsRecovery:g,chainId:h=f[0].id,appApi:i}){super(),this._walletProxy=a,this._privyInternal=b,this._account=c,this._entropyId=d,this._entropyIdVerifier=e,this._chainId=h,this._chains=f,this._onNeedsRecovery=g,this._client=(0,k.getPublicClient)(h,f,{rpcUrls:[]},{appId:i.appId}),this._appApi=i}}function I(a){return"version"in a}function J(a,b){let c=(I(a)?a.message:a.compileMessage()).staticAccountKeys.find(a=>a.toBase58()===b);if(!c)throw Error(`Transaction does not contain public key ${b}`);return c}class K{async request(a){if(!await this._privyInternal.getAccessTokenInternal())throw new g.PrivyClientError({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});switch(a.method){case"signAndSendTransaction":return await this.handleSignAndSendTransaction(a);case"signTransaction":return await this.handleSignTransaction(a);default:return await this.handleIFrameRpc(a)}}get _publicKey(){return this._account.address}async connectAndRecover(a){if("privy-v2"!==this._account.recovery_method)try{await this._proxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:a})}catch(c){let b=(0,i.errorIndicatesRecoveryIsNeeded)(c);if(b&&"privy"===this._account.recovery_method)await this._proxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:a});else{if(!b||!this._onNeedsRecovery)throw c;{let a;await new Promise(async(b,c)=>{a=setTimeout(()=>c(new g.PrivyClientError({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>b(!0)})}).finally(()=>clearTimeout(a))}}}}async signMessageRpc(a,b){let c=this._account;if(!(0,l.isUnifiedWallet)(c))return(await this._proxy.rpcWallet({accessToken:b,request:a,chainType:"solana",hdWalletIndex:this._account.wallet_index,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier})).response.data;{let{data:d}=await F({context:{app:this._app,fetchPrivyRoute:(...a)=>this._privyInternal.fetch(...a),getCompiledPath:(...a)=>this._privyInternal.getPath(...a),signRequest:({message:a})=>this._proxy.signWithUserSigner({accessToken:b,message:a})},account:c,rpcRequest:{chainType:"solana",request:a}});return{signature:d}}}async handleIFrameRpc(a){try{let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw Error("Missing privy token. User must be logged in");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:a.method,address:this._account.address}),await this.connectAndRecover(b),await this.signMessageRpc(a,b)}catch(c){console.error(c);let b=c instanceof Error?c.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:a.method,address:this._account.address,error:b}),new g.PrivyClientError({code:"embedded_wallet_request_error",error:b})}}async handleSignAndSendTransaction(a){try{let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:a.method,address:this._account.address}),await this.connectAndRecover(b);let{transaction:c,connection:d,options:e}=a.params,f=J(c,this._account.address),g=I(c)?Buffer.from(c.message.serialize()):c.serializeMessage(),{signature:h}=await this.signMessageRpc({method:"signMessage",params:{message:g.toString("base64")}},b);return c.addSignature(f,Buffer.from(h,"base64")),{signature:await d.sendRawTransaction(c.serialize(),e)}}catch(c){console.error(c);let b=c instanceof Error?c.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:a.method,address:this._account.address,error:b}),new g.PrivyClientError({code:"embedded_wallet_request_error",error:b})}}async handleSignTransaction(a){try{let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:a.method,address:this._account.address}),await this.connectAndRecover(b);let{transaction:c}=a.params,d=J(c,this._account.address),e=I(c)?Buffer.from(c.message.serialize()):c.serializeMessage(),{signature:f}=await this.signMessageRpc({method:"signMessage",params:{message:e.toString("base64")}},b);return c.addSignature(d,Buffer.from(f,"base64")),{signedTransaction:c}}catch(c){console.error(c);let b=c instanceof Error?c.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:a.method,address:this._account.wallet_index,error:b}),new g.PrivyClientError({code:"embedded_wallet_request_error",error:b})}}toJSON(){return`PrivyEmbeddedSolanaProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:a,privyInternal:b,account:c,entropyId:d,entropyIdVerifier:e,onNeedsRecovery:f,app:g}){this._proxy=a,this._privyInternal=b,this._account=c,this._entropyId=d,this._entropyIdVerifier=e,this._onNeedsRecovery=f,this._app=g}}class L{setMessagePoster(a){this._proxy=new r(a,this._mfaPromises),this._mfa.setProxy(this._proxy)}async signWithUserSigner(a){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw new g.PrivyClientError({error:"User must be logged in to sign a message with the user signer",code:"user_signer_sign_error"});let{signature:c}=await this._proxy.signWithUserSigner({accessToken:b,message:a.message});return{signature:c}}async add(a){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode)await (0,j.walletCreate)({context:{app:this._appApi,fetchPrivyRoute:(...a)=>this._privyInternal.fetch(...a),getCompiledPath:(...a)=>this._privyInternal.getPath(...a)},chainType:a.chainType});else{let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw new g.PrivyClientError({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.addWallet({accessToken:b,...a})}let{user:b}=await this._privyInternal.refreshSession();return{user:b}}async getBitcoinProvider({wallet:a,entropyId:b,entropyIdVerifier:c,recoveryPassword:d,recoveryAccessToken:e,recoverySecretOverride:f}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return(0,l.isUnifiedWallet)(a)||await this._load({entropyId:b,entropyIdVerifier:c,wallet:a,recoveryPassword:d,recoveryAccessToken:e,recoverySecretOverride:f}),new h.EmbeddedBitcoinWalletProvider({account:a,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:b,entropyIdVerifier:c})}async create({password:a,recoveryMethod:b,recoveryToken:c,recoveryKey:d,recoverySecretOverride:e,iCloudRecordNameOverride:f,solanaAccount:h,skipCallbacks:i}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode){if(b&&!b.startsWith("privy"))throw new g.PrivyClientError({error:"User-controlled server wallets do not support custom recovery methods",code:"embedded_wallet_creation_error"});await (0,j.walletCreate)({context:{app:this._appApi,fetchPrivyRoute:(...a)=>this._privyInternal.fetch(...a),getCompiledPath:(...a)=>this._privyInternal.getPath(...a)},chainType:"ethereum"})}else{let g;if(g=b||(a?"user-passcode":"privy"),a&&"string"!=typeof a)throw Error("Invalid recovery password, must be a string");if("privy"===g&&this._privyInternal.config?.embedded_wallet_config.require_user_password_on_create)throw Error("Password not provided yet is required by App configuration");let i=await this._privyInternal.getAccessTokenInternal();if(!i)throw Error("User must be logged in to create an embedded wallet");let{address:j}=await this._proxy.create({accessToken:i,recoveryMethod:g,recoveryKey:d,recoveryPassword:a,recoveryAccessToken:c,recoverySecretOverride:e,iCloudRecordNameOverride:f,solanaAddress:h?.address});if(!j)throw Error("Failed to create wallet")}return await this._privyInternal.refreshSession(i)}async createSolana(a){if(!this._proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode)await (0,j.walletCreate)({context:{app:this._appApi,fetchPrivyRoute:(...a)=>this._privyInternal.fetch(...a),getCompiledPath:(...a)=>this._privyInternal.getPath(...a)},chainType:"solana"});else{let b=await this._privyInternal.getAccessTokenInternal();if(!b)throw new g.PrivyClientError({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});a?.ethereumAccount&&await this.getProvider(a.ethereumAccount);let{publicKey:c}=await this._proxy.createSolana({accessToken:b,ethereumAddress:a?.ethereumAccount?.address});if(!c)throw new g.PrivyClientError({error:"Failed to create wallet",code:"embedded_wallet_creation_error"})}return await this._privyInternal.refreshSession()}async delegateWallets({delegatedWallets:a,rootWallet:b}){if(!this._proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});let c=await this._privyInternal.getAccessTokenInternal();if(!c)throw new g.PrivyClientError({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.delegateWallets({accessToken:c,delegatedWallets:a,rootWallet:b})}async getProvider(a,b,c,d,e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return(0,l.isUnifiedWallet)(a)||await this._load({wallet:a,entropyId:a.address,entropyIdVerifier:"ethereum-address-verifier",recoveryPassword:b,recoveryKey:e,recoveryAccessToken:c,recoverySecretOverride:d}),new H({account:a,entropyId:a.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}async getEthereumProvider({wallet:a,entropyId:b,entropyIdVerifier:c,recoveryPassword:d,recoveryAccessToken:e,recoverySecretOverride:f,recoveryKey:g,onNeedsRecovery:h}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return(0,l.isUnifiedWallet)(a)||(!h||d||e||f||g)&&await this._load({entropyId:b,entropyIdVerifier:c,wallet:a,recoveryPassword:d,recoveryAccessToken:e,recoverySecretOverride:f,recoveryKey:g}),new H({account:a,entropyId:b,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,onNeedsRecovery:h,appApi:this._appApi})}async getSolanaProvider(a,b,c,d,e,f,h){if(!this._proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return(0,l.isUnifiedWallet)(a)||(!h||d||e||f)&&await this._load({wallet:a,entropyId:b,entropyIdVerifier:c,recoveryPassword:d,recoveryAccessToken:e,recoverySecretOverride:f}),new K({account:a,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:b,entropyIdVerifier:c,onNeedsRecovery:h,app:this._appApi})}async setRecovery(a){let{wallet:b,...c}=a;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if((0,l.isUnifiedWallet)(b))throw new g.PrivyClientError({error:"This wallet does not support setting recovery methods",code:"unsupported_recovery_method"});(0,k.throwIfInvalidRecoveryUpgradePath)({currentRecoveryMethod:b.recovery_method,upgradeToRecoveryMethod:"icloud-native"===c.recoveryMethod?"icloud":c.recoveryMethod}),await this._load("solana"===b.chain_type?{wallet:b,entropyId:b.address,entropyIdVerifier:"solana-address-verifier"}:{wallet:b,entropyId:b.address,entropyIdVerifier:"ethereum-address-verifier"});let d=await this._privyInternal.getAccessTokenInternal();if(!d)throw Error("User must be logged in to interact with embedded wallets");let e=b.recovery_method;this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_started",{address:b.address,target_recovery_method:c.recoveryMethod,existing_recovery_method:e});try{let a;if("user-passcode"===c.recoveryMethod)a={recoveryMethod:"user-passcode",recoveryPassword:c.password};else if("google-drive"===c.recoveryMethod)a={recoveryMethod:"google-drive",recoveryAccessToken:c.recoveryAccessToken};else if("icloud"===c.recoveryMethod)a={recoveryMethod:"icloud",recoveryAccessToken:c.recoveryAccessToken};else if("icloud-native"===c.recoveryMethod)a={recoveryMethod:"icloud-native",iCloudRecordNameOverride:c.iCloudRecordNameOverride,recoverySecretOverride:c.recoverySecretOverride};else if("recovery-encryption-key"===c.recoveryMethod)a={recoveryMethod:"recovery-encryption-key",recoveryKey:c.recoveryKey};else{if("privy"!==c.recoveryMethod)throw Error(`Unknown recovery method: ${c.recoveryMethod}`);a={recoveryMethod:"privy"}}await this._proxy.setRecovery({accessToken:d,entropyId:b.address,entropyIdVerifier:"solana"===b.chain_type?"solana-address-verifier":"ethereum-address-verifier",...a}),this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_completed",{address:b.address,target_recovery_method:c.recoveryMethod,existing_recovery_method:e});let{user:f}=await this._privyInternal.refreshSession();return{user:f,provider:"ethereum"!==b.chain_type?null:new H({account:b,entropyId:b.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}}catch(a){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_failed",{address:b.address,recovery_method:b.recovery_method,error:a instanceof Error?a.message:"Unable to recover wallet"}),a}}getURL(){let a=new URL(`${this._privyInternal.baseUrl}/apps/${this._privyInternal.appId}/embedded-wallets`);return this._privyInternal.caid&&a.searchParams.append("caid",this._privyInternal.caid),this._privyInternal.appClientId&&a.searchParams.append("client_id",this._privyInternal.appClientId),a.href}get chains(){return this._chains}onMessage(a){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return this._proxy.handleEmbeddedWalletMessages(a)}reload(){this._proxy?this._proxy.reload():console.warn("Attempted to reload proxy before initialized")}async ping(a){try{if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return await this._proxy.ping(a),!0}catch(a){return console.error(a),!1}}async _load({entropyId:a,entropyIdVerifier:b,wallet:c,recoveryPassword:d,recoveryKey:e,recoveryAccessToken:f,recoverySecretOverride:g}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let h=await this._privyInternal.getAccessTokenInternal();if(!h)throw Error("User must be logged in to interact with embedded wallets");try{return await this._proxy.connect({accessToken:h,entropyId:a,entropyIdVerifier:b}),a}catch(j){if((0,i.errorIndicatesRecoveryIsNeeded)(j))try{if("privy"===c.recovery_method){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:c.address,recovery_method:c.recovery_method});let d=await this._proxy.recover({accessToken:h,entropyId:a,entropyIdVerifier:b});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:c.address,recovery_method:c.recovery_method}),d.entropyId}if("user-passcode"===c.recovery_method&&d){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:c.address,recovery_method:c.recovery_method});let e=await this._proxy.recover({accessToken:h,recoveryPassword:d,entropyId:a,entropyIdVerifier:b});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:c.address,recovery_method:c.recovery_method}),e.entropyId}if(["google-drive","icloud"].includes(c.recovery_method)&&f){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:c.address,recovery_method:c.recovery_method});let d=await this._proxy.recover({accessToken:h,recoveryAccessToken:f,entropyId:a,entropyIdVerifier:b});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:c.address,recovery_method:c.recovery_method}),d.entropyId}if("icloud"===c.recovery_method&&g){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:c.address,recovery_method:"icloud-native"});let d=await this._proxy.recover({accessToken:h,recoverySecretOverride:g,entropyId:a,entropyIdVerifier:b});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:c.address,recovery_method:"icloud-native"}),d.entropyId}if("recovery-encryption-key"===c.recovery_method&&e){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:c.address,recovery_method:c.recovery_method});let d=await this._proxy.recover({accessToken:h,recoveryKey:e,entropyId:a,entropyIdVerifier:b});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:c.address,recovery_method:c.recovery_method}),d.entropyId}}catch(b){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_failed",{address:c.address,recovery_method:c.recovery_method,error:b instanceof Error?b.message:`Unable to recover wallet: ${a}`}),b}throw j}}constructor(a,b,c,d,g,h){if(this._chains=Array.from(e.DEFAULT_SUPPORTED_CHAINS),this._privyInternal=a,b&&(this._proxy=new r(b,g),d.setProxy(this._proxy)),c){let a=(0,f.dedupeSupportedChains)(c);this._chains=a}this._mfa=d,this._mfaPromises=g,this._appApi=h}}class M extends s{constructor(){super(),this.rootPromise={current:null},this.submitPromise={current:null}}}var N=a.i(273079),O=a.i(254799);let P={randomUUID:O.default.randomUUID},Q=new Uint8Array(256),R=Q.length,S=[];for(let a=0;a<256;++a)S.push((a+256).toString(16).slice(1));let T=function(a,b,c){if(P.randomUUID&&!b&&!a)return P.randomUUID();let d=(a=a||{}).random||(a.rng||function(){return R>Q.length-16&&(O.default.randomFillSync(Q),R=0),Q.slice(R,R+=16)})();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){c=c||0;for(let a=0;a<16;++a)b[c+a]=d[a];return b}return function(a,b=0){return S[a[b+0]]+S[a[b+1]]+S[a[b+2]]+S[a[b+3]]+"-"+S[a[b+4]]+S[a[b+5]]+"-"+S[a[b+6]]+S[a[b+7]]+"-"+S[a[b+8]]+S[a[b+9]]+"-"+S[a[b+10]]+S[a[b+11]]+S[a[b+12]]+S[a[b+13]]+S[a[b+14]]+S[a[b+15]]}(d)};a.s(["v4",0,T],970806);var U,V,W=((V={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",V.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",V.MISSING_OR_INVALID_PRIVY_CLIENT_ID="missing_or_invalid_privy_client_id",V.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",V.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",V.MISSING_MFA_ENROLLMENT="missing_mfa_enrollment",V.MISSING_OR_INVALID_MFA="missing_or_invalid_mfa",V.EXPIRED_OR_INVALID_MFA_TOKEN="expired_or_invalid_mfa_token",V.INVALID_DATA="invalid_data",V.INVALID_CREDENTIALS="invalid_credentials",V.INVALID_CAPTCHA="invalid_captcha",V.LINKED_TO_ANOTHER_USER="linked_to_another_user",V.ALLOWLIST_REJECTED="allowlist_rejected",V.CANNOT_UNLINK_EMBEDDED_WALLET="cannot_unlink_embedded_wallet",V.CANNOT_UNLINK_SOLE_ACCOUNT="cannot_unlink_sole_account",V.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",V.LINKED_ACCOUNT_NOT_FOUND="linked_account_not_found",V.TOO_MANY_REQUESTS="too_many_requests",V.RESOURCE_CONFLICT="resource_conflict",V.INVALID_ORIGIN="invalid_origin",V.MISSING_ORIGIN="missing_origin",V.INVALID_NATIVE_APP_ID="invalid_native_app_id",V.TOKEN_ALREADY_USED="token_already_used",V.ALREADY_LOGGED_OUT="already_logged_out",V.NOT_SUPPORTED="not_supported",V.USER_UNSUBSCRIBED="user_unsubscribed",V.MAX_APPS_REACHED="max_apps_reached",V.USER_LIMIT_REACHED="max_accounts_reached",V.DEVICE_REVOKED="device_revoked",V.WALLET_PASSWORD_EXISTS="wallet_password_exists",V.OAUTH_STATE_MISMATCH="oauth_state_mismatch",V.MAX_DENYLIST_ENTRIES_REACHED="max_denylist_entries_reached",V.MAX_TEST_ACCOUNTS_REACHED="max_test_accounts_reached",V.DISALLOWED_LOGIN_METHOD="disallowed_login_method",V.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",V.DISALLOWED_RECOVERY_METHOD="disallowed_recovery_method",V.LEGACY_DASHBOARD_LOGIN_CONFIGURATION="legacy_dashboard_login_configuration",V.CANNOT_SET_PASSWORD="cannot_set_password",V.INVALID_PKCE_PARAMETERS="invalid_pkce_parameters",V.INVALID_APP_URL_SCHEME_CONFIGURATION="invalid_app_url_scheme_configuration",V.CROSS_APP_CONNECTION_NOT_ALLOWED="cross_app_connection_not_allowed",V.USER_DOES_NOT_EXIST="user_does_not_exist",V.ALREADY_EXISTS="resource_already_exists",V.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",V.USER_HAS_NOT_DELEGATED_WALLET="user_has_not_delegated_wallet",V.FEATURE_NOT_ENABLED="feature_not_enabled",V.INSUFFICIENT_FUNDS="insufficient_funds",V.TRANSACTION_BROADCAST_FAILURE="transaction_broadcast_failure",V.TRANSACTION_EXECUTION_FAILURE="transaction_execution_failure",V.INVALID_POLICY_FORMAT="invalid_policy_format",V.POLICY_VIOLATION="policy_violation",V.AUTHORIZATION_KEY_HAS_ASSOCIATED_WALLETS="authorization_key_has_associated_wallets",V.INVALID_REQUEST="invalid_request",V.SIGNUP_DISABLED="signup_disabled",V);a.s(["PrivyErrorCode",()=>W],331852);let X={path:"/api/v1/apps/:app_id",method:"GET"},Y={path:"/api/v1/analytics_events",method:"POST"},Z={path:"/api/v1/sessions",method:"POST"},$={path:"/api/v1/sessions/logout",method:"POST"};var _=a.i(733865);a.s(["base64url",0,_],296715);var _=_;function aa(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}var ab=function a(b,c){function d(a,d,e){if("undefined"!=typeof document){"number"==typeof(e=aa({},c,e)).expires&&(e.expires=new Date(Date.now()+864e5*e.expires)),e.expires&&(e.expires=e.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var f="";for(var g in e)e[g]&&(f+="; "+g,!0!==e[g]&&(f+="="+e[g].split(";")[0]));return document.cookie=a+"="+b.write(d,a)+f}}return Object.create({set:d,get:function(a){if("undefined"!=typeof document&&(!arguments.length||a)){for(var c=document.cookie?document.cookie.split("; "):[],d={},e=0;e<c.length;e++){var f=c[e].split("="),g=f.slice(1).join("=");try{var h=decodeURIComponent(f[0]);if(d[h]=b.read(g,h),a===h)break}catch(a){}}return a?d[a]:d}},remove:function(a,b){d(a,"",aa({},b,{expires:-1}))},withAttributes:function(b){return a(this.converter,aa({},this.attributes,b))},withConverter:function(b){return a(aa({},this.converter,b),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(b)}})}({read:function(a){return'"'===a[0]&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});a.s(["default",()=>ab],505434);var ac=a.i(812721);let ad=Promise.allSettled.bind(Promise)??(a=>Promise.all(a.map(a=>a.then(a=>({status:"fulfilled",value:a})).catch(a=>({status:"rejected",reason:a}))))),ae="privy:token",af="privy-token",ag="privy:pat",ah="privy:refresh_token",ai="privy-refresh-token",aj="privy:id-token",ak="privy-id-token",al="privy-session";class am extends s{set isUsingServerCookies(a){this._isUsingServerCookies=a}async getCustomerAccessToken(){let a=await this._storage.get(ae);try{return"string"==typeof a?new ac.Token(a).value:null}catch(a){return console.error(a),await this.destroyLocalState({reason:"getToken_error"}),null}}async getPrivyAccessToken(){let a=await this._storage.get(ag);try{return"string"==typeof a?new ac.Token(a).value:null}catch(a){return console.error(a),await this.destroyLocalState({reason:"getToken_error"}),null}}async getRefreshToken(){let a=await this._storage.get(ah);return"string"==typeof a?a:null}async getIdentityToken(){let a=await this._storage.get(aj);return"string"==typeof a?a:null}get mightHaveServerCookies(){try{let a=ab.get(al);return void 0!==a&&a.length>0}catch(a){console.error(a)}return!1}hasRefreshCredentials(a,b){return this.mightHaveServerCookies||"string"==typeof a&&"string"==typeof b}tokenIsActive(a){if(!a)return!1;let b=ac.Token.parse(a);return null!==b&&!b.isExpired(30)}async destroyLocalState(a){await ad([this._storage.del(ae),this._storage.del(ah),this._storage.del(aj),this._storage.del(this.GUEST_CREDENTIAL_STORAGE_KEY)]),ab.remove(af),ab.remove(ai),ab.remove(ak),ab.remove(al),a?.reason&&this.emit("storage_cleared",{reason:a.reason})}async storeCustomerAccessToken(a){if("string"==typeof a){let b=await this._storage.get(ae);if(await this._storage.put(ae,a),!this._isUsingServerCookies){let b=ac.Token.parse(a)?.expiration;ab.set(af,a,{sameSite:"Strict",secure:!0,expires:b?new Date(1e3*b):void 0})}b!==a&&this.emit("token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let a=await this._storage.get(ae);await this._storage.del(ae),ab.remove(af),null!==a&&this.emit("token_cleared",{reason:"set_with_non_string_value"})}}async storePrivyAccessToken(a){"string"==typeof a?await this._storage.put(ag,a):await this._storage.del(ag)}async storeRefreshToken(a){"string"==typeof a?(await this._storage.put(ah,a),this._isUsingServerCookies||(ab.set(al,"t",{sameSite:"Strict",secure:!0,expires:30}),ab.set(ai,a,{sameSite:"Strict",secure:!0,expires:30})),this.emit("refresh_token_stored",{cookiesEnabled:this._isUsingServerCookies})):(await this._storage.del(ah),ab.remove(ai),ab.remove(al),this.emit("refresh_token_cleared",{reason:"set_with_non_string_value"}))}async updateWithTokensResponse(a){let b=(await ad([this.storeCustomerAccessToken(a.token),this.storePrivyAccessToken(a.privy_access_token),this.storeRefreshToken(a.refresh_token),this.storeIdentityToken(a.identity_token),this.processOAuthTokens(a.oauth_tokens)])).filter(a=>"rejected"===a.status);b.length>0&&this.emit("error_storing_tokens",b.map(a=>String(a.reason)).join(", "))}async processOAuthTokens(a){a&&this.emit("oauth_tokens_granted",a)}async storeIdentityToken(a){if("string"==typeof a){let b=await this._storage.get(aj);if(await this._storage.put(aj,a),!this._isUsingServerCookies){let b=ac.Token.parse(a)?.expiration;ab.set(ak,a,{sameSite:"Strict",secure:!0,expires:b?new Date(1e3*b):void 0})}b!==a&&this.emit("identity_token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let a=await this._storage.get(aj);await this._storage.del(aj),ab.remove(ak),null!==a&&this.emit("identity_token_cleared",{reason:"set_with_non_string_value"})}}async getOrCreateGuestCredential(){let a=this._storage.get(this.GUEST_CREDENTIAL_STORAGE_KEY);if(a&&"string"==typeof a)return a;let b=_.encode(crypto.getRandomValues(new Uint8Array(32)));return await this._storage.put(this.GUEST_CREDENTIAL_STORAGE_KEY,b),b}constructor(a){super(),this._isUsingServerCookies=!1,this._storage=a.storage,this.GUEST_CREDENTIAL_STORAGE_KEY=`privy:guest:${a.appId}`}}am.events=["storage_cleared","token_cleared","refresh_token_cleared","identity_token_cleared","token_stored","refresh_token_stored","identity_token_stored","oauth_tokens_granted","error_storing_tokens"];let an=()=>{},ao={NONE:-1/0,ERROR:1,WARN:2,INFO:3,DEBUG:1/0},ap="privy:caid";class aq{setCallbacks(a){this.callbacks={...this.callbacks,...a}}get isReady(){return!!this._config}get config(){return this._config}get caid(){return this._analyticsId}async _initialize(){if(this.isReady)this.callbacks?.setIsReady?.(!0);else{if(!await this.isStorageAccessible())throw new g.PrivyClientError({code:"storage_error",error:"Unable to access storage"});this._config=await this.getAppConfig(),this._config?.custom_api_url&&(this.baseUrl=this._config.custom_api_url,this.session.isUsingServerCookies=!0),this.callbacks?.setIsReady?.(!0),this._sdkVersion.startsWith("react-auth:")||this.createAnalyticsEvent("sdk_initialize",{})}}getPath(a,{params:b,query:c}){let d;return`${this.baseUrl}${d=a.path,b?Object.entries(b).reduce((a,[b,c])=>a.replace(`:${b}`,`${c}`),d):d}${function(a){let b=new URLSearchParams;for(let c in a)null!=a[c]&&b.append(c,String(a[c]));return Array.from(b).length?"?"+b.toString():""}(c)}`}async fetch(a,{body:b,params:c,query:d,headers:e,onRequest:f=this._beforeRequest.bind(this)}){let h=new Request(this.getPath(a,{params:c,query:d}),{method:a.method,body:JSON.stringify(b),headers:e}),i=await f(h),j=await this._fetch(h,i),k=await j.json();if(j.status>299)throw new g.PrivyApiError(k);return k}async _beforeRequestWithoutInitialize(a){let b,c=await this.session.getPrivyAccessToken()??await this.session.getCustomerAccessToken(),d=new Headers(a.headers);d.set("privy-app-id",this.appId),this.appClientId&&d.set("privy-client-id",this.appClientId),d.set("privy-client",this._sdkVersion),c&&d.set("Authorization",`Bearer ${c}`),d.set("Content-Type","application/json"),d.set("Accept","application/json");let e=await this._getOrGenerateClientAnalyticsId();return e&&d.set("privy-ca-id",e),this.nativeAppIdentifier&&d.set("x-native-app-identifier",this.nativeAppIdentifier),{signal:(b=new AbortController,setTimeout(()=>b.abort(),2e4),b.signal),headers:d,credentials:"include"}}async beforeRequestWithoutRefresh(a){return await this._initialize(),this._beforeRequestWithoutInitialize(a)}async _beforeRequest(a){return await this._initialize(),await this.getAccessTokenInternal(),this.beforeRequestWithoutRefresh(a)}async getAppConfig(){return await this.fetch(X,{params:{app_id:this.appId},onRequest:this._beforeRequestWithoutInitialize.bind(this)})}async _getOrGenerateClientAnalyticsId(){if(this._analyticsId)return this._analyticsId;try{let a=await this._storage.get(ap);if("string"==typeof a&&a.length>0)return this._analyticsId=a,a}catch(a){this.logger.error("Unable to load clientId",a)}try{this._analyticsId=T()}catch(a){this.logger.error("Unable to generate uuidv4",a)}if(this._analyticsId){try{await this._storage.put(ap,this._analyticsId)}catch(a){this.logger.error(`Unable to store clientId: ${this._analyticsId}`,a)}return this._analyticsId}}async destroyClientAnalyticsId(){try{return await this._storage.del(ap)}catch(a){this.logger.error("Unable to delete clientId",a)}}async createAnalyticsEvent(a,b){try{await this.fetch(Y,{body:{event_name:a,client_id:await this._getOrGenerateClientAnalyticsId(),payload:b},onRequest:this.beforeRequestWithoutRefresh.bind(this)})}catch(a){}}async refreshSession(a=!1){if(!await this.isStorageAccessible())throw new g.PrivyClientError({code:"storage_error",error:"Unable to access storage"});let b=await this.session.getRefreshToken()??void 0,c=b??"key",d=this._cache.get(c);if(d)return this.logger.debug("[privy:refresh] found in-flight session refresh request, deduping"),await d;let e=this._refreshSession(b,a);this._cache.set(c,e);try{return await e}finally{this._cache.delete(c)}}async _refreshSession(a,b){let c=await this.session.getCustomerAccessToken();if(!this.session.hasRefreshCredentials(c,a??null))throw this.logger.debug("[privy:refresh] missing tokens, skipping request"),await this._initialize(),new g.PrivyApiError({code:W.MISSING_OR_INVALID_TOKEN,error:"No tokens found in storage"});try{this.logger.debug(`[privy:refresh] fetching: ${Z.path}`);let c=await this.fetch(Z,{body:{refresh_token:a},onRequest:this.beforeRequestWithoutRefresh.bind(this)}),d=c.session_update_action;return this.logger.debug(`[privy:refresh] response: ${d}`),b||this.callbacks?.setUser?.(c.user),"set"===d&&(await this.session.updateWithTokensResponse(c),this.logger.debug("[privy:refresh] tokens stored")),"clear"===d&&(await this.session.destroyLocalState(),this.logger.debug("[privy:refresh] tokens cleared"),b||this.callbacks?.setUser?.(null)),"ignore"===d&&c.token&&(await this.session.storeCustomerAccessToken(c.token),await this.session.storePrivyAccessToken(c.privy_access_token),this.logger.debug("[privy:refresh] access token stored"),c.identity_token&&(this.logger.debug("[privy:refresh] identity token stored"),await this.session.storeIdentityToken(c.identity_token))),this.logger.debug("[privy:refresh] returning response"),c}catch(a){throw this.logger.debug(`[privy:refresh] error: ${a.message??"unknown error"}`),a instanceof g.PrivyApiError&&a.code===W.MISSING_OR_INVALID_TOKEN&&(await this.session.destroyLocalState(),b||this.callbacks?.setUser?.(null)),a}}async getAccessToken(){let[a,b]=await Promise.all([this.session.getCustomerAccessToken(),this.session.getRefreshToken()]);if(!this.session.tokenIsActive(a)&&this.session.hasRefreshCredentials(a,b)){let b=await this.refreshSession(),c=await this.session.getCustomerAccessToken();return b.token||this.logger.debug("[privy:getAccessToken] expected token received null"),b.token===a&&this.logger.debug("[privy:getAccessToken] expected new token in response received existing"),c===a&&this.logger.debug("[privy:getAccessToken] expected new token in storage received existing"),b.token??c}return a}async getAccessTokenInternal(){let a=await this.getAccessToken();return await this.session.getPrivyAccessToken()??a}async getIdentityToken(){return await this.session.getIdentityToken()}async isStorageAccessible(){try{let a=`privy:__storage__test-${T()}`,b="blobby";await this._storage.put(a,b);let c=await this._storage.get(a);return await this._storage.del(a),c===b}catch(a){return this.logger.error(a),!1}}constructor(a){this._sdkVersion="js-sdk-core:0.58.2",this._cache=new Map,this.logger=(({level:a}={level:"ERROR"})=>({get level(){return a},error:ao[a]>=ao.ERROR?console.error:an,warn:ao[a]>=ao.WARN?console.warn:an,info:ao[a]>=ao.INFO?console.info:an,debug:ao[a]>=ao.DEBUG?console.debug:an}))({level:a.logLevel??"ERROR"}),this._storage=a.storage,this._analyticsId=null,this._getOrGenerateClientAnalyticsId(),this.baseUrl=a.baseUrl??"https://auth.privy.io",this.appId=a.appId,this.appClientId=a.appClientId,this._sdkVersion=a.sdkVersion??this._sdkVersion,this.callbacks=a.callbacks,this.nativeAppIdentifier=a.nativeAppIdentifier,this.session=new am({storage:this._storage,isUsingServerCookies:!1,appId:a.appId}),this._fetch=(0,N.default)(globalThis.fetch,{retries:3,retryDelay:a=>3**a*500,retryOn:[408,409,425,500,502,503,504]}),this.session.on("error_storing_tokens",a=>{this.createAnalyticsEvent("error_updating_tokens_in_storage",{reason:a})})}}let ar={path:"/api/v1/users/me/accept_terms",method:"POST"};class as{async get(){let{user:a}=await this._privyInternal.refreshSession();return{user:a}}async acceptTerms(){return{user:await this._privyInternal.fetch(ar,{})}}constructor(a){this._privyInternal=a}}let at={path:"/api/v1/custom_jwt_account/authenticate",method:"POST"},au=a=>"wallet"===a.type&&"privy"===a.wallet_client_type&&"embedded"===a.connector_type,av=a=>a?a.linked_accounts.filter(au).filter(a=>"ethereum"===a.chain_type).sort((a,b)=>a.wallet_index-b.wallet_index):[],aw=a=>av(a).find(a=>0===a.wallet_index)??null,ax=a=>a?a.linked_accounts.filter(au).filter(a=>"solana"===a.chain_type).sort((a,b)=>a.wallet_index-b.wallet_index):[],ay=async(a,b,c)=>{let d,e,f,g,h=(d=b.user,!("off"===(e=c?.ethereum?.createOnLogin??"off")||av(d).length>0||d.linked_accounts.filter(a=>"wallet"===a.type&&"ethereum"===a.chain_type).length>0&&"all-users"!==e)),i=(f=b.user,!("off"===(g=c?.solana?.createOnLogin??"off")||ax(f).length>0||f.linked_accounts.filter(a=>"wallet"===a.type&&"solana"===a.chain_type).length>0&&"all-users"!==g));if(h&&i){let c=await a.create({recoveryMethod:"privy",skipCallbacks:!0});return{...await a.createSolana({ethereumAccount:aw(c.user)??void 0}),is_new_user:b.is_new_user,oauth_tokens:b.oauth_tokens}}return h?{...await a.create({recoveryMethod:"privy",solanaAccount:ax(b.user).find(a=>0===a.wallet_index)??null??void 0}),is_new_user:b.is_new_user,oauth_tokens:b.oauth_tokens}:i?{...await a.createSolana({ethereumAccount:aw(b.user)??void 0}),is_new_user:b.is_new_user,oauth_tokens:b.oauth_tokens}:b};class az{async syncWithToken(a,b,c){let d=await this._privyInternal.fetch(at,{body:{token:a,mode:c}});await this._privyInternal.session.updateWithTokensResponse(d);let e=await ay(this._embedded,d,b?.embedded);return this._privyInternal.callbacks?.setUser?.(e.user),e}constructor(a,b){this._privyInternal=a,this._embedded=b}}let aA={path:"/api/v1/passwordless/authenticate",method:"POST"},aB={path:"/api/v1/passwordless/init",method:"POST"},aC={path:"/api/v1/passwordless/link",method:"POST"},aD={path:"/api/v1/passwordless/unlink",method:"POST"},aE={path:"/api/v1/passwordless/update",method:"POST"};class aF{async sendCode(a,b){return this._privyInternal.fetch(aB,{body:{email:a,token:b}})}async loginWithCode(a,b,c,d){let e=await this._privyInternal.fetch(aA,{body:{email:a,code:b,mode:c}});await this._privyInternal.session.updateWithTokensResponse(e);let f=await ay(this._embedded,e,d?.embedded);return this._privyInternal.callbacks?.setUser?.(f.user),f}async linkWithCode(a,b){await this._privyInternal.fetch(aC,{body:{email:a,code:b}});let c=await this._privyInternal.refreshSession();return{user:c.user,identity_token:c.identity_token}}async updateEmail({oldEmailAddress:a,newEmailAddress:b,code:c}){await this._privyInternal.fetch(aE,{body:{oldAddress:a,newAddress:b,code:c}});let d=await this._privyInternal.refreshSession();return{user:d.user,identity_token:d.identity_token}}async unlink(a){await this._privyInternal.fetch(aD,{body:{address:a}});let b=await this._privyInternal.refreshSession();return{user:b.user,identity_token:b.identity_token}}constructor(a,b){this._privyInternal=a,this._embedded=b}}let aG={path:"/api/v1/farcaster/init",method:"POST"},aH={path:"/api/v1/farcaster/authenticate",method:"POST"},aI={path:"/api/v1/farcaster/link",method:"POST"},aJ={path:"/api/v1/farcaster/unlink",method:"POST"},aK={path:"/api/v1/farcaster/status",method:"GET"},aL={path:"/api/v2/farcaster/init",method:"POST"},aM={path:"/api/v2/farcaster/authenticate",method:"POST"};class aN{async initializeAuth({relyingParty:a,redirectUrl:b,token:c}){return await this._privyInternal.fetch(aG,{body:{relying_party:a,redirect_url:b,token:c}})}async getFarcasterStatus({channel_token:a}){return await this._privyInternal.fetch(aK,{headers:{"farcaster-channel-token":a}})}async authenticate({channel_token:a,message:b,signature:c,fid:d,mode:e},f){let g=await this._privyInternal.fetch(aH,{body:{channel_token:a,message:b,signature:c,fid:d,mode:e}});await this._privyInternal.session.updateWithTokensResponse(g);let h=await ay(this._embedded,g,f?.embedded);return this._privyInternal.callbacks?.setUser?.(h.user),h}async link({channel_token:a,message:b,signature:c,fid:d}){await this._privyInternal.fetch(aI,{body:{channel_token:a,message:b,signature:c,fid:d}});let e=await this._privyInternal.refreshSession();return{user:e.user,identity_token:e.identity_token}}async unlink({fid:a}){await this._privyInternal.fetch(aJ,{body:{fid:a}});let b=await this._privyInternal.refreshSession();return{user:b.user,identity_token:b.identity_token}}constructor(a,b){this._privyInternal=a,this._embedded=b}}class aO{async initializeAuth(){return await this._privyInternal.fetch(aL,{body:{}})}async authenticate({message:a,signature:b,fid:c},d){let e=await this._privyInternal.fetch(aM,{body:{message:a,signature:b,fid:c}});await this._privyInternal.session.updateWithTokensResponse(e);let f=await ay(this._embedded,e,d?.embedded);return this._privyInternal.callbacks?.setUser?.(f.user),f}constructor(a,b){this._privyInternal=a,this._embedded=b}}let aP={path:"/api/v1/guest/authenticate",method:"POST"};class aQ{async create(a){let b=await this._privyInternal.session.getOrCreateGuestCredential(),c=await this._privyInternal.fetch(aP,{body:{guest_credential:b}});await this._privyInternal.session.updateWithTokensResponse(c);let d=await ay(this._embedded,c,a?.embedded);return this._privyInternal.callbacks?.setUser?.(d.user),d}constructor(a,b){this._privyInternal=a,this._embedded=b}}let aR={path:"/api/v1/oauth/authenticate",method:"POST"},aS={path:"/api/v1/oauth/init",method:"POST"},aT={path:"/api/v1/oauth/link",method:"POST"},aU={path:"/api/v1/oauth/unlink",method:"POST"};var _=_;let aV="privy:state_code",aW="privy:code_verifier";async function aX(a,b){let c=(new TextEncoder).encode(a);return new Uint8Array(await b("SHA-256",c))}function aY(){return _.encode(crypto.getRandomValues(new Uint8Array(36)))}async function aZ({codeVerifier:a,method:b="S256",digest:c=crypto.subtle.digest.bind(crypto.subtle)}){if("S256"!=b)return a;{let b=await aX(a,c);return _.encode(b)}}class a${async generateURL(a,b){let c=aY(),d=aY(),e=await aZ({codeVerifier:c,digest:this._crypto?.digest});return await Promise.all([this._storage.put(aW,c),this._storage.put(aV,d)]),this._privyInternal.fetch(aS,{body:{redirect_to:b,provider:a,code_challenge:e,state_code:d}})}async loginWithCode(a,b,c,d,e,f){let[h,i]=await Promise.all([this._storage.get(aW),this._storage.get(aV)]);if(i!==b)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:c,storedStateCode:i??"",returnedStateCode:b??""}),new g.PrivyClientError({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let j=await this._privyInternal.fetch(aR,{body:{authorization_code:a,code_type:d,state_code:i,code_verifier:h,mode:e}});await this._privyInternal.session.updateWithTokensResponse(j);let k=await ay(this._embedded,j,f?.embedded);return await Promise.all([this._storage.del(aW),this._storage.del(aV)]),this._privyInternal.callbacks?.setUser?.(k.user),k}async linkWithCode(a,b,c,d){let[e,f]=await Promise.all([this._storage.get(aW),this._storage.get(aV)]);if(f!==b)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:c,storedStateCode:f??"",returnedStateCode:b??""}),new g.PrivyClientError({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let h=await this._privyInternal.fetch(aT,{body:{authorization_code:a,code_type:d,state_code:f,code_verifier:e}});await this._privyInternal.session.processOAuthTokens(h.oauth_tokens);let i=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(aW),this._storage.del(aV)]),{user:i.user,identity_token:i.identity_token}}async unlink(a,b){await this._privyInternal.fetch(aU,{body:{provider:a,subject:b}});let c=await this._privyInternal.refreshSession();return{user:c.user,identity_token:c.identity_token}}constructor(a,b,c,d){this._privyInternal=a,this._embedded=b,this._storage=c,this._crypto=d}}let a_={path:"/api/v1/passkeys/link",method:"POST"},a0={path:"/api/v1/passkeys/authenticate",method:"POST"},a1={path:"/api/v1/passkeys/register",method:"POST"},a2={path:"/api/v1/passkeys/authenticate/init",method:"POST"},a3={path:"/api/v1/passkeys/register/init",method:"POST"},a4={path:"/api/v1/passkeys/link/init",method:"POST"};class a5{async generateRegistrationOptions(a){return await this._privyInternal.fetch(a4,{body:{relying_party:a}})}async generateAuthenticationOptions(a){return await this._privyInternal.fetch(a2,{body:{relying_party:a}})}async generateSignupOptions(a){return await this._privyInternal.fetch(a3,{body:{relying_party:a}})}async loginWithPasskey(a,b,c,d){let e=await this._privyInternal.fetch(a0,{body:{relying_party:c,challenge:b,authenticator_response:this._transformAuthenticationResponseToSnakeCase(a)}});await this._privyInternal.session.updateWithTokensResponse(e);let f=await ay(this._embedded,e,d?.embedded);return this._privyInternal.callbacks?.setUser?.(f.user),f}async signupWithPasskey(a,b,c){let d=await this._privyInternal.fetch(a1,{body:{relying_party:b,authenticator_response:this._transformRegistrationResponseToSnakeCase(a)}});await this._privyInternal.session.updateWithTokensResponse(d);let e=await ay(this._embedded,d,c?.embedded);return this._privyInternal.callbacks?.setUser?.(e.user),e}async linkWithPasskey(a,b){await this._privyInternal.fetch(a_,{body:{relying_party:b,authenticator_response:this._transformRegistrationResponseToSnakeCase(a)}});let c=await this._privyInternal.refreshSession();return{user:c.user,identity_token:c.identity_token}}_transformRegistrationResponseToSnakeCase(a){return{type:a.type,id:a.id,raw_id:a.rawId,response:{client_data_json:a.response.clientDataJSON,attestation_object:a.response.attestationObject,authenticator_data:a.response.authenticatorData||void 0,transports:a.response.transports||void 0,public_key:a.response.publicKey||void 0,public_key_algorithm:a.response.publicKeyAlgorithm||void 0},authenticator_attachment:a.authenticatorAttachment||void 0,client_extension_results:{app_id:a.clientExtensionResults.appid||void 0,cred_props:a.clientExtensionResults.credProps||void 0,hmac_create_secret:a.clientExtensionResults.hmacCreateSecret||void 0}}}_transformAuthenticationResponseToSnakeCase(a){return{type:a.type,id:a.id,raw_id:a.rawId,response:{signature:a.response.signature,client_data_json:a.response.clientDataJSON,authenticator_data:a.response.authenticatorData,user_handle:a.response.userHandle||void 0},authenticator_attachment:a.authenticatorAttachment||void 0,client_extension_results:{app_id:a.clientExtensionResults.appid||void 0,cred_props:a.clientExtensionResults.credProps||void 0,hmac_create_secret:a.clientExtensionResults.hmacCreateSecret||void 0}}}constructor(a,b){this._privyInternal=a,this._embedded=b}}let a6={path:"/api/v1/passwordless_sms/authenticate",method:"POST"},a7={path:"/api/v1/passwordless_sms/init",method:"POST"},a8={path:"/api/v1/passwordless_sms/link",method:"POST"},a9={path:"/api/v1/passwordless_sms/unlink",method:"POST"},ba={path:"/api/v1/passwordless_sms/update",method:"POST"};class bb{async sendCode(a,b){return this._privyInternal.fetch(a7,{body:{phoneNumber:a,token:b}})}async loginWithCode(a,b,c,d){let e=await this._privyInternal.fetch(a6,{body:{phoneNumber:a,code:b,mode:c}});await this._privyInternal.session.updateWithTokensResponse(e);let f=await ay(this._embedded,e,d?.embedded);return this._privyInternal.callbacks?.setUser?.(f.user),f}async linkWithCode(a,b){await this._privyInternal.fetch(a8,{body:{phoneNumber:a,code:b}});let c=await this._privyInternal.refreshSession();return{user:c.user,identity_token:c.identity_token}}async updatePhone({oldPhoneNumber:a,newPhoneNumber:b,code:c}){await this._privyInternal.fetch(ba,{body:{old_phone_number:a,new_phone_number:b,code:c}});let d=await this._privyInternal.refreshSession();return{user:d.user,identity_token:d.identity_token}}async unlink(a){await this._privyInternal.fetch(a9,{body:{phoneNumber:a}});let b=await this._privyInternal.refreshSession();return{user:b.user,identity_token:b.identity_token}}constructor(a,b){this._privyInternal=a,this._embedded=b}}let bc={path:"/api/v1/siwe/init",method:"POST"},bd={path:"/api/v1/siwe/authenticate",method:"POST"},be={path:"/api/v1/siwe/link",method:"POST"},bf={path:"/api/v1/siwe/link_smart_wallet",method:"POST"},bg={path:"/api/v1/siwe/unlink",method:"POST"};class bh{async unlinkWallet(a){await this._privyInternal.fetch(bg,{body:{address:a}});let b=await this._privyInternal.refreshSession();return{user:b.user,identity_token:b.identity_token}}async linkWithSiwe(a,b,c){let d=b||this._wallet,e=c||this._preparedMessage;if(!d)throw Error("A wallet must be provided in the init step or as an argument to linkWithSiwe");if(!e)throw Error("A message must be generated and signed before being used to link a wallet to privy");await this._privyInternal.fetch(be,{body:{message:e,signature:a,chainId:d.chainId,walletClientType:d.walletClientType??null,connectorType:d.connectorType??null}});let f=await this._privyInternal.refreshSession();return{user:f.user,identity_token:f.identity_token}}async loginWithSiwe(a,b,c,d,e){let f=b||this._wallet,g=c||this._preparedMessage;if(!f)throw Error("A wallet must be provided in the init step or as an argument to loginWithSiwe");if(!g)throw Error("A message must be generated and signed before being used to login to privy with a wallet");let h=await this._privyInternal.fetch(bd,{body:{signature:a,message:g,chainId:f.chainId,walletClientType:f.walletClientType??null,connectorType:f.connectorType??null,mode:d}});await this._privyInternal.session.updateWithTokensResponse(h);let i=await ay(this._embedded,h,e?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}async init(a,b,c){var d;this._wallet=a;let{nonce:e}=await this._privyInternal.fetch(bc,{body:{address:a.address}}),f=`${(d={chainId:a.chainId.toString().replace("eip155:",""),address:a.address,issuedAt:(new Date).toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:b,nonce:e,uri:c}).domain} wants you to sign in with your Ethereum account:
${d.address}

${d.statement}

URI: ${d.uri}
Version: 1
Chain ID: ${d.chainId}
Nonce: ${d.nonce}
Issued At: ${d.issuedAt}
Resources:
- https://privy.io`;return this._preparedMessage=f,{nonce:e,message:f}}constructor(a,b){this._wallet=void 0,this._privyInternal=a,this._embedded=b}}let bi={path:"/api/v1/siws/init",method:"POST"},bj={path:"/api/v1/siws/authenticate",method:"POST"},bk={path:"/api/v1/siws/link",method:"POST"},bl={path:"/api/v1/siws/unlink",method:"POST"};class bm{async unlink({address:a}){await this._privyInternal.fetch(bl,{body:{address:a}});let b=await this._privyInternal.refreshSession();return{user:b.user,identity_token:b.identity_token}}async link({message:a,signature:b,walletClientType:c,connectorType:d}){await this._privyInternal.fetch(bk,{body:{message:a,signature:b,walletClientType:c??null,connectorType:d??null}});let e=await this._privyInternal.refreshSession();return{user:e.user,identity_token:e.identity_token}}async login({mode:a,message:b,signature:c,walletClientType:d,connectorType:e,opts:f}){let g=await this._privyInternal.fetch(bj,{body:{signature:c,message:b,walletClientType:d??null,connectorType:e??null,mode:a}});await this._privyInternal.session.updateWithTokensResponse(g);let h=await ay(this._embedded,g,f?.embedded);return this._privyInternal.callbacks?.setUser?.(h.user),h}async fetchNonce({address:a}){let{nonce:b}=await this._privyInternal.fetch(bi,{body:{address:a}});return{nonce:b}}constructor(a,b){this._privyInternal=a,this._embedded=b}}class bn{async link(a,b,c,d){await this._privyInternal.fetch(bf,{body:{message:a,signature:b,smart_wallet_type:c,smart_wallet_version:d}});let e=await this._privyInternal.refreshSession();return{user:e.user,identity_token:e.identity_token}}async init(a){var b;let{nonce:c}=await this._privyInternal.fetch(bc,{body:{address:a.address}});return{nonce:c,message:`${(b={chainId:a.chainId.toString().replace("eip155:",""),address:a.address,issuedAt:(new Date).toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:"privy.io",uri:"https://auth.privy.io",nonce:c}).domain} wants you to sign in with your Ethereum account:
${b.address}

${b.statement}

URI: ${b.uri}
Version: 1
Chain ID: ${b.chainId}
Nonce: ${b.nonce}
Issued At: ${b.issuedAt}
Resources:
- https://privy.io`}}constructor(a){this._privyInternal=a}}class bo{async logout(a){try{let a=await this._privyInternal.session.getRefreshToken()??void 0;await this._privyInternal.fetch($,{body:{refresh_token:a}})}catch(a){console.warn("Error destroying session")}await Promise.all([this._privyInternal.session.destroyLocalState({reason:"logout"}),this._privyInternal.destroyClientAnalyticsId(),a?.userId&&this._mfa.clearMfa({userId:a.userId})]),this._privyInternal.callbacks?.setUser?.(null)}constructor(a,b,c,d,e){this._privyInternal=a,this._mfa=e,this.customProvider=new az(this._privyInternal,b),this.phone=new bb(this._privyInternal,b),this.email=new aF(this._privyInternal,b),this.oauth=new a$(this._privyInternal,b,c,d),this.guest=new aQ(this._privyInternal,b),this.siwe=new bh(this._privyInternal,b),this.siws=new bm(this._privyInternal,b),this.smartWallet=new bn(this._privyInternal),this.passkey=new a5(this._privyInternal,b),this.farcaster=new aN(this._privyInternal,b),this.farcasterV2=new aO(this._privyInternal,b)}}let bp={path:"/api/v1/funding/coinbase_on_ramp/init",method:"POST"},bq={path:"/api/v1/funding/coinbase_on_ramp/status",method:"GET"};class br{async initOnRampSession(a){return await this._privyInternal.fetch(bp,{body:a})}async getStatus(a){return await this._privyInternal.fetch(bq,{query:{partnerUserId:a}})}constructor(a){this._privyInternal=a}}let bs={path:"/api/v1/plugins/moonpay_on_ramp/sign",method:"POST"};var bt=a.i(675728);class bu{async sign(a){return await this._privyInternal.fetch(bs,{body:a})}async getTransactionStatus({transactionId:a,useSandbox:b}){let{url:c,key:d}=bt.MoonpayEnvironments[b?"sandbox":"prod"],e=await (0,N.default)(fetch,{retries:3,retryDelay:500})(`${c}/transactions/ext/${a}?apiKey=${d}`);if(!e.ok)throw new g.MoonpayApiError({error:`Failed to fetch transaction status for Transaction ${a}`,code:"failed_to_fetch_moonpay_transaction_status",response:e});let f=await e.json();return Array.isArray(f)?f.at(0):void 0}constructor(a){this._privyInternal=a}}class bv{constructor(a){this.moonpay=new bu(a),this.coinbase=new br(a)}}let bw={path:"/api/v1/mfa/passkeys/init",method:"POST"};class bx{async generateAuthenticationOptions(a){return await this._privyInternal.fetch(bw,{body:a})}constructor(a){this._privyInternal=a}}let by={path:"/api/v1/mfa/passwordless_sms/init",method:"POST"};class bz{async sendCode(a){return await this._privyInternal.fetch(by,{body:a})}constructor(a){this._privyInternal=a}}class bA{setProxy(a){this.proxy=a}async getAccessTokenInternal(){let a=await this.privyInternal.getAccessTokenInternal();if(!a)throw new g.PrivyClientError({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return a}async verifyMfa(){if(!this.proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.verifyMfa({accessToken:await this.getAccessTokenInternal()})}async initEnrollMfa(a){if(!this.proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.initEnrollMfa({...a,accessToken:await this.getAccessTokenInternal()})}async submitEnrollMfa(a){if(!this.proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let b=await this.proxy.submitEnrollMfa({...a,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),b}async unenrollMfa(a){if(!this.proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let b=await this.proxy.unenrollMfa({method:a,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),b}async clearMfa(a){if(!this.proxy)throw new g.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.clearMfa(a)}constructor(a,b){this.proxy=b,this.privyInternal=a,this.sms=new bz(a),this.passkey=new bx(a)}}let bB={path:"/api/v1/embedded_wallets/:address/recovery/key_material",method:"POST"},bC={path:"/api/v1/recovery/oauth/init",method:"POST"},bD={path:"/api/v1/recovery/oauth/authenticate",method:"POST"},bE={path:"/api/v1/recovery/oauth/init_icloud",method:"POST"},bF={path:"/api/v1/recovery/configuration_icloud",method:"POST"},bG=class{async init(a){return this._privyInternal.fetch(bE,{body:{client_type:a}})}async getICloudConfiguration(a){return this._privyInternal.fetch(bF,{body:{client_type:a}})}constructor(a){this._privyInternal=a}};class bH{async generateURL(a){let b=aY(),c=aY(),d=await aZ({codeVerifier:b,digest:this._crypto?.digest});return await Promise.all([this._storage.put(aW,b),this._storage.put(aV,c)]),this._privyInternal.fetch(bC,{body:{redirect_to:a,code_challenge:d,state_code:c}})}async authorize(a,b){let[c,d]=await Promise.all([this._storage.get(aW),this._storage.get(aV)]);if(d!==b)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"recovery_oauth",storedStateCode:d??"",returnedStateCode:b??""}),new g.PrivyClientError({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let e=await this._privyInternal.fetch(bD,{body:{authorization_code:a,state_code:d,code_verifier:c}});return await Promise.all([this._storage.del(aW),this._storage.del(aV)]),e}constructor(a,b,c){this._privyInternal=a,this._storage=b,this._crypto=c}}class bI{async getRecoveryKeyMaterial(a,b){return this._privyInternal.fetch(bB,{body:{chain_type:b},params:{address:a}})}constructor(a,b,c){this._privyInternal=a,this.auth=new bH(this._privyInternal,b,c),this.icloudAuth=new bG(this._privyInternal)}}class bJ{async initialize(){await this._privyInternal._initialize()}setMessagePoster(a){this.embeddedWallet.setMessagePoster(a)}addOAuthTokensListener(a){return this._privyInternal.session.on("oauth_tokens_granted",a),{unsubscribe:()=>{this._privyInternal.session.removeListener("oauth_tokens_granted",a)}}}setCallbacks(a){this._privyInternal.setCallbacks(a)}getAccessToken(){return this._privyInternal.getAccessToken()}getIdentityToken(){return this._privyInternal.getIdentityToken()}getCompiledPath(a,b){return this._privyInternal.getPath(a,b)}async fetchPrivyRoute(a,b){return this._privyInternal.fetch(a,b)}get logger(){return this._privyInternal.logger}constructor({clientId:a,...e}){this._privyInternal=new aq({...e,appClientId:a}),this.mfa=new bA(this._privyInternal),this.mfaPromises=new M,this.app=new b.default(this._privyInternal),this.embeddedWallet=new L(this._privyInternal,e.embeddedWalletMessagePoster,e.supportedChains,this.mfa,this.mfaPromises,this.app),this.user=new as(this._privyInternal),this.auth=new bo(this._privyInternal,this.embeddedWallet,e.storage,e.crypto,this.mfa),this.recovery=new bI(this._privyInternal,e.storage,e.crypto),this.funding=new bv(this._privyInternal),this.delegated=new d.default(this._privyInternal),this.crossApp=new c.default(this._privyInternal,e.storage)}}a.s(["default",()=>bJ],278223)},626961,a=>{"use strict";function b([a,b]){return`${a}=${function a(b){return Array.isArray(b)?"%5B"+b.map(a).join("%2C%20")+"%5D":"bigint"==typeof b?`${b}n`:encodeURIComponent(String(null!=b&&null===Object.getPrototypeOf(b)?{...b}:b))}(b)}`}function c(a,b){return a instanceof Error&&"SolanaError"===a.name&&(void 0===b||a.context.__code===b)}var d=class extends Error{cause=this.cause;context;constructor(...[a,c]){let d,e;c&&Object.entries(Object.getOwnPropertyDescriptors(c)).forEach(([a,b])=>{"cause"===a?e={cause:b.value}:(void 0===d&&(d={}),Object.defineProperty(d,a,b))}),super(function(a,c={}){{let d,e=`Solana error #${a}; Decode this error by running \`npx @solana/errors decode -- ${a}`;return Object.keys(c).length&&(e+=` '${d=Object.entries(c).map(b).join("&"),Buffer.from(d,"utf8").toString("base64")}'`),`${e}\``}}(a,d),e),this.context=void 0===d?{}:d,this.context.__code=a,this.name="SolanaError"}};function e(...a){"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(...a)}function f({errorCodeBaseOffset:a,getErrorContext:b,orderedErrorNames:c,rpcEnumError:f},g){let h,i;"string"==typeof f?h=f:(h=Object.keys(f)[0],i=f[h]);let j=a+c.indexOf(h),k=b(j,h,i),l=new d(j,k);return e(l,g),l}var g=["GenericError","InvalidArgument","InvalidInstructionData","InvalidAccountData","AccountDataTooSmall","InsufficientFunds","IncorrectProgramId","MissingRequiredSignature","AccountAlreadyInitialized","UninitializedAccount","UnbalancedInstruction","ModifiedProgramId","ExternalAccountLamportSpend","ExternalAccountDataModified","ReadonlyLamportChange","ReadonlyDataModified","DuplicateAccountIndex","ExecutableModified","RentEpochModified","NotEnoughAccountKeys","AccountDataSizeChanged","AccountNotExecutable","AccountBorrowFailed","AccountBorrowOutstanding","DuplicateAccountOutOfSync","Custom","InvalidError","ExecutableDataModified","ExecutableLamportChange","ExecutableAccountNotRentExempt","UnsupportedProgramId","CallDepth","MissingAccount","ReentrancyNotAllowed","MaxSeedLengthExceeded","InvalidSeeds","InvalidRealloc","ComputationalBudgetExceeded","PrivilegeEscalation","ProgramEnvironmentSetupFailure","ProgramFailedToComplete","ProgramFailedToCompile","Immutable","IncorrectAuthority","BorshIoError","AccountNotRentExempt","InvalidAccountOwner","ArithmeticOverflow","UnsupportedSysvar","IllegalOwner","MaxAccountsDataAllocationsExceeded","MaxAccountsExceeded","MaxInstructionTraceLengthExceeded","BuiltinProgramsMustConsumeComputeUnits"],h=["AccountInUse","AccountLoadedTwice","AccountNotFound","ProgramAccountNotFound","InsufficientFundsForFee","InvalidAccountForFee","AlreadyProcessed","BlockhashNotFound","CallChainTooDeep","MissingSignatureForFee","InvalidAccountIndex","SignatureFailure","InvalidProgramForExecution","SanitizeFailure","ClusterMaintenance","AccountBorrowOutstanding","WouldExceedMaxBlockCostLimit","UnsupportedVersion","InvalidWritableAccount","WouldExceedMaxAccountCostLimit","WouldExceedAccountDataBlockLimit","TooManyAccountLocks","AddressLookupTableNotFound","InvalidAddressLookupTableOwner","InvalidAddressLookupTableData","InvalidAddressLookupTableIndex","InvalidRentPayingAccount","WouldExceedMaxVoteCostLimit","WouldExceedAccountDataTotalLimit","DuplicateInstruction","InsufficientFundsForRent","MaxLoadedAccountsDataSizeExceeded","InvalidLoadedAccountsDataSizeLimit","ResanitizationNeeded","ProgramExecutionTemporarilyRestricted","UnbalancedTransaction"];function i(a){return"object"==typeof a&&"InstructionError"in a?function a(b,c){let d=Number(b);return f({errorCodeBaseOffset:4615001,getErrorContext:(a,b,c)=>4615e3===a?{errorName:b,index:d,...void 0!==c?{instructionErrorContext:c}:null}:4615026===a?{code:Number(c),index:d}:{index:d},orderedErrorNames:g,rpcEnumError:c},a)}(...a.InstructionError):f({errorCodeBaseOffset:7050001,getErrorContext:(a,b,c)=>705e4===a?{errorName:b,...void 0!==c?{transactionErrorContext:c}:null}:7050030===a?{index:Number(c)}:7050031===a||7050035===a?{accountIndex:Number(c.account_index)}:void 0,orderedErrorNames:h,rpcEnumError:a},i)}function j(a){var b;let c;if("object"==typeof(b=a)&&null!==b&&"code"in b&&"message"in b&&("number"==typeof b.code||"bigint"==typeof b.code)&&"string"==typeof b.message){let{code:b,data:e,message:f}=a,g=Number(b);if(-32002===g){let{err:a,...b}=e,f=a?{cause:i(a)}:null;c=new d(-32002,{...b,...f})}else{let a;switch(g){case -32603:case -32602:case -32600:case -32601:case -32700:case -32012:case -32001:case -32004:case -32014:case -32010:case -32009:case -32007:case -32006:case -32015:a={__serverMessage:f};break;default:"object"!=typeof e||Array.isArray(e)||(a=e)}c=new d(g,a)}}else{let b="object"==typeof a&&null!==a&&"message"in a&&"string"==typeof a.message?a.message:"Malformed JSON-RPC error with no message attribute";c=new d(10,{error:a,message:b})}return e(c,j),c}a.s(["SOLANA_ERROR__ACCOUNTS__ACCOUNT_NOT_FOUND",()=>323e4,"SOLANA_ERROR__ACCOUNTS__EXPECTED_ALL_ACCOUNTS_TO_BE_DECODED",()=>3230004,"SOLANA_ERROR__ACCOUNTS__EXPECTED_DECODED_ACCOUNT",()=>3230003,"SOLANA_ERROR__ACCOUNTS__FAILED_TO_DECODE_ACCOUNT",()=>3230002,"SOLANA_ERROR__ACCOUNTS__ONE_OR_MORE_ACCOUNTS_NOT_FOUND",()=>0x1ecdbe1,"SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED",()=>2800009,"SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH",()=>28e5,"SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY",()=>2800003,"SOLANA_ERROR__ADDRESSES__INVALID_OFF_CURVE_ADDRESS",()=>2800011,"SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE",()=>2800008,"SOLANA_ERROR__ADDRESSES__MALFORMED_PDA",()=>2800004,"SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED",()=>2800006,"SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED",()=>2800007,"SOLANA_ERROR__ADDRESSES__PDA_BUMP_SEED_OUT_OF_RANGE",()=>2800005,"SOLANA_ERROR__ADDRESSES__PDA_ENDS_WITH_PDA_MARKER",()=>2800010,"SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE",()=>2800001,"SOLANA_ERROR__BLOCKHASH_STRING_LENGTH_OUT_OF_RANGE",()=>4,"SOLANA_ERROR__BLOCK_HEIGHT_EXCEEDED",()=>1,"SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY",()=>8078e3,"SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS",()=>8078022,"SOLANA_ERROR__CODECS__ENCODED_BYTES_MUST_NOT_INCLUDE_SENTINEL",()=>8078020,"SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH",()=>8078005,"SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH",()=>8078006,"SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH",()=>8078004,"SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE",()=>8078008,"SOLANA_ERROR__CODECS__EXPECTED_DECODER_TO_CONSUME_ENTIRE_BYTE_ARRAY",()=>8078023,"SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH",()=>8078002,"SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH",()=>8078013,"SOLANA_ERROR__CODECS__EXPECTED_VARIABLE_LENGTH",()=>8078003,"SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH",()=>8078001,"SOLANA_ERROR__CODECS__INVALID_CONSTANT",()=>8078018,"SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT",()=>8078009,"SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT",()=>8078010,"SOLANA_ERROR__CODECS__INVALID_LITERAL_UNION_VARIANT",()=>8078015,"SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS",()=>8078007,"SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE",()=>8078012,"SOLANA_ERROR__CODECS__LITERAL_UNION_DISCRIMINATOR_OUT_OF_RANGE",()=>8078016,"SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE",()=>8078011,"SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE",()=>8078014,"SOLANA_ERROR__CODECS__SENTINEL_MISSING_IN_DECODED_BYTES",()=>8078021,"SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE",()=>8078017,"SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED",()=>3611e3,"SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM",()=>4615026,"SOLANA_ERROR__INSTRUCTION_PLANS__EMPTY_INSTRUCTION_PLAN",()=>7618002,"SOLANA_ERROR__INSTRUCTION_PLANS__FAILED_TO_EXECUTE_TRANSACTION_PLAN",()=>7618003,"SOLANA_ERROR__INSTRUCTION_PLANS__MESSAGE_CANNOT_ACCOMMODATE_PLAN",()=>7618e3,"SOLANA_ERROR__INSTRUCTION_PLANS__MESSAGE_PACKER_ALREADY_COMPLETE",()=>7618001,"SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_ACCOUNTS",()=>4128e3,"SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_DATA",()=>4128001,"SOLANA_ERROR__INSTRUCTION__PROGRAM_ID_MISMATCH",()=>4128002,"SOLANA_ERROR__INVALID_BLOCKHASH_BYTE_LENGTH",()=>5,"SOLANA_ERROR__INVALID_NONCE",()=>2,"SOLANA_ERROR__INVARIANT_VIOLATION__DATA_PUBLISHER_CHANNEL_UNIMPLEMENTED",()=>9900004,"SOLANA_ERROR__INVARIANT_VIOLATION__INVALID_INSTRUCTION_PLAN_KIND",()=>9900005,"SOLANA_ERROR__INVARIANT_VIOLATION__INVALID_TRANSACTION_PLAN_KIND",()=>9900006,"SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_MUST_NOT_POLL_BEFORE_RESOLVING_EXISTING_MESSAGE_PROMISE",()=>9900001,"SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_STATE_MISSING",()=>99e5,"SOLANA_ERROR__INVARIANT_VIOLATION__SWITCH_MUST_BE_EXHAUSTIVE",()=>9900003,"SOLANA_ERROR__KEYS__INVALID_KEY_PAIR_BYTE_LENGTH",()=>3704e3,"SOLANA_ERROR__KEYS__INVALID_PRIVATE_KEY_BYTE_LENGTH",()=>3704001,"SOLANA_ERROR__KEYS__INVALID_SIGNATURE_BYTE_LENGTH",()=>3704002,"SOLANA_ERROR__KEYS__PUBLIC_KEY_MUST_MATCH_PRIVATE_KEY",()=>3704004,"SOLANA_ERROR__KEYS__SIGNATURE_STRING_LENGTH_OUT_OF_RANGE",()=>3704003,"SOLANA_ERROR__LAMPORTS_OUT_OF_RANGE",()=>6,"SOLANA_ERROR__MALFORMED_BIGINT_STRING",()=>7,"SOLANA_ERROR__MALFORMED_NUMBER_STRING",()=>8,"SOLANA_ERROR__NONCE_ACCOUNT_NOT_FOUND",()=>3,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CANNOT_CREATE_SUBSCRIPTION_PLAN",()=>819e4,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CLOSED_BEFORE_MESSAGE_BUFFERED",()=>8190002,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CONNECTION_CLOSED",()=>8190003,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_FAILED_TO_CONNECT",()=>8190004,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__EXPECTED_SERVER_SUBSCRIPTION_ID",()=>8190001,"SOLANA_ERROR__RPC__API_PLAN_MISSING_FOR_RPC_METHOD",()=>8100003,"SOLANA_ERROR__RPC__INTEGER_OVERFLOW",()=>81e5,"SOLANA_ERROR__RPC__TRANSPORT_HTTP_ERROR",()=>8100002,"SOLANA_ERROR__RPC__TRANSPORT_HTTP_HEADER_FORBIDDEN",()=>8100001,"SOLANA_ERROR__SIGNER__ADDRESS_CANNOT_HAVE_MULTIPLE_SIGNERS",()=>5508e3,"SOLANA_ERROR__SIGNER__EXPECTED_KEY_PAIR_SIGNER",()=>5508001,"SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_MODIFYING_SIGNER",()=>5508003,"SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_PARTIAL_SIGNER",()=>5508004,"SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_SIGNER",()=>5508002,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_MODIFYING_SIGNER",()=>5508006,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_PARTIAL_SIGNER",()=>5508007,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SENDING_SIGNER",()=>5508008,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SIGNER",()=>5508005,"SOLANA_ERROR__SIGNER__TRANSACTION_CANNOT_HAVE_MULTIPLE_SENDING_SIGNERS",()=>5508009,"SOLANA_ERROR__SIGNER__TRANSACTION_SENDING_SIGNER_MISSING",()=>5508010,"SOLANA_ERROR__SUBTLE_CRYPTO__CANNOT_EXPORT_NON_EXTRACTABLE_KEY",()=>3610007,"SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED",()=>3610001,"SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED",()=>3610002,"SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED",()=>3610003,"SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED",()=>3610004,"SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED",()=>3610005,"SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED",()=>3610006,"SOLANA_ERROR__TIMESTAMP_OUT_OF_RANGE",()=>9,"SOLANA_ERROR__TRANSACTION__ADDRESSES_CANNOT_SIGN_TRANSACTION",()=>5663015,"SOLANA_ERROR__TRANSACTION__CANNOT_ENCODE_WITH_EMPTY_SIGNATURES",()=>5663016,"SOLANA_ERROR__TRANSACTION__EXCEEDS_SIZE_LIMIT",()=>5663020,"SOLANA_ERROR__TRANSACTION__EXPECTED_BLOCKHASH_LIFETIME",()=>5663002,"SOLANA_ERROR__TRANSACTION__EXPECTED_NONCE_LIFETIME",()=>5663003,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_CONTENTS_MISSING",()=>5663005,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_INDEX_OUT_OF_RANGE",()=>5663006,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_FEE_PAYER_MISSING",()=>5663008,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_INSTRUCTION_PROGRAM_ADDRESS_NOT_FOUND",()=>5663007,"SOLANA_ERROR__TRANSACTION__FAILED_TO_ESTIMATE_COMPUTE_LIMIT",()=>5663018,"SOLANA_ERROR__TRANSACTION__FAILED_WHEN_SIMULATING_TO_ESTIMATE_COMPUTE_LIMIT",()=>5663019,"SOLANA_ERROR__TRANSACTION__FEE_PAYER_SIGNATURE_MISSING",()=>5663012,"SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_CANNOT_PAY_FEES",()=>5663e3,"SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE",()=>5663001,"SOLANA_ERROR__TRANSACTION__MESSAGE_SIGNATURES_MISMATCH",()=>5663017,"SOLANA_ERROR__TRANSACTION__NONCE_ACCOUNT_CANNOT_BE_IN_LOOKUP_TABLE",()=>5663022,"SOLANA_ERROR__TRANSACTION__SIGNATURES_MISSING",()=>5663009,"SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_NOT_SUPPORTED",()=>5663021,"SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_OUT_OF_RANGE",()=>5663004,"SolanaError",()=>d,"getSolanaErrorFromJsonRpcError",()=>j,"getSolanaErrorFromTransactionError",()=>i,"isSolanaError",()=>c,"safeCaptureStackTrace",()=>e])},865177,a=>{"use strict";a.i(626961);var b,c=((b=c||{})[b.WRITABLE_SIGNER=3]="WRITABLE_SIGNER",b[b.READONLY_SIGNER=2]="READONLY_SIGNER",b[b.WRITABLE=1]="WRITABLE",b[b.READONLY=0]="READONLY",b);function d(a){return a>=2}function e(a){return(1&a)!=0}function f(a,b){return a|b}function g(a){return 2|a}a.s(["AccountRole",()=>c,"isSignerRole",()=>d,"isWritableRole",()=>e,"mergeRoles",()=>f,"upgradeRoleToSigner",()=>g])},683402,941342,527394,778283,a=>{"use strict";var b,c,d,e=a.i(626961);function f(a,b,c){let d=0===c&&a.length===b.length?a:a.slice(c,c+b.length);return d.length===b.length&&b.every((a,b)=>a===d[b])}function g(a,b){return"fixedSize"in b?b.fixedSize:b.getSizeFromValue(a)}function h(a){return Object.freeze({...a,encode:b=>{let c=new Uint8Array(g(b,a));return a.write(b,c,0),c}})}function i(a){return Object.freeze({...a,decode:(b,c=0)=>a.read(b,c)[0]})}function j(a){return"fixedSize"in a&&"number"==typeof a.fixedSize}function k(a){if(!j(a))throw new e.SolanaError(e.SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH)}function l(a,b){if(j(a)!==j(b))throw new e.SolanaError(e.SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH);if(j(a)&&j(b)&&a.fixedSize!==b.fixedSize)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH,{decoderFixedSize:b.fixedSize,encoderFixedSize:a.fixedSize});if(!j(a)&&!j(b)&&a.maxSize!==b.maxSize)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH,{decoderMaxSize:b.maxSize,encoderMaxSize:a.maxSize});return{...b,...a,decode:b.decode,encode:a.encode,read:b.read,write:a.write}}function m(a,b,c=0){if(b.length-c<=0)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY,{codecDescription:a})}function n(a,b,c,d=0){let f=c.length-d;if(f<b)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH,{bytesLength:f,codecDescription:a,expected:b})}function o(a,b,c){if(b<0||b>c)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE,{bytesLength:c,codecDescription:a,offset:b})}function p(a,b){let c=(c,d,e)=>{let f=a.encode(c);return e=b.write(f.length,d,e),d.set(f,e),e+f.length};if(j(b)&&j(a))return h({...a,fixedSize:b.fixedSize+a.fixedSize,write:c});let d=j(b)?b.fixedSize:b.maxSize??null,e=j(a)?a.fixedSize:a.maxSize??null,f=null!==d&&null!==e?d+e:null;return h({...a,...null!==f?{maxSize:f}:{},getSizeFromValue:c=>{let d=g(c,a);return g(d,b)+d},write:c})}function q(a,b){let c=(c,d)=>{let[e,f]=b.read(c,d),g=Number(e);return((d=f)>0||c.length>g)&&(c=c.slice(d,d+g)),n("addDecoderSizePrefix",g,c),[a.decode(c),d+g]};if(j(b)&&j(a))return i({...a,fixedSize:b.fixedSize+a.fixedSize,read:c});let d=j(b)?b.fixedSize:b.maxSize??null,e=j(a)?a.fixedSize:a.maxSize??null,f=null!==d&&null!==e?d+e:null;return i({...a,...null!==f?{maxSize:f}:{},read:c})}function r(a,b){return h({fixedSize:b,write:(c,d,e)=>{let f=a.encode(c),g=f.length>b?f.slice(0,b):f;return d.set(g,e),e+b}})}function s(a,b){return i({fixedSize:b,read:(c,d)=>{let e,f;n("fixCodecSize",b,c,d),(d>0||c.length>b)&&(c=c.slice(d,d+b)),j(a)&&(e=c,f=a.fixedSize,c=function(a,b){if(a.length>=b)return a;let c=new Uint8Array(b).fill(0);return c.set(a),c}(e.length<=f?e:e.slice(0,f),f));let[g]=a.read(c,0);return[g,d+b]}})}function t(a,b){return 0===b?0:(a%b+b)%b}function u(a,b){var c,d;return c=function(a,b){if(j(a)){let c=b(a.fixedSize);if(c<0)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH,{bytesLength:c,codecDescription:"resizeEncoder"});return h({...a,fixedSize:c})}return h({...a,getSizeFromValue:c=>{let d=b(a.getSizeFromValue(c));if(d<0)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH,{bytesLength:d,codecDescription:"resizeEncoder"});return d}})}(a,a=>a+b),d={preOffset:({preOffset:a})=>a+b},h({...c,write:(a,b,e)=>{let f=a=>t(a,b.length),g=d.preOffset?d.preOffset({bytes:b,preOffset:e,wrapBytes:f}):e;o("offsetEncoder",g,b.length);let h=c.write(a,b,g),i=d.postOffset?d.postOffset({bytes:b,newPreOffset:g,postOffset:h,preOffset:e,wrapBytes:f}):h;return o("offsetEncoder",i,b.length),i}})}function v(a,b){var c,d;return c=function(a,b){if(j(a)){let c=b(a.fixedSize);if(c<0)throw new e.SolanaError(e.SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH,{bytesLength:c,codecDescription:"resizeDecoder"});return i({...a,fixedSize:c})}return a}(a,a=>a+b),d={postOffset:({postOffset:a})=>a+b},i({...c,read:(a,b)=>{let e=b=>t(b,a.length),f=d.preOffset?d.preOffset({bytes:a,preOffset:b,wrapBytes:e}):b;o("offsetDecoder",f,a.length);let[g,h]=c.read(a,f),i=d.postOffset?d.postOffset({bytes:a,newPreOffset:f,postOffset:h,preOffset:b,wrapBytes:e}):h;return o("offsetDecoder",i,a.length),[g,i]}})}function w(a,b){return h({...!j(a)?{...a,getSizeFromValue:c=>a.getSizeFromValue(b(c))}:a,write:(c,d,e)=>a.write(b(c),d,e)})}function x(a,b){return i({...a,read:(c,d)=>{let[e,f]=a.read(c,d);return[b(e,c,d),f]}})}function y(a,b,c=b){if(!b.match(RegExp(`^[${a}]*$`)))throw new e.SolanaError(e.SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE,{alphabet:a,base:a.length,value:c})}function z(a,b){let[c,d]=a.split(RegExp(`((?!${b}).*)`));return[c,d]}function A(a,b){let c=BigInt(b.length),d=0n;for(let e of a)d*=c,d+=BigInt(b.indexOf(e));return d}a.s(["addDecoderSizePrefix",()=>q,"addEncoderSizePrefix",()=>p,"assertByteArrayHasEnoughBytesForCodec",()=>n,"assertByteArrayIsNotEmptyForCodec",()=>m,"assertIsFixedSize",()=>k,"combineCodec",()=>l,"containsBytes",()=>f,"createDecoder",()=>i,"createEncoder",()=>h,"fixDecoderSize",()=>s,"fixEncoderSize",()=>r,"getEncodedSize",()=>g,"isFixedSize",()=>j,"padLeftEncoder",()=>u,"padRightDecoder",()=>v,"transformDecoder",()=>x,"transformEncoder",()=>w],941342);var B="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",C=()=>h({getSizeFromValue:a=>{let[b,c]=z(a,B[0]);if(!c)return a.length;let d=A(c,B);return b.length+Math.ceil(d.toString(16).length/2)},write(a,b,c){if(y(B,a),""===a)return c;let[d,e]=z(a,B[0]);if(!e)return b.set(new Uint8Array(d.length).fill(0),c),c+d.length;let f=A(e,B),g=[];for(;f>0n;)g.unshift(Number(f%256n)),f/=256n;let h=[...Array(d.length).fill(0),...g];return b.set(h,c),c+h.length}}),D=()=>i({read(a,b){let c=0===b?a:a.slice(b);if(0===c.length)return["",0];let d=c.findIndex(a=>0!==a);d=-1===d?c.length:d;let e=B[0].repeat(d);return d===c.length?[e,a.length]:[e+function(a,b){let c=BigInt(b.length),d=[];for(;a>0n;)d.unshift(b[Number(a%c)]),a/=c;return d.join("")}(c.slice(d).reduce((a,b)=>256n*a+BigInt(b),0n),B),a.length]}}),E=()=>h({getSizeFromValue:a=>Buffer.from(a,"base64").length,write(a,b,c){y("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a.replace(/=/g,""));let d=Buffer.from(a,"base64");return b.set(d,c),d.length+c}}),F=()=>i({read:(a,b=0)=>[Buffer.from(a,b).toString("base64"),a.length]}),G=globalThis.TextDecoder,H=globalThis.TextEncoder,I=()=>{let a;return h({getSizeFromValue:b=>(a||=new H).encode(b).length,write:(b,c,d)=>{let e=(a||=new H).encode(b);return c.set(e,d),d+e.length}})},J=()=>{let a;return i({read:(b,c)=>[(a||=new G).decode(b.slice(c)).replace(/\u0000/g,""),b.length]})};function K(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.getRandomValues)throw new e.SolanaError(e.SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED)}async function L(a){return(void 0===b&&(b=new Promise(c=>{a.generateKey("Ed25519",!1,["sign","verify"]).then(()=>{c(b=!0)}).catch(()=>{c(b=!1)})})),"boolean"==typeof b)?b:await b}function M(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.digest)throw new e.SolanaError(e.SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED)}async function N(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.generateKey)throw new e.SolanaError(e.SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED);if(!await L(globalThis.crypto.subtle))throw new e.SolanaError(e.SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED)}function O(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.exportKey)throw new e.SolanaError(e.SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED)}function P(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.sign)throw new e.SolanaError(e.SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED)}function Q(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.verify)throw new e.SolanaError(e.SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED)}function R(){return c||(c=C()),c}function S(a){if(a.length<32||a.length>44)return!1;let b=R();try{return 32===b.encode(a).byteLength}catch{return!1}}function T(a){if(a.length<32||a.length>44)throw new e.SolanaError(e.SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE,{actualLength:a.length});let b=R().encode(a).byteLength;if(32!==b)throw new e.SolanaError(e.SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH,{actualLength:b})}function U(a){return T(a),a}function V(){return w(r(R(),32),a=>U(a))}function W(){return s((d||(d=D()),d),32)}function X(){return new Intl.Collator("en",{caseFirst:"lower",ignorePunctuation:!1,localeMatcher:"best fit",numeric:!1,sensitivity:"variant",usage:"sort"}).compare}function Y(a){let b=a%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn;return b>=0n?b:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn+b}function Z(a,b){let c=a;for(;b-- >0n;)c*=c,c%=0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn;return c}a.s(["getBase58Decoder",()=>D,"getBase58Encoder",()=>C,"getBase64Decoder",()=>F,"getBase64Encoder",()=>E,"getUtf8Decoder",()=>J,"getUtf8Encoder",()=>I],527394),a.s(["assertDigestCapabilityIsAvailable",()=>M,"assertKeyExporterIsAvailable",()=>O,"assertKeyGenerationIsAvailable",()=>N,"assertPRNGIsAvailable",()=>K,"assertSigningCapabilityIsAvailable",()=>P,"assertVerificationCapabilityIsAvailable",()=>Q],778283);var $=[80,114,111,103,114,97,109,68,101,114,105,118,101,100,65,100,100,114,101,115,115];async function _({programAddress:a,seeds:b}){let c;if(M(),b.length>16)throw new e.SolanaError(e.SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED,{actual:b.length,maxSeeds:16});let d=b.reduce((a,b,d)=>{let f="string"==typeof b?(c||=new TextEncoder).encode(b):b;if(f.byteLength>32)throw new e.SolanaError(e.SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED,{actual:f.byteLength,index:d,maxSeedLength:32});return a.push(...f),a},[]),f=l(V(),W()),g=f.encode(a),h=await crypto.subtle.digest("SHA-256",new Uint8Array([...d,...g,...$])),i=new Uint8Array(h);if(function(a){var b,c,d;let e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return 32===a.byteLength&&(e=a.reduce((a,b,c)=>{let d;return`${1===(d=(31===c?-129&b:b).toString(16)).length?`0${d}`:d}${a}`},""),b=BigInt(`0x${e}`),c=a[31],f=Y(b*b),g=Y(f-1n),h=Y(0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n*f+1n),i=Y(h*h*h),k=Z(j=(d=g*Y(i*i*h))*d%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn*d%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,2n)*j%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,l=Z(k,1n)*d%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,m=Z(l,5n)*l%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,n=Z(m,10n)*m%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,o=Z(n,20n)*n%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,p=Z(o,40n)*o%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,q=Z(p,80n)*p%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,r=Z(q,80n)*p%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,s=Z(r,10n)*m%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,t=Y(g*i*(Z(s,2n)*d%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn)),u=Y(h*t*t),v=t,w=Y(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*t),x=u===g,y=u===Y(-g),z=u===Y(-(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*g)),null!==(x&&(t=v),(y||z)&&(t=w),(1n&Y(t))===1n&&(t=Y(-t)),A=x||y?t:null)&&(0n!==A||(128&c)==0))}(i))throw new e.SolanaError(e.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE);return f.decode(i)}async function aa({programAddress:a,seeds:b}){let c=255;for(;c>0;)try{return[await _({programAddress:a,seeds:[...b,new Uint8Array([c])]}),c]}catch(a){if((0,e.isSolanaError)(a,e.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE))c--;else throw a}throw new e.SolanaError(e.SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED)}async function ab(a){if(O(),"public"!==a.type||"Ed25519"!==a.algorithm.name)throw new e.SolanaError(e.SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY);let b=await crypto.subtle.exportKey("raw",a);return W().decode(new Uint8Array(b))}a.s(["address",()=>U,"assertIsAddress",()=>T,"getAddressComparator",()=>X,"getAddressDecoder",()=>W,"getAddressEncoder",()=>V,"getAddressFromPublicKey",()=>ab,"getProgramDerivedAddress",()=>aa,"isAddress",()=>S],683402)},147037,a=>{"use strict";var b=a.i(778283),c=a.i(626961);a.i(527394);var d=Object.freeze({name:"Ed25519"});async function e(a,b=!1){let f=a.byteLength;if(32!==f)throw new c.SolanaError(c.SOLANA_ERROR__KEYS__INVALID_PRIVATE_KEY_BYTE_LENGTH,{actualLength:f});let g=new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32,...a]);return await crypto.subtle.importKey("pkcs8",g,d,b,["sign"])}async function f(a,d=!1){if((0,b.assertKeyExporterIsAvailable)(),!1===a.extractable)throw new c.SolanaError(c.SOLANA_ERROR__SUBTLE_CRYPTO__CANNOT_EXPORT_NON_EXTRACTABLE_KEY,{key:a});let e=await crypto.subtle.exportKey("jwk",a);return await crypto.subtle.importKey("jwk",{crv:"Ed25519",ext:d,key_ops:["verify"],kty:"OKP",x:e.x},"Ed25519",d,["verify"])}async function g(a,c){return(0,b.assertSigningCapabilityIsAvailable)(),new Uint8Array(await crypto.subtle.sign(d,a,c))}async function h(a,c,e){return(0,b.assertVerificationCapabilityIsAvailable)(),await crypto.subtle.verify(d,a,c,e)}async function i(){return await (0,b.assertKeyGenerationIsAvailable)(),await crypto.subtle.generateKey(d,!1,["sign","verify"])}async function j(a,f=!1){if((0,b.assertPRNGIsAvailable)(),64!==a.byteLength)throw new c.SolanaError(c.SOLANA_ERROR__KEYS__INVALID_KEY_PAIR_BYTE_LENGTH,{byteLength:a.byteLength});let[i,k]=await Promise.all([crypto.subtle.importKey("raw",a.slice(32),d,!0,["verify"]),e(a.slice(0,32),f)]),l=new Uint8Array(32);crypto.getRandomValues(l);let m=await g(k,l);if(!await h(i,m,l))throw new c.SolanaError(c.SOLANA_ERROR__KEYS__PUBLIC_KEY_MUST_MATCH_PRIVATE_KEY);return{privateKey:k,publicKey:i}}async function k(a,b=!1){let c=e(a,b),[d,g]=await Promise.all([(b?c:e(a,!0)).then(async a=>await f(a,!0)),c]);return{privateKey:g,publicKey:d}}a.s(["createKeyPairFromBytes",()=>j,"createKeyPairFromPrivateKeyBytes",()=>k,"generateKeyPair",()=>i,"signBytes",()=>g])},84235,727229,849470,a=>{"use strict";var b,c,d,e=a.i(941342),f=a.i(626961);function g(a,b,c,d){if(d<b||d>c)throw new f.SolanaError(f.SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE,{codecDescription:a,max:c,min:b,value:d})}var h=((b=h||{})[b.Little=0]="Little",b[b.Big=1]="Big",b);function i(a){return a?.endian!==1}function j(a){return(0,e.createEncoder)({fixedSize:a.size,write(b,c,d){a.range&&g(a.name,a.range[0],a.range[1],b);let e=new ArrayBuffer(a.size);return a.set(new DataView(e),b,i(a.config)),c.set(new Uint8Array(e),d),d+a.size}})}function k(a){return(0,e.createDecoder)({fixedSize:a.size,read(b,c=0){var d,f,g;let h,j;(0,e.assertByteArrayIsNotEmptyForCodec)(a.name,b,c),(0,e.assertByteArrayHasEnoughBytesForCodec)(a.name,a.size,b,c);let k=new DataView((d=b,f=c,g=a.size,h=d.byteOffset+(f??0),j=g??d.byteLength,d.buffer.slice(h,h+j)));return[a.get(k,i(a.config)),c+a.size]}})}var l=(a={})=>j({config:a,name:"f64",set:(a,b,c)=>a.setFloat64(0,Number(b),c),size:8}),m=(a={})=>k({config:a,get:(a,b)=>a.getFloat64(0,b),name:"f64",size:8}),n=(a={})=>j({config:a,name:"i16",range:[-Number("0x7fff")-1,Number("0x7fff")],set:(a,b,c)=>a.setInt16(0,Number(b),c),size:2}),o=(a={})=>k({config:a,get:(a,b)=>a.getInt16(0,b),name:"i16",size:2}),p=(a={})=>j({config:a,name:"i64",range:[-BigInt("0x7fffffffffffffff")-1n,BigInt("0x7fffffffffffffff")],set:(a,b,c)=>a.setBigInt64(0,BigInt(b),c),size:8}),q=(a={})=>k({config:a,get:(a,b)=>a.getBigInt64(0,b),name:"i64",size:8}),r=()=>j({name:"i8",range:[-Number("0x7f")-1,Number("0x7f")],set:(a,b)=>a.setInt8(0,Number(b)),size:1}),s=()=>k({get:a=>a.getInt8(0),name:"i8",size:1}),t=()=>(0,e.createEncoder)({getSizeFromValue:a=>a<=127?1:a<=16383?2:3,maxSize:3,write:(a,b,c)=>{g("shortU16",0,65535,a);let d=[0];for(let b=0;;b+=1){let c=Number(a)>>7*b;if(0===c)break;let e=127&c;d[b]=e,b>0&&(d[b-1]|=128)}return b.set(d,c),c+d.length}}),u=()=>(0,e.createDecoder)({maxSize:3,read:(a,b)=>{let c=0,d=0;for(;++d;){let e=d-1,f=a[b+e];if(c|=(127&f)<<7*e,(128&f)==0)break}return[c,b+d]}}),v=(a={})=>j({config:a,name:"u128",range:[0n,BigInt("0xffffffffffffffffffffffffffffffff")],set:(a,b,c)=>{let d=8*!!c,e=8*!c;a.setBigUint64(d,BigInt(b)>>64n,c),a.setBigUint64(e,0xffffffffffffffffn&BigInt(b),c)},size:16}),w=(a={})=>k({config:a,get:(a,b)=>{let c=8*!!b,d=8*!b;return(a.getBigUint64(c,b)<<64n)+a.getBigUint64(d,b)},name:"u128",size:16}),x=(a={})=>j({config:a,name:"u16",range:[0,Number("0xffff")],set:(a,b,c)=>a.setUint16(0,Number(b),c),size:2}),y=(a={})=>k({config:a,get:(a,b)=>a.getUint16(0,b),name:"u16",size:2}),z=(a={})=>j({config:a,name:"u32",range:[0,Number("0xffffffff")],set:(a,b,c)=>a.setUint32(0,Number(b),c),size:4}),A=(a={})=>k({config:a,get:(a,b)=>a.getUint32(0,b),name:"u32",size:4}),B=(a={})=>j({config:a,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(a,b,c)=>a.setBigUint64(0,BigInt(b),c),size:8}),C=(a={})=>k({config:a,get:(a,b)=>a.getBigUint64(0,b),name:"u64",size:8}),D=(a={})=>(0,e.combineCodec)(B(a),C(a)),E=()=>j({name:"u8",range:[0,Number("0xff")],set:(a,b)=>a.setUint8(0,Number(b)),size:1}),F=()=>k({get:a=>a.getUint8(0),name:"u8",size:1});function G(a,b,c){if(b!==c)throw new f.SolanaError(f.SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS,{actual:c,codecDescription:a,expected:b})}function H(a){return a.reduce((a,b)=>null===a||null===b?null:a+b,0)}function I(a){return(0,e.isFixedSize)(a)?a.fixedSize:null}function J(a){return(0,e.isFixedSize)(a)?a.fixedSize:a.maxSize??null}function K(a,b={}){let c=b.size??z(),d=N(c,I(a)),f=N(c,J(a))??void 0;return(0,e.createEncoder)({...null!==d?{fixedSize:d}:{getSizeFromValue:b=>("object"==typeof c?(0,e.getEncodedSize)(b.length,c):0)+[...b].reduce((b,c)=>b+(0,e.getEncodedSize)(c,a),0),maxSize:f},write:(b,d,e)=>("number"==typeof c&&G("array",c,b.length),"object"==typeof c&&(e=c.write(b.length,d,e)),b.forEach(b=>{e=a.write(b,d,e)}),e)})}function L(a,b={}){let c=b.size??A(),d=N(c,I(a)),f=N(c,J(a))??void 0;return(0,e.createDecoder)({...null!==d?{fixedSize:d}:{maxSize:f},read:(b,d)=>{let e=[];if("object"==typeof c&&0===b.slice(d).length)return[e,d];if("remainder"===c){for(;d<b.length;){let[c,f]=a.read(b,d);d=f,e.push(c)}return[e,d]}let[f,g]="number"==typeof c?[c,d]:c.read(b,d);d=g;for(let c=0;c<f;c+=1){let[c,f]=a.read(b,d);d=f,e.push(c)}return[e,d]}})}function M(a,b={}){return(0,e.combineCodec)(K(a,b),L(a,b))}function N(a,b){return"number"!=typeof a?null:0===a?0:null===b?null:b*a}function O(a={}){return(0,e.transformEncoder)(a.size??E(),a=>+!!a)}function P(a={}){return(0,e.transformDecoder)(a.size??F(),a=>1===Number(a))}function Q(){return(0,e.createEncoder)({getSizeFromValue:a=>a.length,write:(a,b,c)=>(b.set(a,c),c+a.length)})}function R(){return(0,e.createDecoder)({read:(a,b)=>{let c=a.slice(b);return[c,b+c.length]}})}function S(a){return(0,e.createEncoder)({fixedSize:a.length,write:(b,c,d)=>(c.set(a,d),d+a.length)})}function T(a){return(0,e.createDecoder)({fixedSize:a.length,read:(b,c)=>{let d=(0,e.createDecoder)({read:(a,b)=>[a.slice(b).reduce((a,b)=>a+b.toString(16).padStart(2,"0"),""),a.length]});if(!(0,e.containsBytes)(b,a,c))throw new f.SolanaError(f.SOLANA_ERROR__CODECS__INVALID_CONSTANT,{constant:a,data:b,hexConstant:d.decode(a),hexData:d.decode(b),offset:c});return[void 0,c+a.length]}})}function U(a){let b=H(a.map(I)),c=H(a.map(J))??void 0;return(0,e.createEncoder)({...null===b?{getSizeFromValue:b=>a.map((a,c)=>(0,e.getEncodedSize)(b[c],a)).reduce((a,b)=>a+b,0),maxSize:c}:{fixedSize:b},write:(b,c,d)=>(G("tuple",a.length,b.length),a.forEach((a,e)=>{d=a.write(b[e],c,d)}),d)})}function V(a){let b=H(a.map(I)),c=H(a.map(J))??void 0;return(0,e.createDecoder)({...null===b?{maxSize:c}:{fixedSize:b},read:(b,c)=>{let d=[];return a.forEach(a=>{let[e,f]=a.read(b,c);d.push(e),c=f}),[d,c]}})}function W(a,b){let c=Z(a),d=(c,d,e)=>{let f=b(c);return Y(a,f),a[f].write(c,d,e)};if(null!==c)return(0,e.createEncoder)({fixedSize:c,write:d});let f=$(a);return(0,e.createEncoder)({...null!==f?{maxSize:f}:{},getSizeFromValue:c=>{let d=b(c);return Y(a,d),(0,e.getEncodedSize)(c,a[d])},write:d})}function X(a,b){let c=Z(a),d=(c,d)=>{let e=b(c,d);return Y(a,e),a[e].read(c,d)};if(null!==c)return(0,e.createDecoder)({fixedSize:c,read:d});let f=$(a);return(0,e.createDecoder)({...null!==f?{maxSize:f}:{},read:d})}function Y(a,b){if(void 0===a[b])throw new f.SolanaError(f.SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE,{maxRange:a.length-1,minRange:0,variant:b})}function Z(a){if(0===a.length)return 0;if(!(0,e.isFixedSize)(a[0]))return null;let b=a[0].fixedSize;return a.every(a=>(0,e.isFixedSize)(a)&&a.fixedSize===b)?b:null}function $(a){return a.map(a=>J(a)).reduce((a,b)=>null===a||null===b?null:Math.max(a,b),0)}function _(a,b={}){let c=b.discriminator??"__kind",d=b.size??E();return W(a.map(([,a],b)=>(0,e.transformEncoder)(U([d,a]),a=>[b,a])),b=>(function(a,b){let c=a.findIndex(([a])=>b===a);if(c<0)throw new f.SolanaError(f.SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT,{value:b,variants:a.map(([a])=>a)});return c})(a,b[c]))}function aa(a,b={}){let c=b.discriminator??"__kind",d=b.size??F();return X(a.map(([a,b])=>(0,e.transformDecoder)(V([d,b]),([,b])=>({[c]:a,...b}))),(a,b)=>Number(d.read(a,b)[0]))}function ab(a){let b=[...new Set(Object.values(a).filter(a=>"number"==typeof a))].sort(),c=Object.fromEntries(Object.entries(a).slice(b.length)),d=Object.keys(c),e=Object.values(c),f=[...new Set([...d,...e.filter(a=>"string"==typeof a)])];return{enumKeys:d,enumRecord:c,enumValues:e,numericalValues:b,stringValues:f}}function ac(a,b){let c=a.length;for(;c--;)if(b(a[c],c,a))return c;return -1}function ad(a){if(0===a.length)return"";let b=[a[0],a[0]],c=[];for(let d=1;d<a.length;d++){let e=a[d];b[1]+1===e?b[1]=e:(c.push(b[0]===b[1]?`${b[0]}`:`${b[0]}-${b[1]}`),b=[e,e])}return c.push(b[0]===b[1]?`${b[0]}`:`${b[0]}-${b[1]}`),c.join(", ")}function ae(a,b={}){let c=b.size??E(),d=b.useValuesAsDiscriminators??!1,{enumKeys:g,enumValues:h,numericalValues:i,stringValues:j}=ab(a);if(d&&h.some(a=>"string"==typeof a))throw new f.SolanaError(f.SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS,{stringValues:h.filter(a=>"string"==typeof a)});return(0,e.transformEncoder)(c,a=>{let b=function({enumKeys:a,enumValues:b,variant:c}){let d=ac(b,a=>a===c);return d>=0?d:a.findIndex(a=>a===c)}({enumKeys:g,enumValues:h,variant:a});if(b<0)throw new f.SolanaError(f.SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT,{formattedNumericalValues:ad(i),numericalValues:i,stringValues:j,variant:a});return d?h[b]:b})}function af(a,b={}){let c=b.size??F(),d=b.useValuesAsDiscriminators??!1,{enumKeys:g,enumValues:h,numericalValues:i}=ab(a);if(d&&h.some(a=>"string"==typeof a))throw new f.SolanaError(f.SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS,{stringValues:h.filter(a=>"string"==typeof a)});return(0,e.transformDecoder)(c,a=>{let b=Number(a),c=function({discriminator:a,enumKeys:b,enumValues:c,useValuesAsDiscriminators:d}){return d?ac(c,b=>b===a):a>=0&&a<b.length?a:-1}({discriminator:b,enumKeys:g,enumValues:h,useValuesAsDiscriminators:d});if(c<0){let a=d?i:[...Array(g.length).keys()];throw new f.SolanaError(f.SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE,{discriminator:b,formattedValidDiscriminators:ad(a),validDiscriminators:a})}return h[c]})}function ag(a,b){return(0,e.transformEncoder)(U([...b,a]),a=>[...b.map(()=>void 0),a])}function ah(a,b){return(0,e.transformDecoder)(V([...b,a]),a=>a[a.length-1])}function ai(a,b,c={}){return(0,e.transformEncoder)(K(U([a,b]),c),a=>[...a.entries()])}function aj(a,b,c={}){return(0,e.transformDecoder)(L(V([a,b]),c),a=>new Map(a))}function ak(){return(0,e.createEncoder)({fixedSize:0,write:(a,b,c)=>c})}function al(){return(0,e.createDecoder)({fixedSize:0,read:(a,b)=>[void 0,b]})}function am(a){let b=a.map(([,a])=>a),c=H(b.map(I)),d=H(b.map(J))??void 0;return(0,e.createEncoder)({...null===c?{getSizeFromValue:b=>a.map(([a,c])=>(0,e.getEncodedSize)(b[a],c)).reduce((a,b)=>a+b,0),maxSize:d}:{fixedSize:c},write:(b,c,d)=>(a.forEach(([a,e])=>{d=e.write(b[a],c,d)}),d)})}function an(a){let b=a.map(([,a])=>a),c=H(b.map(I)),d=H(b.map(J))??void 0;return(0,e.createDecoder)({...null===c?{maxSize:d}:{fixedSize:c},read:(b,c)=>{let d={};return a.forEach(([a,e])=>{let[f,g]=e.read(b,c);c=g,d[a]=f}),[d,c]}})}a.s(["getF64Decoder",()=>m,"getF64Encoder",()=>l,"getI16Decoder",()=>o,"getI16Encoder",()=>n,"getI64Decoder",()=>q,"getI64Encoder",()=>p,"getI8Decoder",()=>s,"getI8Encoder",()=>r,"getShortU16Decoder",()=>u,"getShortU16Encoder",()=>t,"getU128Decoder",()=>w,"getU128Encoder",()=>v,"getU16Decoder",()=>y,"getU16Encoder",()=>x,"getU32Decoder",()=>A,"getU32Encoder",()=>z,"getU64Codec",()=>D,"getU64Decoder",()=>C,"getU64Encoder",()=>B,"getU8Decoder",()=>F,"getU8Encoder",()=>E],727229),a.s(["getArrayCodec",()=>M,"getArrayDecoder",()=>L,"getArrayEncoder",()=>K,"getBooleanDecoder",()=>P,"getBooleanEncoder",()=>O,"getBytesDecoder",()=>R,"getBytesEncoder",()=>Q,"getConstantDecoder",()=>T,"getConstantEncoder",()=>S,"getDiscriminatedUnionDecoder",()=>aa,"getDiscriminatedUnionEncoder",()=>_,"getEnumDecoder",()=>af,"getEnumEncoder",()=>ae,"getHiddenPrefixDecoder",()=>ah,"getHiddenPrefixEncoder",()=>ag,"getMapDecoder",()=>aj,"getMapEncoder",()=>ai,"getStructDecoder",()=>an,"getStructEncoder",()=>am,"getTupleDecoder",()=>V,"getTupleEncoder",()=>U,"getUnionDecoder",()=>X,"getUnionEncoder",()=>W,"getUnitDecoder",()=>al,"getUnitEncoder",()=>ak],84235);var ao=a.i(683402);function ap(a){return(0,ao.isAddress)(a)}function aq(){let a=(0,ao.getAddressEncoder)();return(0,e.createEncoder)({fixedSize:32,write:(b,c,d)=>{try{(0,ao.assertIsAddress)(b)}catch(a){if((0,f.isSolanaError)(a,f.SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE))throw new f.SolanaError(f.SOLANA_ERROR__BLOCKHASH_STRING_LENGTH_OUT_OF_RANGE,a.context);if((0,f.isSolanaError)(a,f.SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH))throw new f.SolanaError(f.SOLANA_ERROR__INVALID_BLOCKHASH_BYTE_LENGTH,a.context);throw a}return a.write(b,c,d)}})}function ar(){return(0,ao.getAddressDecoder)()}function as(a){return a}function at(a){return a}function au(a){switch(a){case"finalized":return 2;case"confirmed":return 1;case"processed":return 0;default:throw new f.SolanaError(f.SOLANA_ERROR__INVARIANT_VIOLATION__SWITCH_MUST_BE_EXHAUSTIVE,{unexpectedValue:a})}}function av(a,b){return a===b?0:au(a)<au(b)?-1:1}function aw(){return c||(c=B()),c}function ax(){var a;return a=(d||(d=C()),d),(0,e.transformDecoder)(a,a=>(function(a){if(a<0||a>0xffffffffffffffffn)throw new f.SolanaError(f.SOLANA_ERROR__LAMPORTS_OUT_OF_RANGE);return a})("bigint"==typeof a?a:BigInt(a)))}a.s(["commitmentComparator",()=>av,"devnet",()=>at,"getBlockhashDecoder",()=>ar,"getBlockhashEncoder",()=>aq,"getDefaultLamportsDecoder",()=>ax,"getDefaultLamportsEncoder",()=>aw,"isBlockhash",()=>ap,"mainnet",()=>as],849470)},587437,29943,a=>{"use strict";var b,c,d,e,f,g,h=a.i(626961),i=a.i(849470),j=a.i(683402),k=a.i(941342),l=a.i(84235),m=a.i(727229),n=a.i(865177);function o(a,...b){return b.reduce((a,b)=>b(a),a)}function p(a){return"lifetimeConstraint"in a&&"string"==typeof a.lifetimeConstraint.blockhash&&"bigint"==typeof a.lifetimeConstraint.lastValidBlockHeight&&(0,i.isBlockhash)(a.lifetimeConstraint.blockhash)}function q(a,b){return"lifetimeConstraint"in b&&b.lifetimeConstraint&&"blockhash"in b.lifetimeConstraint&&b.lifetimeConstraint.blockhash===a.blockhash&&b.lifetimeConstraint.lastValidBlockHeight===a.lastValidBlockHeight?b:Object.freeze({...b,lifetimeConstraint:Object.freeze(a)})}function r(a,b){let[c,d]=a.split(RegExp(`((?!${b}).*)`));return[c,d]}function s(a,b){let c=BigInt(b.length),d=0n;for(let e of a)d*=c,d+=BigInt(b.indexOf(e));return d}a.s(["pipe",()=>o],29943);var t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function u(){return d||(d=(0,m.getU8Encoder)()),d}function v(){return e||(e=(0,m.getU8Decoder)()),e}function w(){return(0,k.createDecoder)({maxSize:1,read:(a,b)=>{let c=a[b];if((128&c)==0)return["legacy",b];{let a=128^c;if(a>0)throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_NOT_SUPPORTED,{unsupportedVersion:a});return[a,b+1]}}})}function x(){return(0,l.getStructEncoder)(z())}function y(){return(0,k.transformEncoder)((0,l.getStructEncoder)([...z(),["addressTableLookups",(0,l.getArrayEncoder)(function(){if(!b){let a=(0,l.getArrayEncoder)((0,m.getU8Encoder)(),{size:(0,m.getShortU16Encoder)()});b=(0,l.getStructEncoder)([["lookupTableAddress",(0,j.getAddressEncoder)()],["writableIndexes",a],["readonlyIndexes",a]])}return b}(),{size:(0,m.getShortU16Encoder)()})]]),a=>"legacy"===a.version?a:{...a,addressTableLookups:a.addressTableLookups??[]})}function z(){let a=(0,l.getUnionEncoder)([(0,l.getConstantEncoder)(new Uint8Array(32)),(0,k.fixEncoderSize)((0,k.createEncoder)({getSizeFromValue:a=>{let[b,c]=r(a,t[0]);if(!c)return a.length;let d=s(c,t);return b.length+Math.ceil(d.toString(16).length/2)},write(a,b,c){if(!function(a,b,c=b){if(!b.match(RegExp(`^[${a}]*$`)))throw new h.SolanaError(h.SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE,{alphabet:a,base:a.length,value:c})}(t,a),""===a)return c;let[d,e]=r(a,t[0]);if(!e)return b.set(new Uint8Array(d.length).fill(0),c),c+d.length;let f=s(e,t),g=[];for(;f>0n;)g.unshift(Number(f%256n)),f/=256n;let i=[...Array(d.length).fill(0),...g];return b.set(i,c),c+i.length}}),32)],a=>+(void 0!==a));return[["version",(0,k.createEncoder)({getSizeFromValue:a=>+("legacy"!==a),maxSize:1,write:(a,b,c)=>{if("legacy"===a)return c;if(a<0||a>127)throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_OUT_OF_RANGE,{actualVersion:a});if(a>0)throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_NOT_SUPPORTED,{unsupportedVersion:a});return b.set([128|a],c),c+1}})],["header",(0,l.getStructEncoder)([["numSignerAccounts",u()],["numReadonlySignerAccounts",u()],["numReadonlyNonSignerAccounts",u()]])],["staticAccounts",(0,l.getArrayEncoder)((0,j.getAddressEncoder)(),{size:(0,m.getShortU16Encoder)()})],["lifetimeToken",a],["instructions",(0,l.getArrayEncoder)((f||(f=(0,k.transformEncoder)((0,l.getStructEncoder)([["programAddressIndex",(0,m.getU8Encoder)()],["accountIndices",(0,l.getArrayEncoder)((0,m.getU8Encoder)(),{size:(0,m.getShortU16Encoder)()})],["data",(0,k.addEncoderSizePrefix)((0,l.getBytesEncoder)(),(0,m.getShortU16Encoder)())]]),a=>void 0!==a.accountIndices&&void 0!==a.data?a:{...a,accountIndices:a.accountIndices??[],data:a.data??new Uint8Array(0)})),f),{size:(0,m.getShortU16Encoder)()})]]}function A(){return(0,k.createEncoder)({getSizeFromValue:a=>"legacy"===a.version?x().getSizeFromValue(a):y().getSizeFromValue(a),write:(a,b,c)=>"legacy"===a.version?x().write(a,b,c):y().write(a,b,c)})}function B(){return(0,k.transformDecoder)((0,l.getStructDecoder)([["version",w()],["header",(0,l.getStructDecoder)([["numSignerAccounts",v()],["numReadonlySignerAccounts",v()],["numReadonlyNonSignerAccounts",v()]])],["staticAccounts",(0,l.getArrayDecoder)((0,j.getAddressDecoder)(),{size:(0,m.getShortU16Decoder)()})],["lifetimeToken",(0,k.fixDecoderSize)((0,k.createDecoder)({read(a,b){let c=0===b?a:a.slice(b);if(0===c.length)return["",0];let d=c.findIndex(a=>0!==a);d=-1===d?c.length:d;let e=t[0].repeat(d);return d===c.length?[e,a.length]:[e+function(a,b){let c=BigInt(b.length),d=[];for(;a>0n;)d.unshift(b[Number(a%c)]),a/=c;return d.join("")}(c.slice(d).reduce((a,b)=>256n*a+BigInt(b),0n),t),a.length]}}),32)],["instructions",(0,l.getArrayDecoder)((g||(g=(0,k.transformDecoder)((0,l.getStructDecoder)([["programAddressIndex",(0,m.getU8Decoder)()],["accountIndices",(0,l.getArrayDecoder)((0,m.getU8Decoder)(),{size:(0,m.getShortU16Decoder)()})],["data",(0,k.addDecoderSizePrefix)((0,l.getBytesDecoder)(),(0,m.getShortU16Decoder)())]]),a=>{if(a.accountIndices.length&&a.data.byteLength)return a;let{accountIndices:b,data:c,...d}=a;return{...d,...b.length?{accountIndices:b}:null,...c.byteLength?{data:c}:null}})),g),{size:(0,m.getShortU16Decoder)()})],["addressTableLookups",(0,l.getArrayDecoder)(function(){if(!c){let a=(0,l.getArrayDecoder)((0,m.getU8Decoder)(),{size:(0,m.getShortU16Decoder)()});c=(0,l.getStructDecoder)([["lookupTableAddress",(0,j.getAddressDecoder)()],["writableIndexes",a],["readonlyIndexes",a]])}return c}(),{size:(0,m.getShortU16Decoder)()})]]),({addressTableLookups:a,...b})=>"legacy"!==b.version&&a?.length?{...b,addressTableLookups:a}:b)}function C(a,b,c){a[b]=c(a[b]??{role:n.AccountRole.READONLY})}var D=Symbol("AddressMapTypeProperty");function E(a){var b;let c,d,e,f=Object.entries(function(a,b){let c={[a]:{[D]:0,role:n.AccountRole.WRITABLE_SIGNER}},d=new Set;for(let a of b){let b;if(C(c,a.programAddress,b=>{if(d.add(a.programAddress),D in b){if((0,n.isWritableRole)(b.role))if(0===b[D])throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_CANNOT_PAY_FEES,{programAddress:a.programAddress});else throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE,{programAddress:a.programAddress});if(2===b[D])return b}return{[D]:2,role:n.AccountRole.READONLY}}),a.accounts)for(let e of a.accounts)C(c,e.address,a=>{let{address:c,...f}=e;if(D in a)switch(a[D]){case 0:return a;case 1:{let c=(0,n.mergeRoles)(a.role,f.role);if("lookupTableAddress"in f){if(a.lookupTableAddress!==f.lookupTableAddress&&0>(b||=(0,j.getAddressComparator)())(f.lookupTableAddress,a.lookupTableAddress))return{[D]:1,...f,role:c}}else if((0,n.isSignerRole)(f.role))return{[D]:2,role:c};if(a.role!==c)return{...a,role:c};return a}case 2:{let b=(0,n.mergeRoles)(a.role,f.role);if(d.has(e.address)){if((0,n.isWritableRole)(f.role))throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE,{programAddress:e.address});if(a.role!==b)return{...a,role:b};return a}if("lookupTableAddress"in f&&!(0,n.isSignerRole)(a.role))return{...f,[D]:1,role:b};if(a.role!==b)return{...a,role:b};else return a}}return"lookupTableAddress"in f?{...f,[D]:1}:{...f,[D]:2}})}return c}(a.feePayer.address,a.instructions)).sort(([a,b],[d,e])=>{if(b[D]!==e[D]){if(0===b[D])return -1;else if(0===e[D])return 1;else if(2===b[D])return -1;else if(2===e[D])return 1}let f=(0,n.isSignerRole)(b.role);if(f!==(0,n.isSignerRole)(e.role))return f?-1:1;let g=(0,n.isWritableRole)(b.role);return g!==(0,n.isWritableRole)(e.role)?g?-1:1:(c||=(0,j.getAddressComparator)(),1===b[D]&&1===e[D]&&b.lookupTableAddress!==e.lookupTableAddress)?c(b.lookupTableAddress,e.lookupTableAddress):c(a,d)}).map(([a,b])=>({address:a,...b})),g=a.lifetimeConstraint;return{..."legacy"!==a.version?{addressTableLookups:function(a){let b={};for(let c of a){if(!("lookupTableAddress"in c))continue;let a=b[c.lookupTableAddress]||={readonlyIndexes:[],writableIndexes:[]};c.role===n.AccountRole.WRITABLE?a.writableIndexes.push(c.addressIndex):a.readonlyIndexes.push(c.addressIndex)}return Object.keys(b).sort((0,j.getAddressComparator)()).map(a=>({lookupTableAddress:a,...b[a]}))}(f)}:null,...g?{lifetimeToken:"nonce"in g?g.nonce:g.blockhash}:null,header:function(a){let b=0,c=0,d=0;for(let e of a){if("lookupTableAddress"in e)break;let a=(0,n.isWritableRole)(e.role);(0,n.isSignerRole)(e.role)?(d++,!a&&c++):!a&&b++}return{numReadonlyNonSignerAccounts:b,numReadonlySignerAccounts:c,numSignerAccounts:d}}(f),instructions:(b=a.instructions,d=function(a){let b={};for(let[c,d]of a.entries())b[d.address]=c;return b}(f),b.map(({accounts:a,data:b,programAddress:c})=>({programAddressIndex:d[c],...a?{accountIndices:a.map(({address:a})=>d[a])}:null,...b?{data:b}:null}))),staticAccounts:(-1===(e=f.findIndex(a=>"lookupTableAddress"in a))?f:f.slice(0,e)).map(({address:a})=>a),version:a.version}}function F(a){return Object.freeze({instructions:Object.freeze([]),version:a.version})}var G="SysvarRecentB1ockHashes11111111111111111111",H="11111111111111111111111111111111";function I(a,b){return{accounts:[{address:a,role:n.AccountRole.WRITABLE},{address:G,role:n.AccountRole.READONLY},{address:b,role:n.AccountRole.READONLY_SIGNER}],data:new Uint8Array([4,0,0,0]),programAddress:H}}function J(a){var b;return a.programAddress===H&&null!=a.data&&4===(b=a.data).byteLength&&4===b[0]&&0===b[1]&&0===b[2]&&0===b[3]&&a.accounts?.length===3&&null!=a.accounts[0].address&&a.accounts[0].role===n.AccountRole.WRITABLE&&a.accounts[1].address===G&&a.accounts[1].role===n.AccountRole.READONLY&&null!=a.accounts[2].address&&(0,n.isSignerRole)(a.accounts[2].role)}function K(a){return"lifetimeConstraint"in a&&"string"==typeof a.lifetimeConstraint.nonce&&null!=a.instructions[0]&&J(a.instructions[0])}function L(a,b){var c;if("feePayer"in b&&a===b.feePayer?.address&&(c=b.feePayer)&&"address"in c&&"string"==typeof c.address&&1===Object.keys(c).length)return b;let d={...b,feePayer:Object.freeze({address:a})};return Object.freeze(d),d}function M(a,b){return N([a],b)}function N(a,b){return Object.freeze({...b,instructions:Object.freeze([...b.instructions,...a])})}function O(a,b){var c,d;return c=[a],Object.freeze({...d=b,instructions:Object.freeze([...c,...d.instructions])})}function P(a,b){let c=a.staticAccounts[0];if(!c)throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_FEE_PAYER_MISSING);let d=[...function(a){let{header:b}=a,c=b.numSignerAccounts-b.numReadonlySignerAccounts,d=a.staticAccounts.length-b.numSignerAccounts-b.numReadonlyNonSignerAccounts,e=[],f=0;for(let b=0;b<c;b++)e.push({address:a.staticAccounts[f],role:n.AccountRole.WRITABLE_SIGNER}),f++;for(let c=0;c<b.numReadonlySignerAccounts;c++)e.push({address:a.staticAccounts[f],role:n.AccountRole.READONLY_SIGNER}),f++;for(let b=0;b<d;b++)e.push({address:a.staticAccounts[f],role:n.AccountRole.WRITABLE}),f++;for(let c=0;c<b.numReadonlyNonSignerAccounts;c++)e.push({address:a.staticAccounts[f],role:n.AccountRole.READONLY}),f++;return e}(a),..."addressTableLookups"in a&&void 0!==a.addressTableLookups&&a.addressTableLookups.length>0?function(a,b){let c=a.map(a=>a.lookupTableAddress).filter(a=>void 0===b[a]);if(c.length>0)throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_CONTENTS_MISSING,{lookupTableAddresses:c});let d=[],e=[];for(let c of a){let a=b[c.lookupTableAddress],f=c.readonlyIndexes,g=c.writableIndexes,i=Math.max(...f,...g);if(i>=a.length)throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_INDEX_OUT_OF_RANGE,{highestKnownIndex:a.length-1,highestRequestedIndex:i,lookupTableAddress:c.lookupTableAddress});let j=f.map(b=>({address:a[b],addressIndex:b,lookupTableAddress:c.lookupTableAddress,role:n.AccountRole.READONLY}));d.push(...j);let k=g.map(b=>({address:a[b],addressIndex:b,lookupTableAddress:c.lookupTableAddress,role:n.AccountRole.WRITABLE}));e.push(...k)}return[...e,...d]}(a.addressTableLookups,b?.addressesByLookupTableAddress??{}):[]],e=a.instructions.map(a=>(function(a,b){let c=b[a.programAddressIndex]?.address;if(!c)throw new h.SolanaError(h.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_INSTRUCTION_PROGRAM_ADDRESS_NOT_FOUND,{index:a.programAddressIndex});let d=a.accountIndices?.map(a=>b[a]),{data:e}=a;return Object.freeze({programAddress:c,...d&&d.length?{accounts:Object.freeze(d)}:{},...e&&e.length?{data:e}:{}})})(a,d)),f=e[0],g=function(a,b,c){if(!b||!J(b))return{blockhash:a,lastValidBlockHeight:c??2n**64n-1n};{let c=b.accounts[0].address;(0,j.assertIsAddress)(c);let d=b.accounts[2].address;return(0,j.assertIsAddress)(d),{nonce:a,nonceAccountAddress:c,nonceAuthorityAddress:d}}}(a.lifetimeToken,f,b?.lastValidBlockHeight);return o(F({version:a.version}),a=>L(c,a),a=>e.reduce((a,b)=>M(b,a),a),a=>"blockhash"in g?q(g,a):function({nonce:a,nonceAccountAddress:b,nonceAuthorityAddress:c},d){let e,f=d.instructions[0];if(f&&J(f))if(f.accounts[0].address===b&&f.accounts[2].address===c)if(K(d)&&d.lifetimeConstraint.nonce===a)return d;else e=[f,...d.instructions.slice(1)];else e=[Object.freeze(I(b,c)),...d.instructions.slice(1)];else e=[Object.freeze(I(b,c)),...d.instructions];return Object.freeze({...d,instructions:Object.freeze(e),lifetimeConstraint:Object.freeze({nonce:a})})}(g,a))}a.s(["appendTransactionMessageInstruction",()=>M,"appendTransactionMessageInstructions",()=>N,"compileTransactionMessage",()=>E,"createTransactionMessage",()=>F,"decompileTransactionMessage",()=>P,"getCompiledTransactionMessageDecoder",()=>B,"getCompiledTransactionMessageEncoder",()=>A,"getTransactionVersionDecoder",()=>w,"isTransactionMessageWithBlockhashLifetime",()=>p,"isTransactionMessageWithDurableNonceLifetime",()=>K,"prependTransactionMessageInstruction",()=>O,"setTransactionMessageFeePayer",()=>L,"setTransactionMessageLifetimeUsingBlockhash",()=>q],587437)},168617,a=>{"use strict";var b,c=a.i(683402),d=a.i(941342),e=a.i(84235),f=a.i(727229),g=a.i(626961),h=a.i(587437);a.i(849470);var i=a.i(527394),j=a.i(147037);function k(a){let b=Object.values(a);if(0===b.length)throw new g.SolanaError(g.SOLANA_ERROR__TRANSACTION__CANNOT_ENCODE_WITH_EMPTY_SIGNATURES);return b.map(a=>a||new Uint8Array(64).fill(0))}function l(){return(0,e.getStructEncoder)([["signatures",(0,d.transformEncoder)((0,e.getArrayEncoder)((0,d.fixEncoderSize)((0,e.getBytesEncoder)(),64),{size:(0,f.getShortU16Encoder)()}),k)],["messageBytes",(0,e.getBytesEncoder)()]])}function m(){return(0,d.transformDecoder)((0,e.getStructDecoder)([["signatures",(0,e.getArrayDecoder)((0,d.fixDecoderSize)((0,e.getBytesDecoder)(),64),{size:(0,f.getShortU16Decoder)()})],["messageBytes",(0,e.getBytesDecoder)()]]),n)}function n(a){let{messageBytes:b,signatures:i}=a,[j,k,l]=(0,e.getTupleDecoder)([(0,h.getTransactionVersionDecoder)(),(0,d.padRightDecoder)((0,f.getU8Decoder)(),2),(0,e.getArrayDecoder)((0,c.getAddressDecoder)(),{size:(0,f.getShortU16Decoder)()})]).decode(b),m=l.slice(0,k);if(m.length!==i.length)throw new g.SolanaError(g.SOLANA_ERROR__TRANSACTION__MESSAGE_SIGNATURES_MISMATCH,{numRequiredSignatures:k,signaturesLength:i.length,signerAddresses:m});let n={};return m.forEach((a,b)=>{let c=i[b];c.every(a=>0===a)?n[a]=null:n[a]=c}),{messageBytes:b,signatures:Object.freeze(n)}}function o(a){let b,c=(0,h.compileTransactionMessage)(a),d=(0,h.getCompiledTransactionMessageEncoder)().encode(c),e=c.staticAccounts.slice(0,c.header.numSignerAccounts),f={};for(let a of e)f[a]=null;return(0,h.isTransactionMessageWithBlockhashLifetime)(a)?b={blockhash:a.lifetimeConstraint.blockhash,lastValidBlockHeight:a.lifetimeConstraint.lastValidBlockHeight}:(0,h.isTransactionMessageWithDurableNonceLifetime)(a)&&(b={nonce:a.lifetimeConstraint.nonce,nonceAccountAddress:a.instructions[0].accounts[0].address}),Object.freeze({...b?{lifetimeConstraint:b}:void 0,messageBytes:d,signatures:Object.freeze(f)})}function p(a){b||(b=(0,i.getBase58Decoder)());let c=Object.values(a.signatures)[0];if(!c)throw new g.SolanaError(g.SOLANA_ERROR__TRANSACTION__FEE_PAYER_SIGNATURE_MISSING);return b.decode(c)}async function q(a,b){let d,e;if(await Promise.all(a.map(async a=>{let f=await (0,c.getAddressFromPublicKey)(a.publicKey),g=b.signatures[f];if(void 0===g)return void(e||=new Set).add(f);if(e)return;let h=await (0,j.signBytes)(a.privateKey,b.messageBytes);null!==g&&h.length===g.length&&h.every((a,b)=>a===g[b])||((d||={})[f]=h)})),e&&e.size>0){let a=Object.keys(b.signatures);throw new g.SolanaError(g.SOLANA_ERROR__TRANSACTION__ADDRESSES_CANNOT_SIGN_TRANSACTION,{expectedAddresses:a,unexpectedAddresses:[...e]})}return d?Object.freeze({...b,signatures:Object.freeze({...b.signatures,...d})}):b}function r(a){let b=[];if(Object.entries(a.signatures).forEach(([a,c])=>{c||b.push(a)}),b.length>0)throw new g.SolanaError(g.SOLANA_ERROR__TRANSACTION__SIGNATURES_MISSING,{addresses:b})}function s(a){let b=l().encode(a);return(0,i.getBase64Decoder)().decode(b)}function t(a){var b;return b=o(a),l().getSizeFromValue(b)}a.s(["TRANSACTION_SIZE_LIMIT",()=>1232,"assertIsFullySignedTransaction",()=>r,"compileTransaction",()=>o,"getBase64EncodedWireTransaction",()=>s,"getSignatureFromTransaction",()=>p,"getTransactionDecoder",()=>m,"getTransactionEncoder",()=>l,"getTransactionMessageSize",()=>t,"partiallySignTransaction",()=>q])},447213,a=>{"use strict";var b=a.i(626961);a.i(865177);var c=a.i(683402),d=a.i(147037),e=a.i(168617);function f(a){let c={};return a.forEach(a=>{if(c[a.address]){if(c[a.address]!==a)throw new b.SolanaError(b.SOLANA_ERROR__SIGNER__ADDRESS_CANNOT_HAVE_MULTIPLE_SIGNERS,{address:a.address})}else c[a.address]=a}),Object.values(c)}function g(a){return"modifyAndSignTransactions"in a&&"function"==typeof a.modifyAndSignTransactions}function h(a){return"signTransactions"in a&&"function"==typeof a.signTransactions}function i(a){return"signAndSendTransactions"in a&&"function"==typeof a.signAndSendTransactions}function j(a){return h(a)||g(a)||i(a)}function k(a){return f((a.accounts??[]).flatMap(a=>"signer"in a?a.signer:[]))}function l(a,b){Object.freeze(a);let c={...b,feePayer:a};return Object.freeze(c),c}async function m(a){let b=await (0,c.getAddressFromPublicKey)(a.publicKey);return Object.freeze({address:b,keyPair:a,signMessages:c=>Promise.all(c.map(async c=>Object.freeze({[b]:await (0,d.signBytes)(a.privateKey,c.content)}))),signTransactions:c=>Promise.all(c.map(async c=>Object.freeze({[b]:(await (0,e.partiallySignTransaction)([a],c)).signatures[b]})))})}async function n(a,b){return await m(await (0,d.createKeyPairFromBytes)(a,b))}async function o(a,b){return await m(await (0,d.createKeyPairFromPrivateKeyBytes)(a,b))}async function p(a,b){let{partialSigners:c,modifyingSigners:d}=function(a,b={}){let c=b.identifySendingSigner??!0?function(a){let b=a.filter(i);if(0===b.length)return null;let c=b.filter(a=>!g(a)&&!h(a));return c.length>0?c[0]:b[0]}(a):null,d=a.filter(a=>a!==c&&(g(a)||h(a))),e=function(a){let b=a.filter(g);if(0===b.length)return[];let c=b.filter(a=>!h(a));return c.length>0?c:[b[0]]}(d),f=d.filter(h).filter(a=>!e.includes(a));return Object.freeze({modifyingSigners:e,partialSigners:f,sendingSigner:c})}(f(f([...a.feePayer&&j(a.feePayer)?[a.feePayer]:[],...a.instructions.flatMap(k)]).filter(j)),{identifySendingSigner:!1});return await q(a,d,c,b)}async function q(a,b=[],c=[],d){let f=(0,e.compileTransaction)(a),g=await b.reduce(async(a,b)=>{d?.abortSignal?.throwIfAborted();let[c]=await b.modifyAndSignTransactions([await a],d);return Object.freeze(c)},Promise.resolve(f));d?.abortSignal?.throwIfAborted();let h=await Promise.all(c.map(async a=>{let[b]=await a.signTransactions([g],d);return b}));return Object.freeze({...g,signatures:Object.freeze(h.reduce((a,b)=>({...a,...b}),g.signatures??{}))})}a.s(["createKeyPairSignerFromBytes",()=>n,"createKeyPairSignerFromPrivateKeyBytes",()=>o,"isTransactionModifyingSigner",()=>g,"isTransactionPartialSigner",()=>h,"isTransactionSigner",()=>j,"partiallySignTransactionMessageWithSigners",()=>p,"setTransactionMessageFeePayerSigner",()=>l])},963001,a=>{"use strict";function b(a){return null!==a&&("object"==typeof a||"function"==typeof a)}var c=new WeakMap;async function d(a){let d,e=new Promise((e,f)=>{for(let g of(d={reject:f,resolve:e},a)){if(!b(g)){Promise.resolve(g).then(e,f);continue}let a=c.get(g);void 0===a?((a=function(a){let b=new Set,c={deferreds:b,settled:!1};return Promise.resolve(a).then(a=>{for(let{resolve:c}of b)c(a);b.clear(),c.settled=!0},a=>{for(let{reject:c}of b)c(a);b.clear(),c.settled=!0}),c}(g)).deferreds.add(d),c.set(g,a)):a.settled?Promise.resolve(g).then(e,f):a.deferreds.add(d)}});return await e.finally(()=>{for(let e of a)b(e)&&c.get(e).deferreds.delete(d)})}function e(a,b){return b?d([new Promise((a,c)=>{b.aborted?c(b.reason):b.addEventListener("abort",function(){c(this.reason)})}),a]):a}a.s(["getAbortablePromise",()=>e,"safeRace",()=>d])},433289,a=>{"use strict";var b=a.i(941342),c=a.i(84235),d=a.i(727229),e=a=>({__option:"Some",value:a}),f=()=>({__option:"None"}),g=a=>!!(a&&"object"==typeof a&&"__option"in a&&("Some"===a.__option&&"value"in a||"None"===a.__option)),h=a=>"None"===a.__option;function i(a,b){return"Some"===a.__option?a.value:b?b():null}var j=a=>null!==a?e(a):f();function k(a,e={}){let f=null===e.prefix?(0,b.transformEncoder)((0,c.getUnitEncoder)(),a=>void 0):(0,c.getBooleanEncoder)({size:e.prefix??(0,d.getU8Encoder)()}),h="zeroes"===e.noneValue?((0,b.assertIsFixedSize)(a),(0,b.fixEncoderSize)((0,c.getUnitEncoder)(),a.fixedSize)):e.noneValue?(0,c.getConstantEncoder)(e.noneValue):(0,c.getUnitEncoder)();return(0,c.getUnionEncoder)([(0,b.transformEncoder)((0,c.getTupleEncoder)([f,h]),a=>[!1,void 0]),(0,b.transformEncoder)((0,c.getTupleEncoder)([f,a]),a=>[!0,g(a)&&"Some"===a.__option?a.value:a])],a=>Number("Some"===(g(a)?a:j(a)).__option))}function l(a,g={}){let h=null===g.prefix?(0,b.transformDecoder)((0,c.getUnitDecoder)(),()=>!1):(0,c.getBooleanDecoder)({size:g.prefix??(0,d.getU8Decoder)()}),i="zeroes"===g.noneValue?((0,b.assertIsFixedSize)(a),(0,b.fixDecoderSize)((0,c.getUnitDecoder)(),a.fixedSize)):g.noneValue?(0,c.getConstantDecoder)(g.noneValue):(0,c.getUnitDecoder)();return(0,c.getUnionDecoder)([(0,b.transformDecoder)((0,c.getTupleDecoder)([h,i]),()=>f()),(0,b.transformDecoder)((0,c.getTupleDecoder)([h,a]),([,a])=>e(a))],(a,c)=>{if(null===g.prefix&&!g.noneValue)return Number(c<a.length);if(null===g.prefix&&null!=g.noneValue){let d="zeroes"===g.noneValue?new Uint8Array(i.fixedSize).fill(0):g.noneValue;return+!(0,b.containsBytes)(a,d,c)}return Number(h.read(a,c)[0])})}a.s(["getOptionDecoder",()=>l,"getOptionEncoder",()=>k,"isNone",()=>h,"isOption",()=>g,"none",()=>f,"unwrapOption",()=>i,"wrapNullable",()=>j])},847675,278475,a=>{"use strict";var b=a.i(626961),c=a.i(527394);function d(a,c){try{if("exists"in a&&!a.exists)return a;return Object.freeze({...a,data:c.decode(a.data)})}catch{throw new b.SolanaError(b.SOLANA_ERROR__ACCOUNTS__FAILED_TO_DECODE_ACCOUNT,{address:a.address})}}function e(a){let c=a.filter(a=>(!("exists"in a)||"exists"in a&&a.exists)&&a.data instanceof Uint8Array);if(c.length>0){let a=c.map(a=>a.address);throw new b.SolanaError(b.SOLANA_ERROR__ACCOUNTS__EXPECTED_ALL_ACCOUNTS_TO_BE_DECODED,{addresses:a})}}function f(a,b){if(!b)return Object.freeze({address:a,exists:!1});let d=(0,c.getBase64Encoder)().encode(b.data[0]);return Object.freeze({...h(b),address:a,data:d,exists:!0})}function g(a,b){if(!b)return Object.freeze({address:a,exists:!1});let c=b.data.parsed.info;return Object.freeze({...h(b),address:a,data:c,exists:!0})}function h(a){return Object.freeze({executable:a.executable,lamports:a.lamports,programAddress:a.owner,space:a.space})}async function i(a,b,c={}){let{abortSignal:d,...e}=c,g=await a.getAccountInfo(b,{...e,encoding:"base64"}).send({abortSignal:d});return f(b,g.value)}async function j(a,b,c={}){let{abortSignal:d,...e}=c,{value:h}=await a.getAccountInfo(b,{...e,encoding:"jsonParsed"}).send({abortSignal:d});return h&&"object"==typeof h&&"parsed"in h.data?g(b,h):f(b,h)}async function k(a,b,c={}){let{abortSignal:d,...e}=c;return(await a.getMultipleAccounts(b,{...e,encoding:"base64"}).send({abortSignal:d})).value.map((a,c)=>f(b[c],a))}async function l(a,b,c={}){let{abortSignal:d,...e}=c;return(await a.getMultipleAccounts(b,{...e,encoding:"jsonParsed"}).send({abortSignal:d})).value.map((a,c)=>a&&"object"==typeof a&&"parsed"in a.data?g(b[c],a):f(b[c],a))}function m(a){if(!a.exists)throw new b.SolanaError(b.SOLANA_ERROR__ACCOUNTS__ACCOUNT_NOT_FOUND,{address:a.address})}function n(a){let c=a.filter(a=>!a.exists);if(c.length>0){let a=c.map(a=>a.address);throw new b.SolanaError(b.SOLANA_ERROR__ACCOUNTS__ONE_OR_MORE_ACCOUNTS_NOT_FOUND,{addresses:a})}}function o(a,c,d,e){if(!(0,b.isSolanaError)(a,b.SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM))return!1;let f=c.instructions[a.context.index]?.programAddress;return!!f&&f===d&&(void 0===e||a.context.code===e)}a.s(["BASE_ACCOUNT_SIZE",()=>128,"assertAccountExists",()=>m,"assertAccountsDecoded",()=>e,"assertAccountsExist",()=>n,"decodeAccount",()=>d,"fetchEncodedAccount",()=>i,"fetchEncodedAccounts",()=>k,"fetchJsonParsedAccount",()=>j,"fetchJsonParsedAccounts",()=>l],847675),a.s(["isProgramError",()=>o],278475)},895769,a=>{"use strict";var b,c,d,e,f,g=a.i(84235);a.i(433289);var h=a.i(683402),i=a.i(727229),j=a.i(941342);a.i(847675),a.i(278475);var k=a.i(865177);a.i(527394),a.i(626961),a.i(587437),a.i(168617),a.i(963001);var l=a.i(447213),m=((b=m||{})[b.Uninitialized=0]="Uninitialized",b[b.Initialized=1]="Initialized",b[b.Frozen=2]="Frozen",b),n=((c=n||{})[c.MintTokens=0]="MintTokens",c[c.FreezeAccount=1]="FreezeAccount",c[c.AccountOwner=2]="AccountOwner",c[c.CloseAccount=3]="CloseAccount",c),o=((d=o||{})[d.CreateAssociatedToken=0]="CreateAssociatedToken",d[d.CreateAssociatedTokenIdempotent=1]="CreateAssociatedTokenIdempotent",d[d.RecoverNestedAssociatedToken=2]="RecoverNestedAssociatedToken",d),p="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",q=((e=q||{})[e.Mint=0]="Mint",e[e.Token=1]="Token",e[e.Multisig=2]="Multisig",e),r=((f=r||{})[f.InitializeMint=0]="InitializeMint",f[f.InitializeAccount=1]="InitializeAccount",f[f.InitializeMultisig=2]="InitializeMultisig",f[f.Transfer=3]="Transfer",f[f.Approve=4]="Approve",f[f.Revoke=5]="Revoke",f[f.SetAuthority=6]="SetAuthority",f[f.MintTo=7]="MintTo",f[f.Burn=8]="Burn",f[f.CloseAccount=9]="CloseAccount",f[f.FreezeAccount=10]="FreezeAccount",f[f.ThawAccount=11]="ThawAccount",f[f.TransferChecked=12]="TransferChecked",f[f.ApproveChecked=13]="ApproveChecked",f[f.MintToChecked=14]="MintToChecked",f[f.BurnChecked=15]="BurnChecked",f[f.InitializeAccount2=16]="InitializeAccount2",f[f.SyncNative=17]="SyncNative",f[f.InitializeAccount3=18]="InitializeAccount3",f[f.InitializeMultisig2=19]="InitializeMultisig2",f[f.InitializeMint2=20]="InitializeMint2",f[f.GetAccountDataSize=21]="GetAccountDataSize",f[f.InitializeImmutableOwner=22]="InitializeImmutableOwner",f[f.AmountToUiAmount=23]="AmountToUiAmount",f[f.UiAmountToAmount=24]="UiAmountToAmount",f);function s(a,b){return b=>{if(!b.value)return Object.freeze({address:a,role:k.AccountRole.READONLY});let c=b.isWritable?k.AccountRole.WRITABLE:k.AccountRole.READONLY;return Object.freeze({address:function(a){if(!a)throw Error("Expected a Address.");return"object"==typeof a&&"address"in a?a.address:Array.isArray(a)?a[0]:a}(b.value),role:t(b.value)?(0,k.upgradeRoleToSigner)(c):c,...t(b.value)?{signer:b.value}:{}})}}function t(a){return!!a&&"object"==typeof a&&"address"in a&&(0,l.isTransactionSigner)(a)}async function u(a,b={}){let{programAddress:c="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}=b;return await (0,h.getProgramDerivedAddress)({programAddress:c,seeds:[(0,h.getAddressEncoder)().encode(a.owner),(0,h.getAddressEncoder)().encode(a.tokenProgram),(0,h.getAddressEncoder)().encode(a.mint)]})}function v(a,b){let c=b?.programAddress??"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",d={payer:{value:a.payer??null,isWritable:!0},ata:{value:a.ata??null,isWritable:!0},owner:{value:a.owner??null,isWritable:!1},mint:{value:a.mint??null,isWritable:!1},systemProgram:{value:a.systemProgram??null,isWritable:!1},tokenProgram:{value:a.tokenProgram??null,isWritable:!1}};d.tokenProgram.value||(d.tokenProgram.value="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),d.systemProgram.value||(d.systemProgram.value="11111111111111111111111111111111");let e=s(c);return Object.freeze({accounts:[e(d.payer),e(d.ata),e(d.owner),e(d.mint),e(d.systemProgram),e(d.tokenProgram)],data:(0,j.transformEncoder)((0,g.getStructEncoder)([["discriminator",(0,i.getU8Encoder)()]]),a=>({...a,discriminator:1})).encode({}),programAddress:c})}function w(a,b){let c=b?.programAddress??p,d={source:{value:a.source??null,isWritable:!0},destination:{value:a.destination??null,isWritable:!0},authority:{value:a.authority??null,isWritable:!1}},e={...a},f=(e.multiSigners??[]).map(a=>({address:a.address,role:k.AccountRole.READONLY_SIGNER,signer:a})),h=s(c);return Object.freeze({accounts:[h(d.source),h(d.destination),h(d.authority),...f],data:(0,j.transformEncoder)((0,g.getStructEncoder)([["discriminator",(0,i.getU8Encoder)()],["amount",(0,i.getU64Encoder)()]]),a=>({...a,discriminator:3})).encode(e),programAddress:c})}a.s(["TOKEN_PROGRAM_ADDRESS",()=>p,"findAssociatedTokenPda",()=>u,"getCreateAssociatedTokenIdempotentInstruction",()=>v,"getTransferInstruction",()=>w],895769)},238363,a=>{"use strict";var b=a.i(572131),c=a.i(360228);let d=()=>{let{walletProxy:a,client:d}=(0,c.u)();return(0,b.useMemo)(()=>({signWithUserSigner:async({message:b,targetAppId:c})=>{if(!a)throw Error("Wallet proxy not initialized");let e=await d.getAccessToken();if(!e)throw Error("User must be authenticated");let{signature:f}=await a.signWithUserSigner({accessToken:e,message:b,targetAppId:c});return{signature:f}}}),[a,d])};a.s(["u",()=>d])}];

//# sourceMappingURL=node_modules_eac015b2._.js.map